import{c as de,a as Es,R as ve,j as e,r as d,P as ls,F as ds,S as us,X as hs,C as ms,b as ps,d as We,e as gs,T as xs,f as fs,u as le,g as ue,L as X,h as Se,i as Fe,k as Bs,l as js,N as _s,E as Ts,m as ys,O as Os,n as As,o as Qe,p as Rs,q as Fs,s as Ce,t as zs,v as Us,B as qs}from"./vendor-BH_EzfWk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const bs=de(s=>({theme:localStorage.getItem("theme")||"light",toggleTheme:()=>s(t=>{const r=t.theme==="light"?"dark":"light";return localStorage.setItem("theme",r),{theme:r}}),setTheme:t=>s(()=>(localStorage.setItem("theme",t),{theme:t}))})),Ze=localStorage.getItem("user"),Ms=Ze?JSON.parse(Ze):null,z=de(s=>({accessToken:localStorage.getItem("accessToken")||null,refreshToken:localStorage.getItem("refreshToken")||null,user:Ms,login:(t,r,a)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),localStorage.setItem("user",JSON.stringify(a)),s({accessToken:t,refreshToken:r,user:a})},setUser:t=>{t?localStorage.setItem("user",JSON.stringify(t)):localStorage.removeItem("user"),s({user:t})},setTokens:(t,r)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),s({accessToken:t,refreshToken:r})},logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("cart"),s({accessToken:null,refreshToken:null,user:null})},forgotPassword:t=>{he.forgotPassword(t)}})),Me=de(s=>({users:[],setUsers:t=>s({users:t}),updateUserInStore:t=>s(r=>({users:r.users.map(a=>a.id===t.id?t:a)})),removeUser:t=>s(r=>({users:r.users.filter(a=>a.id!==t)}))})),ie={async getAll(s){const{data:t}=await S.get(`products?limit=${s?.limit}&skip=${s?.skip}&category=${s?.categorySlug}&collection=${s?.collectionSlug}`);return t.data},async getById(s){const{data:t}=await S.get(`products/${s}`);return t},async getProductById(s){return this.getById(s)},async addProduct(s){const{data:t}=await S.post("products",s);return t},async updateProduct(s,t){console.log("ProductService: Updating product:",s,t);const{data:r}=await S.patch(`products/${s}`,t);return r},async deleteProduct(s){console.log("ProductService: Deleting product:",s),await S.delete(`products/${s}`)},async testConnection(){try{return await S.get("products?limit=1"),console.log("ProductService: Connection test successful"),!0}catch(s){return console.error("ProductService: Connection test failed:",s),!1}}},ze=de(s=>({products:[],isLoading:!1,error:null,setProducts:t=>s({products:t,error:null}),addProduct:t=>s(r=>({products:[...r.products,t],error:null})),updateProduct:t=>s(r=>({products:r.products.map(a=>a.id===t.id?t:a),error:null})),removeProduct:t=>s(r=>({products:r.products.filter(a=>a.id!==t),error:null})),setLoading:t=>s({isLoading:t}),setError:t=>s({error:t,isLoading:!1}),fetchProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping fetchProducts on server"),s({isLoading:!1,error:null,products:[]});return}s({isLoading:!0,error:null});try{const r=await ie.getAll(t);s({products:r,isLoading:!1})}catch(r){console.error("❌ Error fetching products:",r),s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1})}},appendProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping appendProducts on server");return}s({isLoading:!0,error:null});try{const r=await ie.getAll(t);s(a=>({products:[...a.products,...r],isLoading:!1}))}catch(r){s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1})}},createProduct:async t=>{if(typeof window>"u")throw new Error("createProduct can only be called on client side");s({isLoading:!0,error:null});try{const r=await ie.addProduct(t);s(a=>({products:[...a.products,r],isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}},editProduct:async(t,r)=>{if(typeof window>"u")throw new Error("editProduct can only be called on client side");s({isLoading:!0,error:null});try{const a=await ie.updateProduct(t,r);s(n=>({products:n.products.map(c=>c.id===t?a:c),isLoading:!1}))}catch(a){throw s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1}),a}},deleteProduct:async t=>{if(typeof window>"u")throw new Error("deleteProduct can only be called on client side");s({isLoading:!0,error:null});try{await ie.deleteProduct(t),s(r=>({products:r.products.filter(a=>a.id!==t),isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}}})),he={register:s=>S.post("auth/register",s),async login(s){console.log("[AuthService] login() called with:",s.email);let t;try{console.log("[AuthService] Sending login request to /auth/login");const r=await S.post("auth/login",s);console.log("[AuthService] /auth/login response:",r),t=r.data}catch(r){if(console.error("[AuthService] Error during /auth/login request:",r),console.error("[AuthService] Error response:",r?.response?.data),console.error("[AuthService] Error status:",r?.response?.status),r?.response){const a=r.response.status,n=r.response.data||{};if(console.log("[AuthService] Processing error - status:",a),console.log("[AuthService] Response data:",n),a===401){let c="Неправильний email або пароль";throw typeof n=="string"?c=n:n.message&&typeof n.message=="string"?c=n.message:n.error&&typeof n.error=="string"?c=n.error:n.detail&&typeof n.detail=="string"&&(c=n.detail),console.log("[AuthService] Throwing 401 error with message:",c),new Error(c)}if(a===400){let c="Некоректні дані входу";throw typeof n=="string"?c=n:n.message&&typeof n.message=="string"?c=n.message:n.error&&typeof n.error=="string"&&(c=n.error),new Error(c)}if(n.message&&typeof n.message=="string")throw new Error(n.message);if(n.error&&typeof n.error=="string")throw new Error(n.error)}throw r instanceof Error?r:new Error("Помилка під час входу")}if(!t.accessToken||!t.refreshToken)throw console.error("[AuthService] Missing tokens in response"),new Error("Сервер не повернув токени авторизації");z.getState().setTokens(t.accessToken,t.refreshToken);try{const{data:r}=await this.me();return z.getState().login(t.accessToken,t.refreshToken,r),r}catch(r){throw console.error("[AuthService] Failed to fetch user after login:",r),z.getState().logout(),new Error("Не вдалося отримати дані користувача")}},async refresh(){const s=z.getState().refreshToken;if(!s)throw new Error("Токен оновлення відсутній");try{const{data:t}=await S.post("auth/refresh",{refresh:s});if(!t.accessToken||!t.refreshToken)throw new Error("Сервер не повернув нові токени");z.getState().setTokens(t.accessToken,t.refreshToken)}catch{throw z.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}},async me(){try{return await S.get("users/me")}catch(s){if(s?.response?.status===401)try{return await this.refresh(),await S.get("users/me")}catch{throw z.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}throw s}},async updateUser(s,t){try{const{data:r}=await S.patch(`users/update/${t}`,s),a=z.getState();return a.accessToken&&a.refreshToken&&z.getState().login(a.accessToken,a.refreshToken,r),r}catch(r){throw new Error(r?r.response.data.error.message:"Помилка оновлення профілю")}},async logout(){const s=z.getState().refreshToken;if(s)try{await S.post("auth/logout",{refresh:s})}catch{}z.getState().logout()},async forgotPassword(s){try{await S.post("auth/forgot-password",{email:s})}catch(t){throw new Error(t instanceof Error?t.message:"Помилка оновлення")}},async resetPassword(s,t,r){const a={email:s,resetCode:t,newPassword:r};try{await S.post("auth/reset-password",a)}catch(n){throw new Error(n instanceof Error?n.message:"Помилка оновлення")}},async changePassword(s,t){const r={currentPassword:s,newPassword:t};try{await S.post("auth/change-password",r)}catch(a){throw new Error(a?a.response.data.error.message:"Помилка оновлення")}}},Ds="https://fbe.onrender.com",S=Es.create({baseURL:Ds});S.interceptors.request.use(s=>{if(s.data instanceof FormData?delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json",s.headers.Accept="*/*",s.url&&!s.url.includes("auth/login")&&!s.url.includes("auth/register")){const t=localStorage.getItem("accessToken")||null;t&&(s.headers.Authorization=`Bearer ${t}`)}return s},s=>Promise.reject(s));let we=!1;const Ge=[];S.interceptors.response.use(s=>s,async s=>{const t=s.config;if(s.response&&s.response.status===401&&t&&t.url&&!t.url.includes("auth/login")&&!t.url.includes("auth/register")&&!t.url.includes("auth/refresh")){if(!we)if(we=!0,localStorage.getItem("refreshToken"))try{if(await he.refresh(),we=!1,Gs(),t)return S(t)}catch(a){return console.log("Помилка при оновленні токена:",a),z.getState().logout(),we=!1,console.log("Не вдалося оновити токен."),Promise.reject(s)}else return we=!1,z.getState().logout(),Promise.reject(s);return new Promise((r,a)=>{Ws(()=>{t?r(S(t)):a(new Error("Original request is undefined"))})})}return Promise.reject(s)});const Ws=s=>{Ge.push(s)},Gs=()=>{for(console.log("Оновлення токенів успішно завершене.");Ge.length;){const s=Ge.pop();s&&s()}},ke="/categories",Le={async getAll(){return(await S.get(ke)).data},async getOne(s){return(await S.get(`${ke}/${s}`)).data},async create(s){return(await S.post(ke,s)).data},async remove(s){await S.delete(`${ke}/${s}`)},async update(s,t){return(await S.patch(`${ke}/${s}`,t)).data}},Ue=de(s=>({categories:[],loading:!1,error:null,fetchCategories:async()=>{s({loading:!0,error:null});try{const t=await Le.getAll();s({categories:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження категорій",loading:!1})}},addCategory:async t=>{try{const r=await Le.create(t);if(!r)throw new Error("Категорія не була оновлена");return s(a=>({categories:[...a.categories,r]})),r}catch(r){throw s({error:r.message||"Помилка оновлення категорії",loading:!1}),r}},updateCategory:async(t,r)=>{try{const a=await Le.update(t,r);if(!a)throw new Error("Категорія не була оновлена");return s(n=>({categories:n.categories.map(c=>c.id===t?a:c)})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},removeCategory:t=>s(r=>({categories:r.categories.filter(a=>a.id!==t)}))})),Vs="_inputWrapper_18ahu_1",Hs="_radioCheckboxWrapper_18ahu_8",Js="_label_18ahu_14",Ks="_required_18ahu_22",Xs="_input_18ahu_1",Ys="_radioCheckboxLabel_18ahu_43",Qs="_disabled_18ahu_57",Zs="_radioCheckboxText_18ahu_77",et="_errorBorder_18ahu_99",st="_errorText_18ahu_103",G={inputWrapper:Vs,radioCheckboxWrapper:Hs,label:Js,required:Ks,input:Xs,radioCheckboxLabel:Ys,disabled:Qs,radioCheckboxText:Zs,errorBorder:et,errorText:st},j=ve.forwardRef(({label:s,error:t,type:r="text",placeholder:a,disabled:n=!1,required:c=!1,id:o,name:h,...i},l)=>{const m=r==="radio",p=r==="checkbox";return e.jsxs("div",{className:`${G.inputWrapper} ${m||p?G.radioCheckboxWrapper:""}`,children:[m||p?e.jsxs("label",{className:`${G.radioCheckboxLabel} ${n?G.disabled:""}`,children:[e.jsx("input",{ref:l,className:`${G.input} ${t?G.errorBorder:""}`,type:r,placeholder:a,disabled:n,required:c,id:o,name:h,...i}),e.jsxs("span",{className:G.radioCheckboxText,children:[s," ",c&&e.jsx("span",{className:G.required,children:"*"})]})]}):e.jsxs(e.Fragment,{children:[s&&e.jsxs("label",{className:G.label,children:[s," ",c&&e.jsx("span",{className:G.required,children:"*"})]}),e.jsx("input",{ref:l,type:r,placeholder:a,disabled:n,required:c,id:o,name:h,className:`${G.input} ${t?G.errorBorder:""}`,...i})]}),t&&e.jsx("p",{className:G.errorText,children:t})]})});j.displayName="Input";const tt="_container_1riki_1",rt="_header_1riki_10",at="_btn_1riki_33",nt="_btnPrimary_1riki_66",ct="_btnSuccess_1riki_75",ot="_btnSecondary_1riki_84",it="_btnEdit_1riki_95",lt="_btnDelete_1riki_106",dt="_btnSave_1riki_117",ut="_btnCancel_1riki_127",ht="_toggleBtn_1riki_137",mt="_createForm_1riki_151",pt="_formInputs_1riki_167",gt="_inputGroup_1riki_179",xt="_formInput_1riki_167",ft="_formActions_1riki_211",jt="_categoriesSection_1riki_217",_t="_sectionHeader_1riki_217",yt="_categoryItem_1riki_246",bt="_categoryDisplay_1riki_255",vt="_categoryLeft_1riki_270",Nt="_expandButton_1riki_277",St="_spacer_1riki_284",Ct="_categoryInfo_1riki_289",wt="_categoryIcon_1riki_296",kt="_categoryText_1riki_301",It="_categoryName_1riki_307",$t="_categorySlug_1riki_313",Pt="_parentInfo_1riki_323",Lt="_categoryActions_1riki_329",Et="_editForm_1riki_335",Bt="_editHeader_1riki_344",Tt="_editingLabel_1riki_347",Ot="_editInputs_1riki_356",At="_inputWrapper_1riki_368",Rt="_editInput_1riki_356",Ft="_editActions_1riki_394",zt="_children_1riki_401",Ut="_emptyState_1riki_408",qt="_emptyIcon_1riki_413",Mt="_loading_1riki_428",Dt="_error_1riki_429",x={container:tt,header:rt,btn:at,btnPrimary:nt,btnSuccess:ct,btnSecondary:ot,btnEdit:it,btnDelete:lt,btnSave:dt,btnCancel:ut,toggleBtn:ht,createForm:mt,formInputs:pt,inputGroup:gt,formInput:xt,formActions:ft,categoriesSection:jt,sectionHeader:_t,categoryItem:yt,categoryDisplay:bt,categoryLeft:vt,expandButton:Nt,spacer:St,categoryInfo:Ct,categoryIcon:wt,categoryText:kt,categoryName:It,categorySlug:$t,parentInfo:Pt,categoryActions:Lt,editForm:Et,editHeader:Bt,editingLabel:Tt,editInputs:Ot,inputWrapper:At,editInput:Rt,editActions:Ft,children:zt,emptyState:Ut,emptyIcon:qt,loading:Mt,error:Dt},Wt=()=>{const{categories:s,loading:t,error:r,fetchCategories:a,addCategory:n,removeCategory:c,updateCategory:o}=Ue(),[h,i]=d.useState(null),[l,m]=d.useState({}),[p,f]=d.useState({name:"",slug:"",parentId:null,imageUrl:""}),[u,g]=d.useState(!1),[_,w]=d.useState(new Set);d.useEffect(()=>{a()},[a]),d.useEffect(()=>{if(s.length>0){const b=s.map($=>$.id);w(new Set(b))}},[s]);const A=async()=>{if(!p.name?.trim()){alert("Введіть назву категорії");return}try{const b={...p,slug:p.slug||p.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")};await n(b),f({name:"",slug:"",parentId:null,imageUrl:""}),g(!1),alert("Категорія створена")}catch(b){alert(b.message||"Помилка при створенні категорії")}},v=async b=>{const q=s.some(O=>O.parentId===b)?"Ця категорія має підкатегорії. Видалити разом з усіма підкатегоріями?":"Ви дійсно хочете видалити категорію?";if(confirm(q))try{await Le.remove(b),c(b),w(O=>{const W=new Set(O);return W.delete(b),W})}catch(O){alert(O.message||"Помилка при видаленні категорії")}},B=b=>{i(b.id),m({name:b.name,slug:b.slug,parentId:b.parentId,imageUrl:b.imageUrl||""})},N=async()=>{if(l.name?.trim())try{if(h){const b=await Le.update(h,{name:l.name,parentId:l.parentId,slug:l.slug,imageUrl:l.imageUrl});l.id&&o(l.id,b)}else{const b={name:l.name,parentId:l.parentId||null,slug:l.slug||l.name.toLowerCase().replace(/\s+/g,"-"),imageUrl:l.imageUrl||""};n(b)}i(null),m({})}catch(b){alert(b.message||"Помилка при збереженні категорії")}},T=()=>{i(null),m({})},Z=b=>{w($=>{const q=new Set($);return q.has(b)?q.delete(b):q.add(b),q})},L=b=>s.some($=>$.parentId===b),P=b=>{if(!b)return"Коренева категорія";const $=s.find(q=>q.id===b);return $?$.name:"Невідома категорія"},U=(b=null,$=0)=>{const q=s.filter(O=>O.parentId===b);return q.length?q.map(O=>{const W=_.has(O.id),xe=L(O.id);return e.jsx("div",{className:x.categoryItem,style:{marginLeft:`${$*20}px`},children:h===O.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування категорії:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва категорії"}),e.jsx(j,{value:l.name||"",onChange:te=>m({...l,name:te.target.value})})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(j,{value:l.slug||"",onChange:te=>m({...l,slug:te.target.value}),required:!0,placeholder:"Введіть slug"})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:l.imageUrl||"",onChange:te=>m({...l,imageUrl:te.target.value})})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:N,className:x.btn,children:[e.jsx(us,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:T,className:x.btn,children:[e.jsx(hs,{size:16})," Скасувати"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.categoryDisplay,children:[e.jsxs("div",{className:x.categoryLeft,children:[e.jsx("div",{className:x.expandButton,children:xe?e.jsx("button",{onClick:()=>Z(O.id),className:x.toggleBtn,children:W?e.jsx(ms,{size:16}):e.jsx(ps,{size:16})}):e.jsx("div",{className:x.spacer})}),e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(We,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:O.name}),O.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",O.slug]}),O.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",O.imageUrl]}),O.parentId&&e.jsxs("span",{className:x.parentInfo,children:["в категорії: ",P(O.parentId)]})]})]})]}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>B(O),className:x.btn,children:e.jsx(gs,{size:16})}),e.jsx("button",{onClick:()=>v(O.id),className:x.btn,children:e.jsx(xs,{size:16})})]})]}),xe&&W&&e.jsx("div",{className:x.children,children:U(O.id,$+1)})]})},O.id)}):null};return t?e.jsx("div",{children:"Завантаження категорій..."}):r?e.jsxs("div",{children:["Помилка: ",r]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління категоріями"}),e.jsxs("button",{onClick:()=>g(!u),className:x.btn,children:[e.jsx(ls,{size:16})," Додати категорію"]})]}),u&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову категорію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва категорії *"}),e.jsx(j,{value:p.name||"",onChange:b=>f($=>({...$,name:b.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug"}),e.jsx(j,{value:p.slug||"",onChange:b=>f($=>({...$,slug:b.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:p.imageUrl||"",onChange:b=>f($=>({...$,imageUrl:b.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Батьківська категорія"}),e.jsxs("select",{value:p.parentId||"",onChange:b=>f($=>({...$,parentId:b.target.value?Number(b.target.value):null})),children:[e.jsx("option",{value:"",children:"Коренева категорія"}),s.map(b=>e.jsxs("option",{value:b.id,children:[b.parentId?`${P(b.parentId)} → `:"",b.name]},b.id))]})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:A,className:x.btn,children:[e.jsx(ds,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>g(!1),className:x.btn,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.categoriesSection,children:[e.jsx("h3",{children:"Список категорій"}),s.length===0?e.jsx("p",{children:"Категорії відсутні"}):U()]})]})},Ie="/collections",Ee={async getAll(){return(await S.get(Ie)).data},async getOne(s){return(await S.get(`${Ie}/${s}`)).data},async create(s){return(await S.post(Ie,s)).data},async remove(s){await S.delete(`${Ie}/${s}`)},async update(s,t){return(await S.patch(`${Ie}/${s}`,t)).data}},Ve=de(s=>({collections:[],loading:!1,error:null,fetchCollections:async()=>{s({loading:!0,error:null});try{const t=await Ee.getAll();s({collections:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження колекцій",loading:!1})}},addCollection:t=>s(r=>({collections:[...r.collections,t]})),updateCollection:async(t,r)=>{try{const a=await Ee.update(t,r);if(!a)throw new Error("Категорія не була оновлена");return s(n=>({collections:n.collections.map(c=>(c.id===t,c))})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},removeCollection:t=>s(r=>({collections:r.collections.filter(a=>a.id!==t)}))})),Gt=()=>{const{collections:s,loading:t,error:r,fetchCollections:a,addCollection:n,removeCollection:c}=Ve(),[o,h]=d.useState(null),[i,l]=d.useState({}),[m,p]=d.useState({name:"",slug:"",imageUrl:""}),[f,u]=d.useState(!1);d.useEffect(()=>{a()},[a]);const g=async()=>{if(!m.name?.trim()){alert("Введіть назву колекції");return}try{const N={...m,slug:m.slug||m.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")},T=await Ee.create(N);n(T),p({name:"",slug:"",imageUrl:""}),u(!1)}catch(N){alert(N.message||"Помилка при створенні колекції")}},_=async N=>{if(confirm("Ви дійсно хочете видалити колекцію?"))try{await Ee.remove(N),c(N)}catch(T){alert(T.message||"Помилка при видаленні колекції")}},w=N=>{h(N.id),l({name:N.name,slug:N.slug,imageUrl:N.imageUrl||""})},A=async()=>{if(!(!o||!i.name?.trim()))try{const N=await Ee.update(o,i);c(o),n(N),h(null),l({})}catch(N){alert(N.message||"Помилка при оновленні колекції")}},v=()=>{h(null),l({})},B=()=>s.length===0?null:s.map(N=>e.jsx("div",{className:x.collectionItem,children:o===N.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування колекції:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва колекції"}),e.jsx(j,{value:i.name||"",onChange:T=>l({...i,name:T.target.value}),placeholder:"Назва колекції",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(j,{value:i.slug||"",onChange:T=>l({...i,slug:T.target.value}),placeholder:"URL slug",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:i.imageUrl||"",onChange:T=>l({...i,imageUrl:T.target.value}),placeholder:"URL зображення",className:x.editInput})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:A,className:`${x.btn} ${x.btnSave}`,children:[e.jsx(us,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:v,className:`${x.btn} ${x.btnCancel}`,children:[e.jsx(hs,{size:16})," Скасувати"]})]})]}):e.jsxs("div",{className:x.categoryDisplay,children:[e.jsx("div",{className:x.categoryLeft,children:e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(We,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:N.name}),N.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",N.slug]}),N.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",N.imageUrl]})]})]})}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>w(N),className:`${x.btn} ${x.btnEdit}`,title:"Редагувати",children:e.jsx(gs,{size:16})}),e.jsx("button",{onClick:()=>_(N.id),className:`${x.btn} ${x.btnDelete}`,title:"Видалити",children:e.jsx(xs,{size:16})})]})]})},N.id));return t?e.jsx("div",{className:x.loading,children:"Завантаження колекцій..."}):r?e.jsxs("div",{className:x.error,children:["Помилка: ",r]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління колекціями"}),e.jsxs("button",{onClick:()=>u(!f),className:`${x.btn} ${x.btnPrimary}`,children:[e.jsx(ls,{size:16})," Додати колекцію"]})]}),f&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову колекцію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва колекції *"}),e.jsx(j,{value:m.name||"",onChange:N=>p(T=>({...T,name:N.target.value})),placeholder:"Введіть назву колекції",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug (URL-адреса)"}),e.jsx(j,{value:m.slug||"",onChange:N=>p(T=>({...T,slug:N.target.value})),placeholder:"auto-generated або введіть власний",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:m.imageUrl||"",onChange:N=>p(T=>({...T,imageUrl:N.target.value})),placeholder:"URL зображення",className:x.formInput})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:g,className:`${x.btn} ${x.btnSuccess}`,children:[e.jsx(ds,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>u(!1),className:`${x.btn} ${x.btnSecondary}`,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.collectionsSection,children:[e.jsxs("div",{className:x.sectionHeader,children:[e.jsx("h3",{children:"Список колекцій"}),e.jsxs("div",{className:x.collectionCount,children:["Всього: ",s.length," колекцій"]})]}),s.length===0?e.jsxs("div",{className:x.emptyState,children:[e.jsx(We,{size:48,className:x.emptyIcon}),e.jsx("p",{children:"Колекції відсутні"}),e.jsx("p",{children:"Створіть першу колекцію для початку роботи"})]}):e.jsx("div",{className:x.collectionsList,children:B()})]})]})},Vt="_createProduct_1sk0j_2",Ht="_form_1sk0j_22",Jt="_field_1sk0j_28",Kt="_group_1sk0j_33",Xt="_btn_1sk0j_51",Yt="_submit_1sk0j_80",Qt="_checkboxGroup_1sk0j_94",Zt="_checkboxLabel_1sk0j_100",er="_variantBlock_1sk0j_140",F={createProduct:Vt,form:Ht,field:Jt,group:Kt,btn:Xt,submit:Yt,checkboxGroup:Qt,checkboxLabel:Zt,variantBlock:er,delete:"_delete_1sk0j_144"},vs=["XS","S","M","L","XL","XXL"],He=["RED","GREEN","BLUE","BLACK","WHITE","YELLOW","ORANGE","PURPLE","PINK","GREY","BROWN"],qe={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL"},Ns={RED:"Red",GREEN:"Green",BLUE:"Blue",BLACK:"Black",WHITE:"White",YELLOW:"Yellow",ORANGE:"Orange",PURPLE:"Purple",PINK:"Pink",GREY:"Grey",BROWN:"Brown"},Ss={RED:"#b34a4a",GREEN:"#4a7c59",BLUE:"#527fb3",BLACK:"#1e1e1e",WHITE:"#f5f5f5",YELLOW:"#d4c35b",ORANGE:"#d87a4a",PURPLE:"#6a4a7c",PINK:"#ff99bb",GREY:"#808080",BROWN:"#8b5e3c"},sr="_select_18v07_35",tr="_caruselBox_18v07_55",rr="_wrapper_18v07_74",ar="_categoryBox_18v07_78",nr="_imgBox_18v07_99",Pe={select:sr,caruselBox:tr,wrapper:rr,categoryBox:ar,imgBox:nr};function Je({value:s,onChange:t,includeEmpty:r=!0,valueKey:a="id"}){const{categories:n}=Ue(),c=(o=null,h=0)=>n.filter(i=>i.parentId===o).map(i=>e.jsxs(ve.Fragment,{children:[e.jsxs("option",{value:a==="slug"?i.slug:i.id,children:["— ".repeat(h),i.name]}),c(i.id,h+1)]},i.id));return e.jsxs("select",{value:s??"",onChange:o=>t(a==="id"?Number(o.target.value):o.target.value),className:Pe.select,children:[r&&e.jsx("option",{value:"",children:"Виберіть категорію"}),c(null,0)]})}const cr="_select_1ag6g_1",or={select:cr};function Ke({value:s,onChange:t,multiple:r=!1,valueKey:a="id"}){const{collections:n,loading:c}=Ve();return c?e.jsx("p",{children:"Завантаження..."}):e.jsxs("select",{multiple:r,value:s??"",onChange:o=>{if(r){const h=Array.from(o.target.selectedOptions,i=>a==="id"?Number(i.value):i.value);t(h)}else{const h=a==="id"?Number(o.target.value):o.target.value;t(h)}},className:or.select,children:[!r&&e.jsx("option",{value:"",children:"Виберіть колекцію"}),n.map(o=>e.jsx("option",{value:a==="slug"?o.slug:o.id,children:o.name},o.id))]})}const Cs=({onUpload:s})=>{const t=async r=>{const a=r.target.files?.[0];if(!a)return;const n=new FormData;n.append("file",a),n.append("upload_preset","FBEimg");try{const o=await(await fetch("https://api.cloudinary.com/v1_1/divhalkcr/image/upload",{method:"POST",body:n})).json();o.secure_url?s(o.secure_url):console.error("Upload failed:",o)}catch(c){console.error("Error uploading image:",c)}};return e.jsx(j,{type:"file",accept:"image/*",onChange:t})},ir="_button_b2icf_1",lr="_primary_b2icf_15",dr="_secondary_b2icf_23",ur="_small_b2icf_31",hr="_danger_b2icf_37",mr="_link_b2icf_45",pr="_disabled_b2icf_53",gr="_loader_b2icf_58",xr="_spin_b2icf_1",Be={button:ir,primary:lr,secondary:dr,small:ur,danger:hr,link:mr,disabled:pr,loader:gr,spin:xr},C=d.forwardRef(({type:s="button",onClick:t,disabled:r=!1,loading:a=!1,variant:n="primary",children:c,className:o,style:h,title:i,...l},m)=>e.jsxs("button",{ref:m,type:s,onClick:t,disabled:r||a,style:h,title:i,className:fs(Be.button,Be[n],{[Be.disabled]:r||a},o),...l,children:[a&&e.jsx("span",{className:Be.loader}),i||c]}));C.displayName="Button";const fr="_imagesBlock_1y6ls_2",jr="_newphoto_1y6ls_9",_r="_photoBox_1y6ls_15",Te={imagesBlock:fr,newphoto:jr,photoBox:_r},yr=({control:s,register:t,setValue:r,watch:a,variantIndex:n})=>{const{fields:c,append:o,remove:h}=le({control:s,name:`variants.${n}.images`}),[i,l]=d.useState("");return e.jsxs("div",{className:Te.imagesBlock,children:[e.jsx("h5",{children:"Images"}),c.map((m,p)=>{const f=a(`variants.${n}.images.${p}.url`);return e.jsxs("div",{style:{margin:"1rem"},children:[e.jsx(j,{placeholder:"опис фото",style:{margin:"0.5rem"},...t(`variants.${n}.images.${p}.altText`)}),e.jsx(Cs,{onUpload:u=>r(`variants.${n}.images.${p}.url`,u)}),e.jsxs("div",{style:{display:"flex",marginTop:"0.5rem",gap:"0.5rem"},children:[e.jsx(j,{type:"text",placeholder:"Встав URL вручну",value:i,onChange:u=>l(u.target.value),id:"urlhandle"}),e.jsx(C,{type:"button",onClick:()=>{i.trim()&&(r(`variants.${n}.images.${p}.url`,i.trim()),l(""))},children:"Завантажити фото"})]}),f&&e.jsx("img",{src:f,alt:"preview",style:{width:100,height:"auto",marginTop:"0.5rem"}}),e.jsx("button",{type:"button",onClick:()=>h(p),children:"✕ Видалити фото"})]},m.id)}),e.jsx(C,{type:"button",onClick:()=>o({url:"",altText:""}),children:"+ Add Image"})]})},br=()=>{const{register:s,control:t,handleSubmit:r,reset:a,setValue:n,watch:c}=ue({defaultValues:{sku:"",price:0,priceSale:null,categoryId:void 0,collectionId:1,translations:[{name:"",description:"",languageId:1}],features:[{text:"",order:1}],variants:[]}}),o=le({control:t,name:"translations"}),h=le({control:t,name:"features"}),i=le({control:t,name:"variants"}),l=c("price"),m=c("priceSale"),p=async u=>{try{const g={...u,collectionId:Number(u.collectionId),variants:u.variants.map(w=>({...w,productId:1}))},_=await ie.addProduct(g);a(),alert(`Товар додано - ${_.translations[0].name}`)}catch(g){console.error("Помилка при створенні продукту:",g)}},f=()=>{i.append({color:"BLACK",sizes:[],price:l||0,priceSale:m||0,stock:0,images:[{url:"",altText:""}],description:""})};return e.jsxs("div",{className:F.createProduct,children:[e.jsx("h1",{children:"Create Product"}),e.jsxs("form",{onSubmit:r(p),className:F.form,children:[e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"SKU * номер товару, ідентифікатор "}),e.jsx("input",{...s("sku",{required:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Base Price *"}),e.jsx(j,{type:"number",step:"1",min:"1",...s("price",{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Base Sale Price"}),e.jsx("input",{type:"number",step:"1",min:"1",...s("priceSale",{valueAsNumber:!0})})]}),e.jsx("h3",{children:"Назва та опис  товару"}),o.fields.map((u,g)=>e.jsxs("div",{className:F.group,children:[e.jsx("input",{placeholder:"Name",...s(`translations.${g}.name`)}),e.jsx("input",{placeholder:"Description",...s(`translations.${g}.description`)}),e.jsx(j,{type:"number",placeholder:"Language ID",label:"language: UA",disabled:!0,...s(`translations.${g}.languageId`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>o.remove(g),children:"✕"})]},u.id)),e.jsx(C,{type:"button",className:F.btn,disabled:!0,onClick:()=>o.append({name:"",description:"",languageId:1}),children:"+ Add Translation"}),e.jsx("h3",{children:"Властивості товару"}),h.fields.map((u,g)=>e.jsxs("div",{className:F.group,children:[e.jsx(j,{placeholder:"приклад: Тканина: кашемір",...s(`features.${g}.text`)}),e.jsx(j,{type:"number",placeholder:"Order",min:"1",...s(`features.${g}.order`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>h.remove(g),children:"✕"})]},u.id)),e.jsx(C,{type:"button",onClick:()=>h.append({text:"",order:h.fields.length+1}),className:F.btn,children:"+ Додати властивість"}),e.jsx("h3",{children:"Variants"}),i.fields.map((u,g)=>e.jsxs("div",{className:F.variantBlock,children:[e.jsxs("h4",{children:["Variant ",g+1]}),e.jsx("input",{type:"hidden",...s(`variants.${g}.productId`)}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...s(`variants.${g}.color`),children:Object.values(He).map(_=>e.jsx("option",{value:_,children:Ns[_]},_))})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:F.checkboxGroup,children:Object.values(vs).map(_=>e.jsxs("label",{className:F.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:_,...s(`variants.${g}.sizes`)}),qe[_]]},_))})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Price *"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${g}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${g}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Stock"}),e.jsx("input",{type:"number",...s(`variants.${g}.stock`,{valueAsNumber:!0})})]}),e.jsx("div",{className:F.field,children:e.jsx(j,{type:"text",...s(`variants.${g}.description`),label:"Description"})}),e.jsx(yr,{control:t,register:s,setValue:n,watch:c,variantIndex:g}),e.jsx(C,{type:"button",onClick:()=>i.remove(g),className:F.delete,children:"✕ Remove Variant"})]},u.id)),e.jsx(C,{type:"button",onClick:f,className:F.btn,children:"+ Add Variant"}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Category"}),e.jsx(Je,{value:c("categoryId"),onChange:u=>n("categoryId",u),valueKey:"id"})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Collections"}),e.jsx(Ke,{value:c("collectionId"),onChange:u=>n("collectionId",Number(u)),valueKey:"id"})]}),e.jsx("button",{type:"submit",className:`${F.submit} ${F.btn}`,children:"Create Product"})]})]})},vr="_card_190q6_2",Nr="_imageWrapper_190q6_11",Sr="_name_190q6_28",Cr="_price_190q6_35",wr="_priceSale_190q6_40",kr="_priceOriginal_190q6_44",Ir="_features_190q6_49",$r="_colorDots_190q6_59",Pr="_colorDot_190q6_59",Lr="_mainFont_190q6_146",Y={card:vr,imageWrapper:Nr,name:Sr,price:Cr,priceSale:wr,priceOriginal:kr,features:Ir,colorDots:$r,colorDot:Pr,mainFont:Lr},Xe=({product:s,isMainPage:t})=>{const{id:r,translations:a,variants:n,price:c,priceSale:o}=s,h=a&&a.length>0?a[0].name:"Назва відсутня",l=n?.[0]?.images?.[0],m=Array.from(new Set(n?.flatMap(v=>v.sizes)||[])),p=Array.from(new Set(n?.map(v=>v.color)||[])),f=n?.map(v=>v.price).filter(v=>v!=null)||[],u=n?.map(v=>v.priceSale).filter(v=>v!=null)||[],g=f.length>0?Math.min(...f):void 0,_=u.length>0?Math.min(...u):void 0,w=c??g,A=o??_;return e.jsxs("div",{className:Y.card,children:[e.jsx(X,{to:`/product/${r}`,className:Y.imageWrapper,rel:"canonical",children:l?e.jsx("img",{src:l.url,alt:l.altText||h}):e.jsx("div",{className:Y.noImage,children:"Фото відсутнє"})}),e.jsx("p",{className:`${Y.name} ${t?Y.mainFont:""}`,children:e.jsx(X,{to:`/product/${r}`,children:h})}),e.jsx("p",{className:`${Y.price} ${t?Y.mainFont:""}`,children:w?A&&A<w?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:t?"":Y.priceSale,children:["₴",A.toFixed(2)," "]}),e.jsxs("span",{className:Y.priceOriginal,children:["₴",w.toFixed(2)]})]}):e.jsxs("span",{children:["₴",w.toFixed(2)]}):"Ціна відсутня"}),e.jsxs("div",{className:Y.features,children:[t?"":m.length>0?m.map(v=>qe[v]).join(", "):"Немає",!t&&e.jsx("br",{}),p.length>0?e.jsx("div",{className:Y.colorDots,children:p.map(v=>e.jsx("span",{className:Y.colorDot,style:{backgroundColor:Ss[v]||"#ccc"},title:v},v))}):"Немає"]})]})},Er="_dashboard_h1tsi_3",Br="_filters_h1tsi_9",Tr="_cardsList_h1tsi_22",Or="_cardWrapper_h1tsi_31",Ar="_loadMore_h1tsi_59",Rr="_deleteButton_h1tsi_90",Fr="_loadMoreButton_h1tsi_99",ee={dashboard:Er,filters:Br,cardsList:Tr,cardWrapper:Or,loadMore:Ar,deleteButton:Rr,loadMoreButton:Fr},es=()=>{const s=Se(),{products:t,fetchProducts:r,appendProducts:a,deleteProduct:n}=ze(),[c,o]=d.useState(""),[h,i]=d.useState(""),[l,m]=d.useState(0),[p,f]=d.useState(!1);d.useEffect(()=>{(async()=>{f(!0);const w={limit:10,skip:l*10,categorySlug:c||void 0,collectionSlug:h||void 0};l===0?await r(w):await a(w),f(!1)})()},[l,c,h,r,a]);const u=_=>{window.confirm(`Видалити продукт ${_.translations?.[0]?.name}?`)&&n(_.id)},g=()=>{m(0)};return e.jsxs("div",{className:ee.dashboard,children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("div",{className:ee.filters,children:[e.jsx(Je,{value:c,onChange:_=>{o(_),g()},valueKey:"slug"}),e.jsx(Ke,{value:h,onChange:_=>{i(_),g()},valueKey:"slug",multiple:!1})]}),e.jsxs("p",{children:["Всього продуктів: ",t.length]}),p&&e.jsx("p",{children:"Завантаження..."}),e.jsx("ul",{className:ee.cardsList,children:t.map(_=>e.jsxs("div",{className:ee.cardWrapper,children:[e.jsx(Xe,{product:_}),e.jsx(C,{className:`${ee.deleteButton} ${ee.button}`,onClick:()=>u(_),children:"Видалити"}),e.jsx(C,{className:` ${ee.button}`,onClick:()=>s(`/admin/edit-product/${_.id}`),children:"Редагувати"})]},_.id))}),e.jsx("div",{className:ee.loadMore,children:e.jsx(C,{className:`${ee.loadMoreButton} ${ee.button}`,onClick:()=>m(_=>_+1),disabled:p,children:"Завантажити ще"})})]})},zr="_editProduct_1f234_1",Ur="_form_1f234_13",qr="_field_1f234_35",Mr="_group_1f234_65",Dr="_inputText_1f234_73",Wr="_variantBlock_1f234_90",Gr="_checkboxGroup_1f234_107",Vr="_checkboxLabel_1f234_114",Hr="_btn_1f234_130",Jr="_submit_1f234_156",Kr="_loading_1f234_188",Xr="_error_1f234_197",Yr="_changesIndicator_1f234_249",Qr="_chooseBox_1f234_253",E={editProduct:zr,form:Ur,field:qr,group:Mr,inputText:Dr,variantBlock:Wr,checkboxGroup:Gr,checkboxLabel:Vr,btn:Hr,submit:Jr,delete:"_delete_1f234_179",loading:Kr,error:Xr,changesIndicator:Yr,chooseBox:Qr},Zr=({control:s,register:t,setValue:r,watch:a,variantIndex:n})=>{const{fields:c,append:o,remove:h}=le({control:s,name:`variants.${n}.images`}),[i,l]=d.useState("");return e.jsxs("div",{className:Te.imagesBlock,children:[e.jsx("h5",{children:"Images"}),c.map((m,p)=>{const f=a(`variants.${n}.images.${p}.url`);return e.jsx("div",{style:{margin:"1rem"},children:f?e.jsxs("div",{className:Te.photoBox,children:[e.jsx("img",{src:f,alt:a(`variants.${n}.images.${p}.altText`)||"preview"}),e.jsx(C,{type:"button",onClick:()=>h(p),variant:"small",children:"✕ Видалити фото"})]}):e.jsxs("div",{className:Te.newphoto,children:[e.jsx(j,{placeholder:"опис фото",style:{marginBottom:"0.5rem"},...t(`variants.${n}.images.${p}.altText`)}),e.jsx(Cs,{onUpload:u=>r(`variants.${n}.images.${p}.url`,u)}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx(j,{type:"text",placeholder:"Встав URL вручну",value:i,onChange:u=>l(u.target.value)}),e.jsx(C,{type:"button",onClick:()=>{i.trim()&&(r(`variants.${n}.images.${p}.url`,i.trim()),l(""))},children:"Завантажити фото"})]}),e.jsx(C,{type:"button",onClick:()=>h(p),style:{marginTop:"0.5rem"},variant:"small",children:"✕ Видалити фото"})]})},m.id)}),e.jsx(C,{type:"button",onClick:()=>o({url:"",altText:""}),children:"+ Add Image"})]})};function ye(s,t){if(s===t)return!0;if(s==null||t==null)return!1;if(Array.isArray(s)&&Array.isArray(t))return s.length===t.length&&s.every((r,a)=>ye(r,t[a]));if(typeof s=="object"&&typeof t=="object"){const r=Object.keys(s),a=Object.keys(t);return r.length===a.length&&r.every(n=>a.includes(n)&&ye(s[n],t[n]))}return!1}function ss(s,t){const r={};return["sku","price","priceSale","categoryId","collectionId"].forEach(n=>{const c=t[n];ye(s[n],c)||(r[n]=c??void 0)}),ye(s.translations,t.translations)||(r.translations=t.translations?.map(n=>({name:n.name,description:n.description??void 0,languageId:n.languageId}))),ye(s.features,t.features)||(r.features=t.features?.map(n=>({text:n.text,order:n.order}))),ye(s.variants,t.variants)||(r.variants=t.variants?.map(n=>({color:n.color,sizes:n.sizes,price:n.price,priceSale:n.priceSale??void 0,stock:n.stock,description:n.description??void 0,images:n.images?.map(c=>({url:c.url,altText:c.altText??void 0}))}))),r}const ea=()=>{const{id:s}=Fe(),[t,r]=d.useState(!0),[a,n]=d.useState(null),[c,o]=d.useState(!1),h=d.useRef(null),{editProduct:i,isLoading:l}=ze(),{register:m,control:p,handleSubmit:f,reset:u,setValue:g,watch:_}=ue({defaultValues:{id:0,sku:"",price:0,priceSale:void 0,categoryId:void 0,collectionId:void 0,translations:[{name:"",description:void 0,languageId:1}],features:[],variants:[]}}),w=le({control:p,name:"translations"}),A=le({control:p,name:"features"}),v=le({control:p,name:"variants"}),B=_();d.useEffect(()=>{if(h.current&&B){const L=ss(h.current,B);o(Object.keys(L).length>0)}},[B]),d.useEffect(()=>{async function L(){if(!s){n("ID продукту не знайдено"),r(!1);return}try{r(!0);const P=await ie.getById(Number(s));h.current=JSON.parse(JSON.stringify(P)),u(P)}catch(P){console.error(P),n("Не вдалося завантажити продукт")}finally{r(!1)}}L()},[s,u]);const N=async L=>{if(!s||!h.current)return;const P=ss(h.current,L);if(Object.keys(P).length===0){alert("Немає змін для збереження");return}try{await i(Number(s),P),h.current=JSON.parse(JSON.stringify(L)),o(!1),alert(`Продукт оновлено: ${Object.keys(P).join(", ")}`)}catch(U){console.error(U),alert("Помилка при оновленні продукту")}},T=()=>{v.append({color:"BLACK",sizes:[],price:B.price??0,priceSale:B.priceSale??void 0,stock:0,description:"",images:[{url:"",altText:void 0}]})},Z=()=>{h.current&&(u(h.current),o(!1))};return t||l?e.jsx("div",{className:E.loading,children:"Завантаження..."}):a?e.jsx("div",{className:E.error,children:a}):e.jsxs("div",{className:E.editProduct,children:[e.jsxs("div",{className:E.header,children:[e.jsxs("h1",{children:["Edit Product #",s]}),c&&e.jsxs("div",{className:E.changesIndicator,children:[e.jsx("span",{children:"• Є незбережені зміни"}),e.jsx(C,{type:"button",onClick:Z,className:E.resetBtn,children:"Скинути зміни"})]})]}),e.jsxs("form",{onSubmit:f(N),className:E.form,children:[e.jsx("div",{className:E.field,children:e.jsx(j,{...m("sku",{required:!0}),placeholder:"SKU"})}),e.jsx("div",{className:E.field,children:e.jsx(j,{type:"number",...m("price",{required:!0,valueAsNumber:!0}),placeholder:"Price"})}),e.jsx("div",{className:E.field,children:e.jsx(j,{type:"number",...m("priceSale",{valueAsNumber:!0}),placeholder:"Sale Price"})}),e.jsxs("div",{className:E.chooseBox,children:[e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Category"}),e.jsx(Je,{value:_("categoryId"),onChange:L=>g("categoryId",L),valueKey:"id"})]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Collection"}),e.jsx(Ke,{value:_("collectionId"),onChange:L=>g("collectionId",Number(L)),valueKey:"id"})]})]}),e.jsx("h3",{children:"Назва і опис товару"}),w.fields.map((L,P)=>e.jsxs("div",{className:E.group,children:[e.jsx(j,{placeholder:"Name",...m(`translations.${P}.name`)}),e.jsx(j,{placeholder:"Description",...m(`translations.${P}.description`)}),e.jsx(j,{type:"number",label:"Language: UA",disabled:!0,...m(`translations.${P}.languageId`)})]},L.id)),e.jsx("h3",{children:"Властивості товару"}),A.fields.map((L,P)=>e.jsxs("div",{className:E.group,children:[e.jsx(j,{placeholder:"Text",...m(`features.${P}.text`),className:E.inputText,title:_(`features.${P}.text`)||""}),e.jsx(j,{type:"number",placeholder:"Order",...m(`features.${P}.order`,{valueAsNumber:!0})})]},L.id)),e.jsx(C,{type:"button",onClick:()=>A.append({text:"",order:A.fields.length+1}),className:E.btn,children:"+ Add Feature"}),e.jsx("h3",{children:"Variants"}),v.fields.map((L,P)=>e.jsxs("div",{className:E.variantBlock,children:[e.jsxs("h4",{children:["Variant ",P+1]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...m(`variants.${P}.color`),children:Object.values(He).map(U=>e.jsx("option",{value:U,children:Ns[U]},U))})]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:E.checkboxGroup,children:Object.values(vs).map(U=>e.jsxs("label",{className:E.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:U,...m(`variants.${P}.sizes`)}),qe[U]]},U))})]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Price *"}),e.jsx(j,{type:"number",...m(`variants.${P}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx(j,{type:"number",...m(`variants.${P}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Stock"}),e.jsx(j,{type:"number",...m(`variants.${P}.stock`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:E.field,children:[e.jsx("label",{children:"Description"}),e.jsx(j,{placeholder:"Variant description",...m(`variants.${P}.description`)})]}),e.jsx(Zr,{control:p,register:m,setValue:g,watch:_,variantIndex:P}),e.jsx(C,{type:"button",onClick:()=>v.remove(P),className:E.delete,children:"✕ Remove Variant"})]},L.id)),e.jsx(C,{type:"button",onClick:T,children:" Variant"}),e.jsxs("div",{className:E.formActions,children:[e.jsx("button",{type:"submit",className:`${E.submit} ${E.btn}`,disabled:!c,children:c?"Зберегти зміни":"Немає змін"}),c&&e.jsx(C,{type:"button",onClick:Z,className:E.cancelBtn,children:"Скинути"})]})]})]})},sa=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=ue(),a=Se(),n=async o=>{try{await he.forgotPassword(o),alert("Для відновлення паролю перейдіть у поштову скриньку"),a("/")}catch(h){alert(h.response?.data?.message||"Не вдалося відправити лист")}},c=o=>{n(o.email)};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h2",{className:"title",children:"Відновлення пароля"}),e.jsxs("form",{onSubmit:t(c),className:"form",children:[e.jsx(j,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),r.email&&e.jsx("p",{className:"error",children:r.email.message}),e.jsx(C,{type:"submit",children:"Надіслати посилання"})]})]})},ta="_loginContainer_1bxwe_1",ra="_title_1bxwe_12",aa="_form_1bxwe_18",na="_registerPrompt_1bxwe_54",me={loginContainer:ta,title:ra,form:aa,registerPrompt:na},ca=()=>{const{user:s}=z(),[t,r]=d.useState({email:"",password:""}),[a,n]=d.useState(null),c=Se();d.useEffect(()=>{s&&c("/")},[s,c]);const o=i=>{const{name:l,value:m}=i.target;r(p=>({...p,[l]:m})),a&&n(null)},h=async i=>{if(i.preventDefault(),!t.email||!t.password){n("Будь ласка, заповніть всі поля");return}if(!t.email.includes("@")){n("Введіть коректний email");return}n(null);try{console.log("LoginForm: Starting login process for:",t.email),await he.login(t),console.log("LoginForm: Login successful, redirecting..."),c("/")}catch(l){console.error("LoginForm: Login failed:",l),console.error("LoginForm: Error details:",{type:typeof l,constructor:l?.constructor?.name,message:l instanceof Error?l.message:l,string:String(l)});let m="Помилка входу. Спробуйте ще раз.";if(l instanceof Error)m=l.message;else if(typeof l=="string")m=l;else if(l&&typeof l=="object")if("message"in l&&typeof l.message=="string")m=l.message;else if("error"in l&&typeof l.error=="string")m=l.error;else try{const p=JSON.stringify(l);p&&p!=="{}"&&p!=="[object Object]"&&(m=p)}catch(p){console.error("Failed to stringify error:",p)}console.log("LoginForm: Final error message:",m),n(m)}};return e.jsxs("div",{className:fs(me.loginContainer),children:[e.jsx("h1",{className:me.title,children:"Вхід"}),e.jsxs("form",{onSubmit:h,className:me.form,children:[e.jsx(j,{label:"Email",name:"email",type:"email",placeholder:"Введіть ваш email",value:t.email,onChange:o,required:!0}),e.jsx(j,{label:"Пароль",name:"password",type:"password",placeholder:"Введіть ваш пароль",value:t.password,onChange:o,required:!0}),a&&e.jsx("div",{className:me.errorContainer,children:e.jsx("p",{className:me.error,children:a})}),e.jsx(C,{type:"submit",disabled:!t.email||!t.password,className:"",children:"Увійти"}),e.jsx("p",{className:me.registerPrompt,children:e.jsx(X,{to:"/forgot-password",children:"Забули пароль"})}),e.jsxs("p",{className:me.registerPrompt,children:["Немає аккаунта? ",e.jsx(X,{to:"/register",children:"Зареєструйтесь тут"})]})]})]})},oa=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=ue(),[a]=Bs(),n=Se(),c=a.get("code"),o=a.get("email"),h=i=>{if(!c||!o){alert("Посилання недійсне або відсутні дані");return}try{he.resetPassword(o,c,i.newPassword),alert("Дані oновлено"),n("/login")}catch(l){alert(l.response?.data?.message||"Не вдалося відновити дані")}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Скидання пароля"}),e.jsxs("form",{onSubmit:t(h),className:"form",children:[e.jsx(j,{type:"password",placeholder:"Новий пароль *",...s("newPassword",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),r.newPassword&&e.jsx("p",{className:"error",children:r.newPassword.message}),e.jsx(C,{type:"submit",children:"Змінити пароль"})]})]})},ia="_delivery_1u3z3_1",la="_section_1u3z3_14",da="_warning_1u3z3_27",ua="_list_1u3z3_34",ha="_freeShipping_1u3z3_41",ma="_payment_1u3z3_45",re={delivery:ia,section:la,warning:da,list:ua,freeShipping:ha,payment:ma},pa=()=>e.jsx("div",{className:"page",children:e.jsxs("div",{className:re.delivery,children:[e.jsx("h1",{children:"ДОСТАВКА ТА ПОВЕРНЕННЯ"}),e.jsxs("section",{className:re.section,children:[e.jsx("h2",{children:"УМОВИ ДОСТАВКИ"}),e.jsx("p",{className:re.warning,children:"ВАЖЛИВЕ ПОВІДОМЛЕННЯ – ВІЙНА В УКРАЇНІ: Через війну можливі невеликі затримки. Після відправки ваше замовлення прибуде протягом 2-6 робочих днів."}),e.jsxs("ul",{className:re.list,children:[e.jsx("li",{children:"Замовлення по Україні відправляються «Новою Поштою» (2-3 робочих дні)"}),e.jsx("li",{children:"Замовлення по Польщі відправляємо «Нова пошта» (3-5 робочих дні)"}),e.jsx("li",{children:"Замовлення по США та Канаді відправляються «Пошта Канади» (1-3 робочих дні)"}),e.jsx("li",{children:"Міжнародна доставка Meest Express (10-12 робочих днів)"})]}),e.jsx("p",{className:re.freeShipping,children:"БЕЗКОШТОВНА ЕКСПРЕС-доставка замовлень на суму понад 300$"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Зверніть увагу:"})," ми не доставляємо товари в Росію та Білорусь."]})]}),e.jsxs("section",{className:re.section,children:[e.jsx("h2",{children:"ВІДСТЕЖУЙТЕ СВОЄ ЗАМОВЛЕННЯ"}),e.jsx("p",{children:"Щойно ваше замовлення буде відправлено, ви отримаєте електронний лист із інформацією про відстеження. Усі деталі відстеження є в електронному листі."}),e.jsxs("p",{children:["Мита та податки: можуть стягуватися митні збори та/або ПДВ.",e.jsx("br",{}),e.jsx("strong",{children:"FBE"})," не несе відповідальності за митні або місцеві податки."]})]}),e.jsxs("section",{className:re.section,children:[e.jsx("h2",{children:"ПОВЕРНЕННЯ"}),e.jsx("p",{children:"Купальники поверненню та обміну не підлягають."})]}),e.jsxs("section",{className:re.section,children:[e.jsx("h2",{children:"ОПЛАТА"}),e.jsxs("div",{className:re.payment,children:[e.jsx("h3",{children:"Рахунок на оплату"}),e.jsx("p",{children:"Після оформлення замовлення ми надішлемо вам рахунок на електронну пошту або у месенджер. Ви зможете оплатити замовлення зручним способом. Після оплати отримаєте підтвердження та деталі доставки."}),e.jsx("h3",{children:"Передоплата"}),e.jsxs("p",{children:["Для замовлень, де потрібна передоплата, необхідно внести ",e.jsx("strong",{children:"200₴"}),". Ця сума гарантує резервування товару."]}),e.jsx("h3",{children:"Післяплата / оплата повної суми"}),e.jsx("p",{children:"Якщо товар оплачується повністю після отримання рахунку, оплатіть зазначену суму згідно з інструкціями. Після отримання платежу ми відправимо ваше замовлення."})]})]})]})}),ga="_checkout_191db_1",xa="_summary_191db_15",fa="_item_191db_18",ja="_total_191db_24",fe={checkout:ga,summary:xa,item:fa,total:ja},ws="cart",ts=()=>{try{const s=localStorage.getItem(ws);return s?JSON.parse(s):[]}catch{return[]}},De=s=>{localStorage.setItem(ws,JSON.stringify(s))},pe={addItem(s){const t=ts(),r=t.findIndex(a=>a.productId===s.productId&&a.color===s.color&&a.size===s.size);return r>=0?t[r].quantity=Math.min(99,t[r].quantity+s.quantity):t.push(s),De(t),t},async addToCart(s,t){return(await S.post("/cart/add",{userId:s,item:t})).data.item},async deleteTCartItem(s){await S.delete(`/cart-item/${s}`)},async deleteTCartItems(){await S.delete("/cart/clear")},async getCart(s){return s?(await S.get("/cart")).data.items:ts()},setLocalCart(s){return De(s),s},clearLocalCart(){De([])}},Ne=de((s,t)=>({cart:[],loaded:!1,isLoading:!1,setCart:r=>s({cart:r}),addCartItem:async r=>{try{const{user:a}=z.getState();if(a?.id){await pe.addToCart(a.id,r);const n=await pe.getCart(a?.id);s({cart:n})}else{const n=Math.floor(Math.random()*1e3),c=r.productId+n,o={...r,id:+c},h=pe.addItem(o);s({cart:h})}}catch(a){console.error("Помилка при додаванні в кошик:",a)}},clearCart:async()=>{try{await pe.clearLocalCart(),s({cart:[],loaded:!1})}catch(r){console.error("Помилка при очищенні кошика:",r)}},deleteCartItems:async()=>{try{await pe.deleteTCartItems(),s({cart:[]})}catch(r){console.error("Помилка при видаленні товарів:",r)}},deleteCartItem:async r=>{const{user:a}=z.getState();try{a&&await pe.deleteTCartItem(+r),s(n=>{const c=n.cart.filter(o=>o.id!==r);return a||localStorage.setItem("cart",JSON.stringify(c)),{cart:c}})}catch(n){console.error("Помилка при delete Item:",n)}},fetchCart:async()=>{const{loaded:r,isLoading:a}=t(),{user:n,accessToken:c}=z.getState();if(!a){if(!n?.id||!c){try{const o=JSON.parse(localStorage.getItem("cart")||"[]");s({cart:o,loaded:!0})}catch(o){console.error("Помилка завантаження кошика з localStorage:",o),s({cart:[],loaded:!0})}return}if(r){console.log("Кошик вже завантажений для користувача");return}if(s({isLoading:!0}),n?.id&&c)try{const o=await pe.getCart(n.id);s({cart:o,loaded:!0,isLoading:!1})}catch(o){console.error("Помилка при завантаженні кошика:",o),s({cart:[],loaded:!0,isLoading:!1})}}}})),Re={async createOrder(s,t,r,a){console.log("➡️ Відправка замовлення на бекенд",a);const n=t.reduce((c,o)=>{const h=o.priceSale&&o.priceSale<o.price?o.priceSale:o.price;return c+h*o.quantity},0);return S.post("/orders",{userId:s??null,guestName:a.fullName,guestPhone:a.phone,guestEmail:a.email,novaPostCity:a.city,novaPostBranch:a.novaPoshtaBranch,paymentMethod:r.toUpperCase(),finalPrice:Number(Math.round(n*10)/10),items:t.map(c=>{const o=c.priceSale&&c.priceSale<c.price?c.priceSale:c.price;return{productId:c.productId,quantity:c.quantity,price:c.price,finalPrice:+(o*c.quantity).toFixed(1),name:c.name,image:c.image,color:c.color,size:c.size,priceSale:c.priceSale+""}})})},getOrders:async(s=!1,t,r=1,a=10)=>{const n={page:r,limit:a};return t?.orderId&&(n.orderId=t.orderId),t?.dateFrom&&(n.dateFrom=t.dateFrom),t?.dateTo&&(n.dateTo=t.dateTo),s&&(n.showAll=!0),(await S.get("/orders/all",{params:n,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data},updateOrderStatus:async(s,t)=>(await S.patch(`/orders/${s}/status`,{status:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data,updateOrderItemTracking:async(s,t)=>(await S.patch(`/orders/tracknumber/${s}`,{trackingNumber:t})).data},_a="_form_15mwq_1",ya={form:_a},Oe={async getAreas(){return(await S.get("nova-poshta/areas")).data},async getCities(s){return(await S.get(`nova-poshta/cities${s?`?areaRef=${s}`:""}`)).data},async getBranches(s){return(await S.get(`nova-poshta/warehouses?cityRef=${s}`)).data},async getTracking(s){return(await S.get(`nova-poshta/tracking?ttn=${s}`)).data[0]}},ba="_selectWrapper_167pe_1",va="_selectInput_167pe_8",Na="_placeholder_167pe_29",Sa="_arrow_167pe_33",Ca="_open_167pe_41",wa="_optionsList_167pe_45",ka="_option_167pe_45",Ia="_selected_167pe_80",$a="_disabled_167pe_86",se={selectWrapper:ba,selectInput:va,placeholder:Na,arrow:Sa,open:Ca,optionsList:wa,option:ka,selected:Ia,disabled:$a},Ae=({options:s,placeholder:t="Select...",onChange:r,value:a,disabled:n=!1})=>{const[c,o]=d.useState(!1),[h,i]=d.useState(a),l=d.useRef(null);d.useEffect(()=>{const p=f=>{l.current&&!l.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=p=>{i(p.value),r(p.value),o(!1)};return e.jsxs("div",{className:se.selectWrapper,ref:l,children:[e.jsxs("div",{className:`${se.selectInput} ${n?se.disabled:""}`,onClick:()=>!n&&o(p=>!p),children:[e.jsx("span",{className:h?"":se.placeholder,children:s.find(p=>p.value===h)?.label||t}),e.jsx("span",{className:`${se.arrow} ${c?se.open:""}`})]}),e.jsx("ul",{className:`${se.optionsList} ${c?se.open:""}`,children:s.map(p=>e.jsx("li",{className:`${se.option} ${p.value===h?se.selected:""}`,onClick:()=>m(p),children:p.label},p.value))})]})},Pa=({form:s,setForm:t})=>{const[r,a]=d.useState([]),[n,c]=d.useState([]),[o,h]=d.useState([]),[i,l]=d.useState(!1),[m,p]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const g=await Oe.getAreas();console.log("✅ Завантажені області:",g),a(g)}catch(g){console.error("❌ Помилка завантаження областей:",g)}})()},[]),d.useEffect(()=>{if(!s.areaRef)return;(async()=>{l(!0);try{const g=await Oe.getCities(s.areaRef);c(g)}catch(g){console.error("❌ Помилка завантаження міст:",g)}finally{l(!1)}})()},[s.areaRef]),d.useEffect(()=>{if(!s.cityRef)return;(async()=>{p(!0);try{const g=await Oe.getBranches(s.cityRef?s.cityRef:"");h(g)}catch(g){console.error("❌ Помилка завантаження відділень:",g)}finally{p(!1)}})()},[s.cityRef]);const f=(u,g)=>{if(u==="areaRef"){t(_=>({..._,areaRef:g,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0})),c([]),h([]);return}if(u==="cityRef"){const _=n.find(w=>w.Ref===g)?.Description||"";t(w=>({...w,cityRef:g,cityName:_,branchRef:void 0,branchName:void 0})),h([]);return}if(u==="branchRef"){const _=o.find(w=>w.Ref===g);t(w=>({...w,branchRef:g,branchName:_?`${_.Number} - ${_.ShortAddress}`:""}))}};return e.jsxs("div",{className:ya.form,children:[e.jsx("input",{type:"text",name:"fullName",placeholder:"Ім’я та прізвище",value:s.fullName,onChange:u=>t(g=>({...g,fullName:u.target.value})),required:!0}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Телефон",value:s.phone,onChange:u=>t(g=>({...g,phone:u.target.value})),required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:u=>t(g=>({...g,email:u.target.value}))}),e.jsx(Ae,{value:s.areaRef||"",onChange:u=>f("areaRef",u),options:r.map(u=>({value:u.Ref,label:u.Description})),placeholder:"Виберіть область"}),e.jsx(Ae,{value:s.cityRef||"",onChange:u=>f("cityRef",u),options:n.map(u=>({value:u.Ref,label:u.Description})),placeholder:i?"Завантаження міст...":"Виберіть місто",disabled:!s.areaRef}),e.jsx(Ae,{value:s.branchRef||"",onChange:u=>f("branchRef",u),options:o.map(u=>({value:u.Ref,label:`${u.Number} - ${u.ShortAddress}`})),placeholder:m?"Завантаження відділень...":"Виберіть відділення",disabled:!s.cityRef})]})},La=()=>{const{user:s}=z(),{cart:t,setCart:r,clearCart:a}=Ne(),[n,c]=d.useState(!1),[o,h]=d.useState("cod"),[i,l]=d.useState({fullName:s?.first_name+" "+s?.last_name||"",phone:"",email:s?.email||"",areaRef:void 0,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0});d.useEffect(()=>{const f=localStorage.getItem("cart");if(f)try{r(JSON.parse(f))}catch{r([])}},[r]);const m=async()=>{if(!i.fullName||!i.phone||!i.areaRef||!i.cityRef||!i.branchRef){alert("⚠ Заповніть усі обов’язкові поля");return}if(t.length===0){alert("🛒 Ваш кошик порожній");return}c(!0);try{const f={...i,city:i.cityName,novaPoshtaBranch:i.branchName};await Re.createOrder(s?.id??null,t,o,f),localStorage.removeItem("cart"),a(),s&&Ne.getState().deleteCartItems(),alert("✅ Замовлення відправлено!")}catch(f){console.error(f),alert("❌ Сталася помилка при оформленні замовлення")}finally{c(!1)}},p=t.reduce((f,u)=>{const g=u?.priceSale&&u?.priceSale<u?.price?u.priceSale:u?.price||0,_=u?.quantity??1;return f+g*_},0);return e.jsxs("div",{className:fe.checkout,children:[e.jsx("h1",{children:"Оформлення замовлення"}),e.jsx(Pa,{form:i,setForm:l}),e.jsxs("div",{className:fe.summary,children:[t.map(f=>{const u=f?.priceSale&&f?.priceSale<f?.price?f.priceSale:f?.price||0,g=f?.quantity??1;return e.jsxs("div",{className:fe.item,children:[e.jsxs("span",{children:[f?.name," x ",g]}),e.jsxs("span",{children:["₴",(u*g).toFixed(2)]})]},f.id)}),e.jsxs("div",{className:fe.total,children:[e.jsx("strong",{children:"Загальна сума:"})," ₴",p.toFixed(2)]})]}),e.jsxs("div",{className:fe.payment,children:[e.jsx("h2",{children:"Метод оплати"}),e.jsx(j,{label:"Оплата при отриманні",type:"radio",value:"cod",checked:o==="cod",onChange:()=>h("cod")}),e.jsx(j,{label:"Оплата карткою онлайн",type:"radio",value:"card",checked:o==="card",onChange:()=>h("card")})]}),e.jsx("div",{className:fe.links,children:e.jsx(X,{to:"/delivery-terms",className:"link",children:"📦 Умови доставки та повернення"})}),e.jsx(C,{onClick:m,disabled:n,children:n?"Відправка...":"Відправити замовлення"})]})},Ea="_page_1e3bx_2",Ba="_title_1e3bx_11",Ta="_centerWrapper_1e3bx_18",Oa="_adminPage_1e3bx_30",Aa="_adminContent_1e3bx_40",Ra="_sidebarWrapper_1e3bx_49",Fa="_burger_1e3bx_60",za="_open_1e3bx_99",Ua="_boxLine_1e3bx_155",K={page:Ea,title:Ba,centerWrapper:Ta,adminPage:Oa,adminContent:Aa,sidebarWrapper:Ra,burger:Fa,open:za,boxLine:Ua},qa=()=>{const{user:s,setUser:t}=z(),{register:r,handleSubmit:a,formState:{errors:n}}=ue({defaultValues:s?{first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,address:s.address,city:s.city,country:s.country,postalCode:s.postalCode,dateOfBirth:s.dateOfBirth?s.dateOfBirth.toString().split("T")[0]:void 0}:{}}),[c,o]=d.useState(null),[h,i]=d.useState(null);if(!s)return e.jsx("div",{children:"Ви не авторизовані"});const l=async m=>{try{if(s.id){const p=await he.updateUser(m,s.id);t(p),o("Профіль оновлено успішно"),i(null)}}catch(p){i(p.message||"Помилка при оновленні профілю"),o(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Профіль користувача"}),e.jsxs("div",{className:K.boxLine,children:[e.jsxs(X,{to:"/orders",children:[" ",e.jsx(C,{variant:"link",children:"Мої замовлення"})," "]}),e.jsx(X,{to:"/change-password",className:"blue hover:underline",children:e.jsx(C,{variant:"link",children:"Змінити пароль"})})]}),e.jsxs("form",{onSubmit:a(l),className:"form",children:[e.jsx(j,{placeholder:"Ім’я",id:"profile-firstname",autoComplete:"given-name",...r("first_name",{required:"Ім’я обов'язкове"})}),n.first_name&&e.jsx("p",{className:"error",children:n.first_name.message}),e.jsx(j,{placeholder:"Прізвище",id:"lastname",...r("last_name",{required:"Прізвище обов'язкове"})}),n.last_name&&e.jsx("p",{className:"error",children:n.last_name.message}),e.jsx(j,{type:"email",placeholder:"Email",autoComplete:"email",disabled:!0,id:"profile-email",...r("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),n.email&&e.jsx("p",{className:"error",children:n.email.message}),e.jsx(j,{placeholder:"Телефон",autoComplete:"tel",...r("phone")}),e.jsx(j,{placeholder:"Адреса",autoComplete:"street-address",...r("address")}),e.jsx(j,{placeholder:"Місто",autoComplete:"address-level2",...r("city")}),e.jsx(j,{placeholder:"Країна",autoComplete:"country",...r("country")}),e.jsx(j,{placeholder:"Поштовий індекс",autoComplete:"postal-code",...r("postalCode")}),e.jsx(j,{type:"date",placeholder:"Дата народження",autoComplete:"bday",...r("dateOfBirth")}),c&&e.jsx("p",{className:"green",children:c}),h&&e.jsx("p",{className:"error",children:h}),e.jsx(C,{type:"submit",children:"Оновити профіль"})]})]})};function Ma(){return e.jsx("div",{className:K.centerWrapper,children:e.jsx(ca,{})})}const Da=()=>e.jsx("div",{children:"NotFoundPage"}),Wa="_aboutWrapper_93t88_2",Ga="_fbeAbout_93t88_6",Va="_title_93t88_24",Ha="_subtitle_93t88_46",Ja="_description_93t88_73",Ka="_featuresList_93t88_90",Xa="_valuesList_93t88_91",Ya="_deliveryList_93t88_92",V={aboutWrapper:Wa,fbeAbout:Ga,title:Va,subtitle:Ha,description:Ja,featuresList:Ka,valuesList:Xa,deliveryList:Ya},Qa=()=>e.jsx("section",{"data-bg":"dark",className:`content-section ${V.contentSection}`,children:e.jsx("div",{className:V.aboutWrapper,children:e.jsxs("div",{className:V.fbeAbout,children:[e.jsx("h1",{className:V.title,children:"Про FBE"}),e.jsx("p",{className:V.description,children:"FBE — український бренд сучасного одягу, який поєднує якість, стиль та доступність. Ми створюємо речі для тих, хто цінує комфорт та індивідуальність у щоденному житті, а також для приємного спорту й активного відпочинку, що приносить задоволення."}),e.jsx("h2",{className:V.subtitle,children:"Наша місія"}),e.jsx("p",{className:V.description,children:"Надавати якісний одяг, який підкреслює особистість кожного клієнта та робить їх впевненими в собі. Ми віримо, що стильний та функціональний одяг має бути доступним для кожного."}),e.jsx("h2",{className:V.subtitle,children:"Що нас відрізняє"}),e.jsxs("ul",{className:V.featuresList,children:[e.jsx("li",{children:"Якість матеріалів — використовуємо тільки перевірені тканини та фурнітуру"}),e.jsx("li",{children:"Актуальний дизайн — слідкуємо за світовими трендами та створюємо власні"}),e.jsx("li",{children:"Доступні ціни — співвідношення ціна-якість, яке вас приємно здивує"}),e.jsx("li",{children:"Швидка доставка — працюємо по всій Україні, Польщі, США та Канаді"})]}),e.jsx("h2",{className:V.subtitle,children:"Наші цінності"}),e.jsxs("ul",{className:V.valuesList,children:[e.jsx("li",{children:"Якість — кожна річ проходить ретельний контроль якості"}),e.jsx("li",{children:"Стиль — створюємо одяг для сучасних та активних людей"}),e.jsx("li",{children:"Сервіс — індивідуальний підхід до кожного клієнта"}),e.jsx("li",{children:"Інновації — постійно вдосконалюємо наші процеси та продукти"})]}),e.jsx("h2",{className:V.subtitle,children:"Доставка"}),e.jsxs("ul",{className:V.deliveryList,children:[e.jsx("li",{children:"Україна: Нова пошта (2-3 робочих дні)"}),e.jsx("li",{children:"Польща: Нова пошта (3-5 робочих днів)"}),e.jsx("li",{children:"США та Канада: Canada Post (1-3 робочих дні)"}),e.jsx("li",{children:"Міжнародна доставка: Meest Express (10-12 робочих днів)"})]})]})})}),Za=()=>e.jsx("div",{className:"page",children:e.jsx(Qa,{})}),en="_form_1pgbi_1",sn="_row_1pgbi_26",tn="_error_1pgbi_33",rn="_success_1pgbi_38",ae={form:en,row:sn,error:tn,success:rn},an=()=>{const{register:s,handleSubmit:t,reset:r,formState:{errors:a,isSubmitting:n,isSubmitSuccessful:c},setError:o}=ue({defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:"",address:"",city:"",country:"",postalCode:"",dateOfBirth:""}}),h=async i=>{try{await he.register(i),r()}catch(l){console.log("RegisterForm: Error during registration:",l),o("email",{type:"server",message:l.response?.data?.error.message||"Помилка при реєстрації"})}};return e.jsxs("form",{className:ae.form,onSubmit:t(h),children:[e.jsx("h2",{children:"Реєстрація користувача"}),e.jsxs("div",{className:ae.row,children:[e.jsx(j,{type:"text",placeholder:"Ім'я *",...s("first_name",{required:"Ім'я обов'язкове"})}),a.first_name&&e.jsx("p",{className:ae.error,children:a.first_name.message}),e.jsx(j,{type:"text",placeholder:"Прізвище *",...s("last_name",{required:"Прізвище обов'язкове"})}),a.last_name&&e.jsx("p",{className:ae.error,children:a.last_name.message})]}),e.jsx(j,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),a.email&&e.jsx("p",{className:ae.error,children:a.email.message}),e.jsx(j,{type:"password",placeholder:"Пароль *",...s("password",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Пароль має містити мін. 8 символів, 1 велику і 1 малу літеру"}})}),a.password&&e.jsx("p",{className:ae.error,children:a.password.message}),e.jsx(j,{type:"tel",placeholder:"Телефон *",...s("phone",{required:"Телефон обов'язковий",pattern:{value:/^\+?[0-9\s\-()]+$/,message:"Некоректний номер телефону"}})}),e.jsx(j,{type:"text",placeholder:"Адреса",...s("address")}),e.jsxs("div",{className:ae.row,children:[e.jsx(j,{type:"text",placeholder:"Місто",...s("city")}),e.jsx(j,{type:"text",placeholder:"Країна",...s("country")})]}),e.jsx("div",{className:ae.row,children:e.jsx(j,{type:"text",placeholder:"Поштовий індекс",...s("postalCode")})}),e.jsxs("span",{children:["Дата народження  ",e.jsx("br",{}),e.jsx(j,{type:"date",placeholder:"Дата народження",...s("dateOfBirth")})]}),c&&e.jsx("p",{className:ae.success,children:"Реєстрація успішна! Перейдіть на сторінку авторизації"}),e.jsx(C,{type:"submit",disabled:n,children:n?"Реєстрація...":"Зареєструватися"})]})},nn=()=>e.jsx("div",{className:"page",children:e.jsx(an,{})}),cn=()=>{const{categories:s}=Ue();return e.jsxs("div",{className:Pe.caruselBox,children:[e.jsx("h2",{children:"Обирайте за категорією"}),e.jsx(js,{effect:"coverflow",grabCursor:!0,pagination:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},modules:[_s,Ts],spaceBetween:16,navigation:{enabled:!0,hideOnClick:!1},watchOverflow:!1,breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}},children:s.filter(t=>t.parentId===null).map(t=>e.jsx(ys,{className:Pe.wrapper,children:e.jsx(X,{to:`/category/${t.slug}`,children:e.jsxs("div",{className:Pe.categoryBox,children:[e.jsx("h3",{children:t.name}),e.jsx("div",{className:Pe.imgBox,children:e.jsx("img",{src:t.imageUrl,alt:t.name})})]})})},t.id))})]})},rs=()=>{const{products:s,fetchProducts:t}=ze(),[r,a]=d.useState(!1),[n,c]=d.useState(null);return d.useEffect(()=>{(async()=>{a(!0),c(null);try{await t(),console.log("Products loaded successfully from store")}catch(h){console.error("Failed to load products:",h),c(h instanceof Error?h.message:"Unknown error")}finally{a(!1)}})()},[t]),r?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsx("div",{children:e.jsx("p",{children:"Завантаження продуктів..."})})]}):n?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Помилка завантаження: ",n]}),e.jsx(C,{onClick:()=>window.location.reload(),children:"Спробувати знову"})]})]}):e.jsxs("div",{className:"pages",children:[e.jsx("div",{style:{padding:"20px 0"},children:e.jsx(js,{modules:[_s],spaceBetween:16,slidesPerView:"auto",navigation:!0,className:"swiper-box",children:s.map(o=>e.jsx(ys,{className:"slide",children:e.jsx(Xe,{product:o,isMainPage:!0})},o.id))})}),e.jsx(cn,{})]})},on="_menuItem_16v5y_1",ln="_menuLink_16v5y_7",as={menuItem:on,menuLink:ln},dn=({href:s,label:t,onClick:r})=>e.jsx("li",{className:as.menuItem,children:e.jsx("a",{href:s,className:as.menuLink,onClick:a=>{a.preventDefault(),r?.()},children:t})}),un="_menu_cfg4h_1",hn={menu:un},ks=({items:s,onItemClick:t})=>{const r=a=>{t&&t(a)};return e.jsx("ul",{className:hn.menu,children:s.map((a,n)=>e.jsx(dn,{href:a.href,label:a.label,onClick:()=>r(a.href)},n))})},mn="_sidebarBox_74jfv_1",pn="_sidebar_74jfv_1",ns={sidebarBox:mn,sidebar:pn},gn=({children:s})=>e.jsx("div",{className:ns.sidebarBox,children:e.jsx("div",{className:ns.sidebar,children:ve.Children.map(s,t=>ve.isValidElement(t)&&t.type===ks?ve.cloneElement(t):null)})}),xn=()=>{const s=Se(),[t,r]=d.useState(!1),a=[{href:"dashboard",label:"Dashboard"},{href:"createproduct",label:"Create Product"},{href:"create-category",label:"Create/Update Category"},{href:"create-collection",label:"Create/Update Collection"},{href:"/orders",label:"Замовлення"}],n=()=>{r(o=>!o)},c=o=>{s(o),r(!1)};return e.jsxs("div",{className:`${K.adminPage} ${K.page}`,children:[e.jsxs("button",{className:K.burger,onClick:n,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx("div",{className:`${K.sidebarWrapper} ${t?K.open:""}`,children:e.jsx(gn,{isOpen:t,children:e.jsx(ks,{items:a,onItemClick:c})})}),e.jsx("div",{className:K.adminContent,children:e.jsx(Os,{})})]})},fn="_cart_l07mg_9",jn="_cartItems_l07mg_21",_n="_total_l07mg_27",yn="_checkout_l07mg_42",bn="_empty_l07mg_57",$e={cart:fn,cartItems:jn,total:_n,checkout:yn,empty:bn},vn="_cartItem_4x454_12",Nn="_image_4x454_26",Sn="_info_4x454_34",Cn="_quantity_4x454_52",wn="_remove_4x454_79",je={cartItem:vn,image:Nn,info:Sn,quantity:Cn,remove:wn},kn=({item:s,price:t,updateQuantity:r,removeItem:a})=>e.jsxs("div",{className:je.cartItem,children:[e.jsx("img",{src:s.image,alt:s.name,className:je.image}),e.jsxs("div",{className:je.info,children:[e.jsx("h2",{children:s.name}),e.jsxs("p",{children:["Колір: ",s.color]}),e.jsxs("p",{children:["Розмір: ",s.size]}),e.jsxs("p",{children:["Ціна: ₴",t.toFixed(2)]}),e.jsxs("div",{className:je.quantity,children:[e.jsx(C,{onClick:()=>r(s.productId,s.quantity-1),className:"black",children:"-"}),e.jsx(j,{className:je.input,type:"number",id:"quantity",name:"quantity",min:"1",max:"99",value:s.quantity,onChange:n=>r(s.productId,Number(n.target.value))}),e.jsx(C,{onClick:()=>r(s.productId,s.quantity+1),className:"black",children:"+"})]}),e.jsx(C,{className:je.remove,onClick:()=>a(s),children:"Видалити"})]})]}),In=()=>{const[s,t]=d.useState([]),[r,a]=d.useState(!1),n=Se(),{cart:c,fetchCart:o}=Ne(),{user:h}=z();d.useEffect(()=>{h&&h?.id&&o()},[h,o]),d.useEffect(()=>{if(c.length>0){const f=c.map(u=>{const g=u.priceSale&&u.priceSale<u.price?u.priceSale:u.price;return{...u,finalPrice:g*u.quantity}});t(f)}else{const f=localStorage.getItem("cart");if(f)try{const g=JSON.parse(f).map(_=>{const w=_.priceSale&&_.priceSale<_.price?_.priceSale:_.price;return{..._,finalPrice:w*_.quantity}});t(g)}catch{t([])}}a(!0)},[c]),d.useEffect(()=>{r&&localStorage.setItem("cart",JSON.stringify(s))},[s,r]);const i=(f,u,g,_,w)=>{t(A=>A.map(v=>{if(w?v.id===w:v.productId===f&&v.color===g&&v.size===_){const N=Math.max(1,Math.min(99,u)),T=v.priceSale&&v.priceSale<v.price?v.priceSale:v.price;return{...v,quantity:N,finalPrice:T*N}}return v}))},l=f=>{console.log(f),f.id?(t(u=>u.filter(g=>g.id!==f.id)),Ne.getState().deleteCartItem(f.id)):(t(u=>u.filter(g=>!(g.productId===f.productId&&g.color===f.color&&g.size===f.size))),localStorage.setItem("cart",JSON.stringify(s)))},m=s.reduce((f,u)=>f+(u.finalPrice??0),0);if(s.length===0)return e.jsx("div",{className:$e.empty,children:"Кошик порожній"});const p=()=>{if(s.length===0){alert("🛒 Кошик порожній");return}n("/checkout")};return e.jsxs("div",{className:$e.cart,children:[e.jsx("h1",{children:"Кошик"}),e.jsx("div",{className:$e.cartItems,children:s.map(f=>e.jsx(kn,{item:f,price:f.finalPrice?f.finalPrice/f.quantity:0,updateQuantity:(u,g)=>i(u,g,f.color,f.size,f.id),removeItem:l},f.id??`${f.productId}-${f.color}-${f.size}`))}),e.jsxs("div",{className:$e.total,children:[e.jsxs("h2",{children:["Загальна сума: ₴",m.toFixed(2)]}),e.jsx(C,{className:$e.checkout,onClick:p,children:"Оформити замовлення"})]})]})},$n=()=>e.jsx("div",{className:K.page,children:e.jsx(In,{})}),Pn="_productsContainer_njt8n_1",Ln="_cardWrapper_njt8n_9",ge={productsContainer:Pn,cardWrapper:Ln},Is=({categorySlug:s,collectionSlug:t})=>{const{products:r,fetchProducts:a}=ze(),[n,c]=d.useState(!1),[o,h]=d.useState(null);return d.useEffect(()=>{(async()=>{c(!0),h(null);const l={limit:50,skip:0,categorySlug:s||void 0,collectionSlug:t||void 0};try{await a(l),console.log("Products loaded successfully from store")}catch(m){console.error("Failed to load products:",m),h(m instanceof Error?m.message:"Unknown error")}finally{c(!1)}})()},[a,s,t]),n?e.jsx("div",{children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Завантаження продуктів..."})]})}):o?e.jsx("div",{className:ge.productsGrid,children:e.jsxs("div",{className:ge.error,children:[e.jsxs("p",{children:["Помилка завантаження: ",o]}),e.jsx(C,{onClick:()=>window.location.reload(),className:ge.retryButton,children:"Спробувати знову"})]})}):r.length===0?e.jsx("div",{className:ge.productsGrid,children:e.jsx("div",{className:ge.emptyState,children:e.jsx("p",{children:"Товарів поки немає"})})}):e.jsx("div",{className:ge.productsContainer,children:r.map(i=>e.jsx("div",{className:ge.cardWrapper,children:e.jsx(Xe,{product:i})},i.id))})},En=()=>{const{categorySlug:s}=Fe();return e.jsxs("div",{className:K.page,children:[e.jsx("h2",{className:K.title,children:s?.toUpperCase()}),e.jsx(Is,{categorySlug:s})]})},Bn=()=>{const{collectionSlug:s}=Fe();return console.log("Collection slug:",s),e.jsxs("div",{className:K.page,children:[e.jsx("h2",{children:s?.toUpperCase()}),e.jsx(Is,{collectionSlug:s})]})},Tn="_title_1lqmk_11",On="_section_1lqmk_19",An="_subtitle_1lqmk_32",Rn="_list_1lqmk_41",H={title:Tn,section:On,subtitle:An,list:Rn},Fn=()=>e.jsxs("div",{className:"page",children:[e.jsx("h1",{className:H.title,children:"Політика конфіденційності"}),e.jsx("section",{className:H.section,children:e.jsx("p",{children:"У цій Політиці конфіденційності описано, як FBE («Сайт», «ми», «нас» або «наш») збирає, використовує та розкриває вашу особисту інформацію, коли ви відвідуєте, користуєтеся нашими послугами або робите покупки на сайті desse-swim."})}),e.jsxs("section",{className:H.section,children:[e.jsx("h2",{className:H.subtitle,children:"Зміни в цій Політиці конфіденційності"}),e.jsx("p",{children:"Ми можемо час від часу оновлювати цю Політику, у тому числі для відображення змін у нашій практиці або з інших операційних, юридичних чи нормативних причин."})]}),e.jsxs("section",{className:H.section,children:[e.jsx("h2",{className:H.subtitle,children:"Як ми збираємо та використовуємо вашу особисту інформацію"}),e.jsx("p",{children:"Для надання Послуг ми збираємо вашу особисту інформацію з різних джерел. Інформація, яку ми збираємо, залежить від того, як ви взаємодієте з нашим сайтом та послугами."})]}),e.jsxs("section",{className:H.section,children:[e.jsx("h2",{className:H.subtitle,children:"Інформація, яку ми збираємо"}),e.jsxs("ul",{className:H.list,children:[e.jsx("li",{children:"Основні контактні дані (ім'я, адреса, телефон, email)"}),e.jsx("li",{children:"Інформація про замовлення та покупки"}),e.jsx("li",{children:"Дані облікового запису (логін, пароль)"}),e.jsx("li",{children:"Дані про підтримку клієнтів"})]})]}),e.jsxs("section",{className:H.section,children:[e.jsx("h2",{className:H.subtitle,children:"Використання cookies"}),e.jsx("p",{children:"Ми використовуємо файли cookie для роботи сайту, аналітики та персоналізації досвіду користувача."})]}),e.jsxs("section",{className:H.section,children:[e.jsx("h2",{className:H.subtitle,children:"Розкриття інформації"}),e.jsx("p",{children:"Ми можемо передавати інформацію третім сторонам для виконання послуг, аналітики, маркетингу та безпеки."})]})]}),zn="_product_76txh_3",Un="_nameBlock_76txh_22",qn="_priceWrapper_76txh_36",Mn="_images_76txh_53",Dn="_mainImage_76txh_62",Wn="_noImage_76txh_69",Gn="_info_76txh_81",Vn="_title_76txh_87",Hn="_description_76txh_94",Jn="_price_76txh_36",Kn="_priceSale_76txh_113",Xn="_priceOriginal_76txh_119",Yn="_featuresSection_76txh_126",Qn="_featuresList_76txh_140",Zn="_productForm_76txh_152",ec="_formGroup_76txh_162",sc="_colorOptions_76txh_175",tc="_colorOption_76txh_175",rc="_selected_76txh_197",ac="_sizeOptions_76txh_203",nc="_sizeOption_76txh_203",cc="_quantityWrapper_76txh_232",oc="_quantityBtn_76txh_239",ic="_quantityInput_76txh_263",lc="_totalPrice_76txh_280",dc="_addToCartBtn_76txh_291",uc="_success_76txh_312",hc="_loading_76txh_320",mc="_error_76txh_321",pc="_noProduct_76txh_322",gc="_accordion_76txh_370",xc="_accordionBtn_76txh_374",fc="_accordionContent_76txh_388",jc="_mainImageContainer_76txh_427",_c="_thumbnailContainer_76txh_449",yc="_thumbnail_76txh_449",bc="_activeThumbnail_76txh_496",vc="_thumbnailImage_76txh_500",k={product:zn,nameBlock:Un,priceWrapper:qn,images:Mn,mainImage:Dn,noImage:Wn,info:Gn,title:Vn,description:Hn,price:Jn,priceSale:Kn,priceOriginal:Xn,featuresSection:Yn,featuresList:Qn,productForm:Zn,formGroup:ec,colorOptions:sc,colorOption:tc,selected:rc,sizeOptions:ac,sizeOption:nc,quantityWrapper:cc,quantityBtn:oc,quantityInput:ic,totalPrice:lc,addToCartBtn:dc,success:uc,loading:hc,error:mc,noProduct:pc,accordion:gc,accordionBtn:xc,accordionContent:fc,mainImageContainer:jc,thumbnailContainer:_c,thumbnail:yc,activeThumbnail:bc,thumbnailImage:vc},Nc=({productId:s})=>{const[t,r]=d.useState(null),[a,n]=d.useState({variantId:null,size:null,quantity:1}),[c,o]=d.useState(!0),[h,i]=d.useState(null),[l,m]=d.useState(!1),[p,f]=d.useState(!1),[u,g]=d.useState(!1),[_,w]=d.useState(0);d.useEffect(()=>{(async()=>{o(!0),i(null);try{const I=Number(s);if(isNaN(I))throw new Error("Невірний ID продукту");const M=await ie.getById(I);r(M),M?.variants?.length&&n(Q=>({...Q,variantId:M.variants[0].id||null,size:M.variants[0].sizes?.[0]||null}))}catch(I){i(I instanceof Error?I.message:"Помилка завантаження продукту")}finally{o(!1)}})()},[s]);const v=t?.variants?t.variants.flatMap(y=>(y.images||[]).map(I=>({...I,variantId:y.id,variantColor:y.color,variantSizes:y.sizes}))):[],B=y=>{const I=v[y];if(!I)return;w(y);const M=I.variantId,Q=I.variantSizes?.[0]||null;n(Ls=>({...Ls,variantId:M||null,size:Q}))},N=y=>{const I=t?.variants.find(Q=>Q.id===y);n(Q=>({...Q,variantId:y,size:I?.sizes?.[0]||null}));const M=v.findIndex(Q=>Q.variantId===y);M!==-1&&w(M)},T=y=>n(I=>({...I,size:y})),Z=y=>{const I=Math.max(1,Math.min(99,Number(y.target.value)));n(M=>({...M,quantity:I}))},L=()=>n(y=>({...y,quantity:Math.min(y.quantity+1,99)})),P=()=>n(y=>({...y,quantity:Math.max(y.quantity-1,1)})),U=async()=>{if(!t)return;if(!a.variantId){i("Будь ласка, оберіть варіант");return}if(!a.size){i("Будь ласка, оберіть розмір.");return}const y=t.variants.find(I=>I.id===a.variantId&&!!a.size&&I.sizes.includes(a.size));if(!y){i("Обраний варіант недоступний");return}m(!0),i(null);try{const I=t.translations?.[0],M=y.priceSale&&y.priceSale<y.price?y.priceSale:y.price||t.priceSale||t.price,Q={productId:t.id,name:I?.name||"Без назви",price:M,color:y.color,size:a.size,quantity:a.quantity,image:y.images?.[0]?.url};await Ne.getState().addCartItem(Q),f(!0),setTimeout(()=>{f(!1)},2e3)}catch(I){i(I instanceof Error?I.message:"Помилка додавання в кошик")}finally{m(!1)}};if(c)return e.jsx("div",{className:k.loading,children:"Завантаження..."});if(h)return e.jsxs("div",{className:k.error,children:["Помилка: ",h]});if(!t)return e.jsx("div",{className:k.noProduct,children:"Продукт не знайдено"});const b=t.translations?.[0],$=t.variants.find(y=>y.id===a.variantId),q=$?.sizes||[],O=v[_],W=($?.priceSale&&$.priceSale<$.price?$.priceSale:$?.price)||t.priceSale||t.price,xe=W*a.quantity;function te(y){return Object.values(He).includes(y)}const R=y=>{const I=y.description||y.description||y.color,M=te(y.color)?Ss[y.color]:"#cccccc";return{key:y.id,displayName:I,color:M}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:k.product,children:[e.jsxs("div",{className:k.images,children:[e.jsx("div",{className:k.mainImageContainer,children:O?e.jsx("img",{src:O.url,alt:O.altText||b?.name||"Product image",className:k.mainImage}):e.jsx("div",{className:k.noImage,children:"Фото відсутнє"})}),v.length>0&&e.jsx("div",{className:k.thumbnailContainer,children:v.map((y,I)=>e.jsx("div",{className:`${k.thumbnail} ${I===_?k.activeThumbnail:""}`,onClick:()=>B(I),children:e.jsx("img",{src:y.url,alt:y.altText||`Image ${I+1}`,className:k.thumbnailImage})},`${y.variantId}-${y.url}-${I}`))})]}),e.jsxs("div",{className:k.info,children:[e.jsx("h1",{className:k.title,children:b?.name||"Без назви"}),b?.description&&e.jsx("p",{className:k.description,children:b.description}),e.jsx("div",{className:k.nameBlock,children:e.jsx("div",{className:k.priceWrapper,children:$?.description})}),e.jsx("div",{className:k.priceWrapper,children:e.jsx("span",{className:+t.price>+W.toFixed(2)?k.priceOriginal:k.price,children:$&&$.price?"₴ "+$.price.toFixed(2):"₴ "+t.price})}),+t.price>+W.toFixed(2)&&e.jsx("div",{className:k.priceWrapper,children:e.jsxs("span",{className:k.priceSale,children:["₴",W.toFixed(2)]})}),e.jsxs("div",{className:k.productForm,children:[t.variants.length>0&&e.jsxs("div",{className:k.formGroup,children:[e.jsx("h4",{children:"Варіант:"}),e.jsx("div",{className:k.colorOptions,children:t.variants.map(y=>{const I=R(y);return e.jsx(C,{className:`${k.colorOption} ${a.variantId===y.id?k.selected:""}`,onClick:()=>{y.id&&N(y.id)},style:{backgroundColor:I.color.toLowerCase(),width:"40px",height:"40px",minWidth:"40px",padding:"0",border:a.variantId===y.id?"3px solid #000":"1px solid #ccc"}},I.key)})})]}),q.length>0&&e.jsxs("div",{className:k.formGroup,children:[e.jsx("h4",{children:"Розмір:"}),e.jsx("div",{className:k.sizeOptions,children:q.map(y=>e.jsx(C,{className:`${k.sizeOption} ${a.size===y?k.selected:""}`,onClick:()=>T(y),children:qe[y]||y},y))})]}),t.features&&t.features.length>0&&e.jsxs("div",{className:k.featuresSection,children:[e.jsx("h3",{children:"Особливості"}),e.jsx("ul",{className:k.featuresList,children:t.features.sort((y,I)=>y.order-I.order).map(y=>e.jsxs("li",{children:[e.jsx("strong",{children:y.text.split(" ")[0]})," ",y.text.split(" ").slice(1).join(" ")]},y.order+y.text))})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("h4",{children:"Кількість:"}),e.jsxs("div",{className:k.quantityWrapper,children:[e.jsx(C,{type:"button",className:k.quantityBtn,onClick:P,disabled:a.quantity<=1,children:"−"}),e.jsx(j,{type:"number",min:"1",max:"99",value:a.quantity,onChange:Z,className:k.quantityInput}),e.jsx(C,{type:"button",className:k.quantityBtn,onClick:L,disabled:a.quantity>=99,children:"+"})]})]}),e.jsx("div",{className:k.totalPrice,children:e.jsxs("strong",{children:["Загальна ціна: ₴",xe.toFixed(2)]})}),e.jsx(C,{className:`${k.addToCartBtn} ${p?k.success:""}`,onClick:U,disabled:l,children:l?"Додавання...":p?"✓ Додано в кошик!":"Додати в кошик"})]}),e.jsxs("div",{className:k.accordion,children:[e.jsxs("button",{className:k.accordionBtn,onClick:()=>g(!u),children:["Доставка та повернення ",u?"▲":"▼"]}),u&&e.jsxs("div",{className:k.accordionContent,children:[e.jsxs("ul",{children:[e.jsx("li",{children:"Замовлення по Україні: «Нова пошта» (2-3 робочих дні)"}),e.jsx("li",{children:"Замовлення по Польщі: «Нова пошта» (3-5 робочих днів)"}),e.jsx("li",{children:"Замовлення по США та Канаді: «Canada Post» (1-3 робочих дні)"}),e.jsx("li",{children:"Міжнародна доставка: Meest Express (10-12 робочих днів)"})]}),e.jsxs("p",{children:["Для додаткової інформації звертайтесь у"," ",e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:"Instagram"})]})]})]})]})]})})};function Sc(){const s=Fe(),[t,r]=d.useState(null);return d.useEffect(()=>{r(s.id||null)},[s.id]),t?e.jsx("div",{className:K.page,children:e.jsx(Nc,{productId:t})}):e.jsx("div",{children:"Продукт не знайдено"})}const Cc="_form_ri903_1",wc="_title_ri903_13",kc="_field_ri903_20",Ic="_error_ri903_41",ce={form:Cc,title:wc,field:kc,error:Ic},$c={async getAll(){try{const{data:s}=await S.get("users?limit=10&skip=0");return Me.getState().setUsers(s.users),s.users}catch(s){throw new Error("Не вдалося отримати список користувачів: "+s.message)}},async getById(s){try{const{data:t}=await S.get(`users/${s}`);return t}catch(t){throw new Error("Не вдалося отримати користувача: "+t.message)}},async updateUser(s,t){try{const{data:r}=await S.patch(`users/${s}`,t);return Me.getState().updateUserInStore(r),r}catch(r){throw new Error("Не вдалося оновити користувача: "+r.message)}},async sendMessageFromContact(s){try{await S.post("telegram/message",s)}catch(t){throw new Error("Не вдалося відправити повідомлення: "+t.message)}},async deleteUser(s){try{await S.delete(`users/${s}`),Me.getState().removeUser(s)}catch(t){throw new Error("Не вдалося видалити користувача: "+t.message)}}},Pc=()=>{const{register:s,handleSubmit:t,reset:r,formState:{errors:a,isSubmitting:n}}=ue(),c=async o=>{try{await $c.sendMessageFromContact(o),alert("Повідомлення успішно відправлено!"),r()}catch(h){console.error("❌ Помилка відправки",h),alert("Сталася помилка. Спробуйте пізніше.")}};return e.jsxs("form",{className:ce.form,onSubmit:t(c),children:[e.jsx("h2",{className:ce.title,children:"Зв'яжіться з нами"}),e.jsxs("div",{className:ce.field,children:[e.jsx(j,{type:"text",label:"Ім’я",...s("name",{required:"Ім’я обов’язкове"})}),a.name&&e.jsx("span",{className:ce.error,children:a.name.message})]}),e.jsxs("div",{className:ce.field,children:[e.jsx(j,{type:"email",label:"Email",...s("email",{required:"Email обов’язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),a.email&&e.jsx("span",{className:ce.error,children:a.email.message})]}),e.jsxs("div",{className:ce.field,children:[e.jsx("label",{children:"Повідомлення"}),e.jsx("textarea",{rows:4,...s("message",{required:"Повідомлення обов’язкове"})}),a.message&&e.jsx("span",{className:ce.error,children:a.message.message})]}),e.jsx(C,{type:"submit",disabled:n,children:n?"Відправка...":"Відправити"})]})},Lc=()=>e.jsx("div",{className:"page",children:e.jsx(Pc,{})}),Ec=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=ue(),[a,n]=d.useState(null),[c,o]=d.useState(null);console.log("error",a);const h=async i=>{if(i.newPassword!==i.confirmPassword){n("Новий пароль і підтвердження не збігаються");return}try{await he.changePassword(i.currentPassword,i.newPassword),o("Пароль успішно змінено"),n(null)}catch(l){n(l.message||"Помилка при зміні пароля"),o(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Зміна пароля"}),e.jsxs("form",{onSubmit:t(h),className:"form",children:[e.jsx(j,{type:"password",placeholder:"Поточний пароль",...s("currentPassword",{required:"Поточний пароль обов'язковий"})}),r.currentPassword&&e.jsx("p",{className:"error",children:r.currentPassword.message}),e.jsx(j,{type:"password",placeholder:"Новий пароль",...s("newPassword",{required:"Новий пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),r.newPassword&&e.jsx("p",{className:"error",children:r.newPassword.message}),e.jsx(j,{type:"password",placeholder:"Підтвердження нового пароля",...s("confirmPassword",{required:"Підтвердження пароля обов'язкове"})}),r.confirmPassword&&e.jsx("p",{className:"text-error-600",children:r.confirmPassword.message}),a&&e.jsx("p",{className:"error",children:a}),c&&e.jsx("p",{className:"green",children:c}),e.jsx(C,{type:"submit",children:"Змінити пароль"})]})]})},Bc=de((s,t)=>({orders:[],loading:!1,error:null,setOrders:r=>s({orders:r}),fetchOrders:async(r=!1,a,n=1,c=10)=>{s({loading:!0,error:null});try{const o=await Re.getOrders(r,a,n,c);s({orders:o,loading:!1})}catch(o){s({error:o.message||"Помилка завантаження замовлень",loading:!1})}},updateOrderStatus:async(r,a)=>{s({loading:!0,error:null});try{const n=await Re.updateOrderStatus(r,a),c=t().orders.map(o=>o.id===r?{...o,status:n.status}:o);s({orders:c,loading:!1})}catch(n){s({error:n.message||"Помилка оновлення статусу замовлення",loading:!1})}}}));var Ye=(s=>(s.ADMIN="ADMIN",s.USER="USER",s.CUSTOMER="CUSTOMER",s))(Ye||{}),be=(s=>(s.PENDING="PENDING",s.PROCESSING="PROCESSING",s.COMPLETED="COMPLETED",s.CANCELED="CANCELED",s))(be||{});const Tc=({trackingNumber:s,full:t=!1})=>{const[r,a]=d.useState(null),[n,c]=d.useState(!1),[o,h]=d.useState(null);return d.useEffect(()=>{if(!s)return;(async()=>{try{c(!0),h(null);const l=await Oe.getTracking(s);a(l)}catch(l){h(l.message||"Не вдалося завантажити інформацію")}finally{c(!1)}})()},[s]),s?n?e.jsx("p",{children:"Завантаження інформації..."}):o?e.jsxs("p",{className:"error",children:["Помилка: ",o]}):r?e.jsxs("div",{className:"tracking-info",children:[e.jsx("h4",{children:"Інформація про відправлення"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Номер ТТН:"})," ",r.Number]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Статус:"})," ",r.Status]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Дата створення:"})," ",r.DateCreated]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Місто отримувача:"})," ",r.CityRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Відділення отримувача:"})," ",r.WarehouseRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Оголошена вартість:"})," ",r.DocumentCost," ₴"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Вага:"})," ",r.FactualWeight," кг"]}),r.ScheduledDeliveryDate&&e.jsxs("li",{children:[e.jsx("strong",{children:"Планова дата доставки:"})," ",r.ScheduledDeliveryDate]})]}),t&&e.jsxs("div",{className:"tracking-details",children:[e.jsx("h5",{children:"Детальна інформація:"}),e.jsx("table",{children:e.jsx("tbody",{children:Object.entries(r).map(([i,l])=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:i})}),e.jsx("td",{children:String(l)})]},i))})})]})]}):e.jsx("p",{children:"Інформація відсутня"}):e.jsx("p",{children:"Номер посилки відсутній"})},cs={[be.PENDING]:"Очікує обробки",[be.PROCESSING]:"В обробці",[be.COMPLETED]:"Виконано",[be.CANCELED]:"Скасовано"},Oc=({order:s,isAdmin:t,updatingOrderId:r,onStatusChange:a})=>{const n=Object.values(be).map(i=>({value:i,label:cs[i]})),[c,o]=d.useState(s.trackingNumber||""),h=()=>{c&&Re.updateOrderItemTracking(s.id,c)};return e.jsxs("li",{className:"order-item",children:[e.jsxs("div",{className:"order-header-section",children:[e.jsxs("h3",{children:["Замовлення #",s.id," —"," ",new Date(s.createdAt).toLocaleDateString("uk-UA")]}),e.jsxs("div",{className:"order-status-section",children:[t?e.jsx(Ae,{options:n,value:s.status,onChange:i=>a(s.id,i),disabled:r===s.id}):e.jsx("span",{className:`status-badge status-${s.status.toLowerCase()}`,children:cs[s.status]}),r===s.id&&e.jsx("span",{className:"updating-status",children:"Оновлюється..."})]})]}),e.jsxs("p",{className:"order-details",children:[s.guestName&&e.jsxs(e.Fragment,{children:["Ім'я: ",s.guestName]}),s.guestPhone&&e.jsxs(e.Fragment,{children:[", Телефон: ",s.guestPhone]}),s.guestEmail&&e.jsxs(e.Fragment,{children:[", Email: ",s.guestEmail]})]}),s.novaPostCity&&s.novaPostBranch&&e.jsxs("p",{children:["Доставка: Нова Пошта, ",s.novaPostCity,", Відділення №",s.novaPostBranch]}),e.jsxs("p",{children:["Оплата:"," ",s.paymentMethod==="COD"?"Накладений платіж":s.paymentMethod]}),e.jsxs("div",{className:"order-tracking-section",children:[t?e.jsxs("div",{className:"tracking-field",children:[e.jsx("input",{type:"text",placeholder:"Номер посилки",value:c,onChange:i=>o(i.target.value)}),e.jsx("button",{type:"button",onClick:h,children:"Зберегти"})]}):s.trackingNumber&&e.jsxs("p",{children:["Номер посилки: ",s.trackingNumber]}),s.trackingNumber&&e.jsxs("div",{className:"tracking-popover-wrapper",children:[e.jsxs("div",{className:"tracking-trigger",children:["Номер посилки: ",s.trackingNumber]}),e.jsx("div",{className:"tracking-popover",children:e.jsx(Tc,{trackingNumber:s.trackingNumber})})]})]}),e.jsx("ul",{className:"order-items",children:s.items.map(i=>e.jsxs("li",{className:"order-item-row",children:[e.jsx("img",{src:i.image||"",alt:i.name,className:"item-image"}),e.jsxs("div",{children:[e.jsx("span",{children:i.name}),i.color&&e.jsxs("span",{children:[", Колір: ",i.color]}),i.size&&e.jsxs("span",{children:[", Розмір: ",i.size]}),e.jsxs("span",{children:[", Кількість: ",i.quantity]}),e.jsxs("span",{children:[", Ціна:"," ",i.priceSale?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"price-old",children:[i.price,"₴"]})," ",e.jsxs("span",{className:"price-sale",children:[i.priceSale,"₴"]})]}):e.jsxs(e.Fragment,{children:[i.finalPrice,"₴"]})]})]})]},i.id))}),e.jsxs("p",{children:["Загальна сума:"," ",s.items.reduce((i,l)=>i+l.finalPrice*l.quantity,0),"₴"]})]})},Ac=(s,t)=>{const[r,a]=d.useState(s);return d.useEffect(()=>{const n=setTimeout(()=>a(s),t);return()=>clearTimeout(n)},[s,t]),r},Rc=()=>{const{user:s}=z(),{orders:t,loading:r,fetchOrders:a,updateOrderStatus:n,error:c}=Bc(),[o,h]=d.useState(""),[i,l]=d.useState(""),[m,p]=d.useState(""),[f,u]=d.useState(1),g=10,[_,w]=d.useState(null),A=d.useRef(null),v=d.useRef(null),B=d.useRef(null),N=d.useRef(null),T=d.useRef(null),[Z,L]=d.useState(null),[P,U]=d.useState(0),b=s?.role===Ye.ADMIN,$=Ac(o,1e3),q=()=>{const R=document.activeElement;R===A.current?L("orderId"):R===v.current?L("dateFrom"):R===B.current?L("dateTo"):R===N.current?L("filterButton"):R===T.current?L("clearButton"):L(null)},O=d.useCallback(()=>{Z&&setTimeout(()=>{switch(Z){case"orderId":A.current?.focus(),A.current?.setSelectionRange(P,P);break;case"dateFrom":v.current?.focus();break;case"dateTo":B.current?.focus();break;case"filterButton":N.current?.focus();break;case"clearButton":T.current?.focus();break}L(null)},50)},[Z,P]),W=d.useCallback(()=>{if(!s)return;q();const R={orderId:$?+$:void 0,dateFrom:i||void 0,dateTo:m||void 0};a(b,R,f,g)},[s,$,i,m,f,g,a,b]);d.useEffect(()=>W(),[W]),d.useEffect(()=>{r||O()},[r,O]);const xe=async(R,y)=>{try{w(R),await n(R,y)}finally{w(null)}},te=()=>{L("clearButton"),h(""),l(""),p(""),u(1)};return e.jsxs("div",{className:"orders-container",children:[e.jsx("h1",{children:b?"Всі замовлення":"Мої замовлення"}),c&&e.jsx("div",{className:"error-message",children:c}),e.jsxs("div",{className:"filters  boxLine",children:[e.jsx(j,{ref:A,type:"number",label:"Номер замовлення",placeholder:"Номер замовлення",value:o,onChange:R=>{U(R.target.selectionStart||0),h(R.target.value)},onFocus:()=>L("orderId")}),e.jsx(j,{ref:v,type:"date",label:"Дата від",value:i,onChange:R=>l(R.target.value),onFocus:()=>L("dateFrom")}),e.jsx(j,{ref:B,type:"date",label:"Дата до",value:m,onChange:R=>p(R.target.value),onFocus:()=>L("dateTo")}),e.jsxs("div",{className:"boxLine",children:[e.jsx(C,{ref:N,onClick:W,variant:"link",children:"Фільтрувати"}),e.jsx(C,{ref:T,onClick:te,variant:"secondary",children:"Очистити"})]})]}),$!==o&&e.jsxs("div",{className:"search-indicator",children:["Пошук замовлення #",o,"..."]}),e.jsx("ul",{className:"orders-list",children:t.length?t.map(R=>e.jsx(Oc,{order:R,isAdmin:b,updatingOrderId:_,onStatusChange:xe},R.id)):e.jsx("li",{children:"Немає замовлень"})}),e.jsxs("div",{className:"pagination",children:[e.jsx(C,{onClick:()=>u(R=>Math.max(R-1,1)),disabled:f===1,variant:"link",children:"Попередня"}),e.jsxs("span",{children:["Сторінка ",f]}),e.jsx(C,{onClick:()=>u(R=>R+1),disabled:t.length<g,variant:"link",children:"Наступна"})]}),r&&!_&&e.jsx("div",{className:"loading",children:"Завантаження..."})]})},Fc=()=>e.jsx("div",{className:"page",children:e.jsx(Rc,{})}),zc=[{path:"/login",element:e.jsx(Ma,{})},{path:"/register",element:e.jsx(nn,{})},{path:"/forgot-password",element:e.jsx(sa,{})},{path:"/reset-password",element:e.jsx(oa,{})},{path:"/change-password",element:e.jsx(Ec,{})},{path:"/about",element:e.jsx(Za,{})},{path:"/contact",element:e.jsx(Lc,{})},{path:"/privacy",element:e.jsx(Fn,{})},{path:"/product/:id",element:e.jsx(Sc,{})},{path:"/category/:categorySlug",element:e.jsx(En,{})},{path:"/group/:collectionSlug",element:e.jsx(Bn,{})},{path:"/cart",element:e.jsx($n,{})},{path:"/checkout",element:e.jsx(La,{})},{path:"/delivery-terms",element:e.jsx(pa,{})}],Uc=[{path:"/",element:e.jsx(rs,{})},{path:"/home",element:e.jsx(rs,{})}],qc=[{path:"/profile",element:e.jsx(qa,{})},{path:"/orders",element:e.jsx(Fc,{})},{path:"/admin",element:e.jsx(xn,{}),children:[{index:!0,element:e.jsx(es,{})},{path:"createproduct",element:e.jsx(br,{})},{path:"edit-product/:id",element:e.jsx(ea,{})},{path:"create-category",element:e.jsx(Wt,{})},{path:"create-collection",element:e.jsx(Gt,{})},{path:"dashboard",element:e.jsx(es,{})}]}],os={path:"*",element:e.jsx(Da,{})},Mc="_footer_3cdk6_2",Dc="_container_3cdk6_11",Wc="_menu_3cdk6_18",Gc="_social_3cdk6_48",Vc="_copy_3cdk6_61",Hc="_mail_3cdk6_67",_e={footer:Mc,container:Dc,menu:Wc,social:Gc,copy:Vc,mail:Hc},Jc=[{title:"About",url:"/about"},{title:"Contact",url:"/contact"},{title:"Privacy",url:"/privacy"}],$s=()=>e.jsx("footer",{className:_e.footer,children:e.jsxs("div",{className:_e.container,children:[e.jsx("div",{className:_e.menu,children:e.jsx("ul",{children:Jc.map(s=>e.jsx("li",{children:e.jsx(X,{to:s.url,children:s.title})},s.title))})}),e.jsx("div",{className:_e.social,children:e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:e.jsx(As,{})})}),e.jsxs("div",{className:_e.copy,children:["© ",new Date().getFullYear()," ",e.jsx("a",{href:"mailto:office.fly.app@gmail.com",className:_e.mail,children:"FlyApp"})," ","Всі права захищені."]})]})}),Kc="_headerMenu_mvbzc_3",Xc="_menuList_mvbzc_25",Yc="_menuListOpen_mvbzc_49",Qc="_menuItem_mvbzc_64",Zc="_menuLink_mvbzc_81",eo="_submenu_mvbzc_106",so="_submenuItem_mvbzc_136",to="_arrow_mvbzc_159",ro="_open_mvbzc_168",ao="_btnLink_mvbzc_172",no="_burger_mvbzc_178",co="_block_mvbzc_215",D={headerMenu:Kc,menuList:Xc,menuListOpen:Yc,menuItem:Qc,menuLink:Zc,submenu:eo,submenuItem:so,arrow:to,open:ro,btnLink:ao,burger:no,block:co},oo="_subsubmenu_z9ef5_1",io="_open_z9ef5_15",lo="_submenuItem_z9ef5_19",uo="_categoryContainer_z9ef5_25",ho="_categoryLink_z9ef5_39",mo="_spacer_z9ef5_54",oe={subsubmenu:oo,open:io,submenuItem:lo,categoryContainer:uo,categoryLink:ho,spacer:mo},po=({categories:s})=>{const[t,r]=d.useState(new Set),a=typeof window<"u"&&window.innerWidth<768,n=i=>{r(l=>{const m=new Set(l);return m.has(i)?m.delete(i):m.add(i),m})},c=i=>{a||r(l=>new Set(l).add(i))},o=i=>{a||r(l=>{const m=new Set(l);return m.delete(i),m})},h=(i=null)=>{const l=s.filter(m=>i===null?!m.parentId:m.parentId===i);return l.length?e.jsx("ul",{className:`${i===null?oe.submenu:oe.subsubmenu} ${i!==null&&t.has(i)?oe.open:""}`,children:l.map(m=>{const p=s.some(u=>u.parentId===m.id),f=t.has(m.id);return e.jsxs("li",{className:oe.submenuItem,onMouseEnter:p?()=>c(m.id):void 0,onMouseLeave:p?()=>o(m.id):void 0,children:[e.jsxs("div",{className:oe.categoryContainer,onClick:a&&p?()=>n(m.id):void 0,children:[e.jsx("a",{href:`/category/${m.slug}`,className:oe.categoryLink,children:m.name}),p?e.jsx("span",{className:oe.iconContainer,children:f?e.jsx(ms,{size:16}):e.jsx(ps,{size:16})}):e.jsx("span",{className:oe.spacer})]}),p&&f&&h(m.id)]},m.id)})}):null};return e.jsx(e.Fragment,{children:h()})},go=({collections:s})=>e.jsx(e.Fragment,{children:s.map(t=>e.jsx("li",{className:D.submenuItem,children:e.jsx("a",{href:`/group/${t.slug||t.id}`,className:D.submenuLink,children:t.name})},t.id))});function xo(s){const[t,r]=d.useState(()=>typeof window<"u"?window.matchMedia(s).matches:!1);return d.useEffect(()=>{const a=window.matchMedia(s),n=c=>r(c.matches);return a.addEventListener("change",n),()=>a.removeEventListener("change",n)},[s]),t}const fo=({textColor:s})=>{const[t,r]=d.useState(null),[a,n]=d.useState(!1),[c,o]=d.useState(null),{categories:h,fetchCategories:i}=Ue(),{collections:l,fetchCollections:m}=Ve(),{user:p}=z();d.useEffect(()=>{i(),m()},[i,m]);const f=d.useMemo(()=>{const B=[{label:"Головна",link:"/"},{label:"Магазин",submenu:!0},{label:"Про нас",link:"/about"},{label:"Контакти",link:"/contact"}];return p&&p.role===Ye.ADMIN?[...B,{label:"Адмінка",link:"/admin"}]:B},[p&&p.role]),u=()=>{n(!a),o(null)},g=B=>{o(c===B?null:B)},_={color:s,transition:"color 0.3s ease",backgroundColor:"transparent"},w={borderColor:`transparent ${s} ${s} transparent`,transition:"border-color 0.3s ease"},A={backgroundColor:s,transition:"background-color 0.3s ease"},v=xo("(max-width: 950px)");return e.jsxs("nav",{className:D.headerMenu,children:[v&&e.jsxs(C,{className:`${D.burger} ${a?D.open:""}`,onClick:u,"aria-label":"Toggle menu",style:_,children:[e.jsx("span",{style:A}),e.jsx("span",{style:A}),e.jsx("span",{style:A})]}),e.jsx("ul",{className:`${D.menuList} ${a?D.menuListOpen:""}`,children:f.map((B,N)=>e.jsx("li",{className:D.menuItem,onMouseEnter:()=>!a&&r(N),onMouseLeave:()=>!a&&r(null),children:B.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:D.btnLink,onClick:()=>g(N),"aria-expanded":c===N,style:_,children:[B.label,e.jsx("span",{className:`${D.arrow} ${c===N?D.open:""}`,style:w})]}),(t===N||c===N)&&e.jsxs("ul",{className:D.submenu,children:[e.jsxs("div",{className:D.block,children:[e.jsx("li",{className:"submenuTitle",children:"Категорії"}),e.jsx(po,{categories:h})]}),e.jsxs("div",{className:D.block,children:[e.jsx("li",{className:"submenuTitle",children:"Колекції"}),e.jsx(go,{collections:l})]})]})]}):e.jsx("a",{href:B.link,className:D.menuLink,style:_,children:B.label})},N))})]})},jo="_header_7lgyu_3",_o="_logo_7lgyu_38",yo="_main_7lgyu_65",bo="_sub_7lgyu_77",vo="_authBlock_7lgyu_107",No="_authBlockUser_7lgyu_137",So="_userName_7lgyu_151",Co="_authButton_7lgyu_172",wo="_shoppingCart_7lgyu_288",ne={header:jo,logo:_o,main:yo,sub:bo,authBlock:vo,authBlockUser:No,userName:So,authButton:Co,shoppingCart:wo},Ps=()=>{const{logout:s,accessToken:t,user:r}=z(),{theme:a}=bs(),[n,c]=d.useState("#333333"),o=d.useRef(null),[h,i]=d.useState(!1),{cart:l,fetchCart:m}=Ne();return d.useEffect(()=>{(!h||r&&!l.length)&&(m(),i(!0))},[r?.id]),d.useEffect(()=>{t||i(!1)},[t]),d.useEffect(()=>{const p=()=>{const w=document.querySelectorAll("[data-bg]"),A=o.current?.getBoundingClientRect();if(!A)return;let v=a==="dark";w.forEach(B=>{const N=B.getBoundingClientRect();if(N.top<A.bottom&&N.bottom>A.top){const T=B.getAttribute("data-bg");T==="dark"?v=!0:T==="light"&&(v=!1)}}),c(v?"#ffffff":"#333333")},f=new IntersectionObserver(w=>{w.forEach(A=>{A.isIntersecting&&p()})},{rootMargin:"0px 0px -80% 0px"});document.querySelectorAll("section, .hero, .section, main > div, [data-section]").forEach(w=>f.observe(w)),p();let g;const _=()=>{clearTimeout(g),g=window.setTimeout(p,100)};return window.addEventListener("scroll",_),()=>{f.disconnect(),clearTimeout(g),window.removeEventListener("scroll",_)}},[a]),e.jsxs("div",{ref:o,className:ne.header,style:{color:n,transition:"color 0.3s ease"},children:[e.jsx(X,{to:"/home",children:e.jsxs("div",{className:ne.logo,children:[e.jsx("span",{className:ne.main,children:"fbe"}),e.jsx("span",{className:ne.sub,children:"full body era"})]})}),e.jsx(fo,{textColor:n}),e.jsxs("div",{className:`${ne.authBlock} ${r?ne.authBlockUser:""}`,children:[t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:ne.userName,style:{color:n,transition:"color 0.3s ease"},children:e.jsxs(X,{to:"/profile",className:"grey boxLine",children:[e.jsx(Qe,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease"}}),(r?.last_name?.[0]??"").toUpperCase(),(r?.first_name?.[0]??"").toUpperCase()]})}),e.jsx(C,{className:ne.authButton,onClick:s,style:{color:n,borderColor:n,backgroundColor:"transparent",transition:"all 0.3s ease"},children:"Logout"})]}):e.jsx(X,{to:"/login",children:e.jsx(Qe,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease"}})}),e.jsxs(X,{to:"/cart",className:ne.shoppingCart,children:[e.jsx(Rs,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease",marginLeft:"10px"}}),e.jsx("span",{children:l&&l.length>0?l.length:""})]})]})]})},ko="_dark_1eti1_1",Io="_darkContent_1eti1_11",$o="_title_1eti1_20",Po="_description_1eti1_25",Lo="_headerTop_1eti1_46",Eo="_layout_1eti1_68",Bo="_content_1eti1_106",To="_contentSection_1eti1_115",J={dark:ko,darkContent:Io,title:$o,description:Po,headerTop:Lo,layout:Eo,content:Bo,contentSection:To};function Oo({children:s}){return e.jsxs("div",{className:J.layout,children:[e.jsx(Ps,{}),e.jsxs("main",{className:J.content,children:[e.jsx("section",{"data-bg":"dark",className:`hero-section ${J.headerSection}`,children:e.jsx("div",{className:J.dark,children:e.jsxs("div",{className:J.darkContent,children:[e.jsx("h1",{className:J.title,children:"FULL BODY ERA"}),e.jsx("p",{className:J.description,children:"Для тих, хто грає красиво"})]})})}),e.jsx("section",{"data-bg":"light",className:`content-section ${J.contentSection}`,children:s})]}),e.jsx($s,{})]})}function is({children:s}){return e.jsxs("div",{className:J.layout,children:[e.jsxs("section",{"data-bg":"light",className:`content-section ${J.contentSection} `,children:[e.jsxs("ul",{className:J.headerTop,children:[e.jsx("li",{children:"Швидка доставка"}),e.jsx("li",{children:"Доставка від 5000грн по Україні безкоштовна"}),e.jsx("li",{children:"Обмін і Повернення"})]}),e.jsx(Ps,{})]}),e.jsx("section",{"data-bg":"light",className:`content-section ${J.contentSection}`,children:e.jsx("main",{className:J.content,children:s})}),e.jsx($s,{})]})}function Ao(){const{theme:s}=bs(),{accessToken:t}=z();return e.jsx("div",{className:`${s}`,children:e.jsxs(Fs,{children:[Uc.map(({path:r,element:a})=>e.jsx(Ce,{path:r,element:e.jsx(Oo,{children:a})},r)),zc.map(({path:r,element:a})=>e.jsx(Ce,{path:r,element:e.jsx(is,{children:a})},r)),qc.map(({path:r,element:a,children:n})=>e.jsx(Ce,{path:r,element:t?e.jsx(is,{children:a}):e.jsx(zs,{to:"/login",replace:!0}),children:n&&n.map(c=>e.jsx(Ce,{index:c.index,path:c.path,element:c.element},c.path||"index"))},r)),e.jsx(Ce,{path:os.path,element:os.element})]})})}Us.createRoot(document.getElementById("root")).render(e.jsx(ve.StrictMode,{children:e.jsx(qs,{basename:"/",children:e.jsx(Ao,{})})}));
