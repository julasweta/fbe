import{c as oe,a as Rs,R as ve,j as e,r as u,P as ms,F as ps,S as gs,X as xs,C as fs,b as js,d as Ve,e as _s,T as bs,f as ys,u as de,g as ue,L as V,h as Se,i as Ue,k as Fs,l as we,m as vs,N as Ns,E as qs,n as Ss,O as Us,o as Ms,p as Ke,q as zs,s as ts,t as Ds,v as Ws,w as Ce,x as Gs,y as Vs,B as Hs}from"./vendor-CC_e1QG7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const ws=oe(s=>({theme:localStorage.getItem("theme")||"light",toggleTheme:()=>s(t=>{const r=t.theme==="light"?"dark":"light";return localStorage.setItem("theme",r),{theme:r}}),setTheme:t=>s(()=>(localStorage.setItem("theme",t),{theme:t}))})),rs=localStorage.getItem("user"),Js=rs?JSON.parse(rs):null,q=oe(s=>({accessToken:localStorage.getItem("accessToken")||null,refreshToken:localStorage.getItem("refreshToken")||null,user:Js,login:(t,r,a)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),localStorage.setItem("user",JSON.stringify(a)),s({accessToken:t,refreshToken:r,user:a})},setUser:t=>{t?localStorage.setItem("user",JSON.stringify(t)):localStorage.removeItem("user"),s({user:t})},setTokens:(t,r)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),s({accessToken:t,refreshToken:r})},logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("cart"),s({accessToken:null,refreshToken:null,user:null})},forgotPassword:t=>{he.forgotPassword(t)}})),We=oe(s=>({users:[],setUsers:t=>s({users:t}),updateUserInStore:t=>s(r=>({users:r.users.map(a=>a.id===t.id?t:a)})),removeUser:t=>s(r=>({users:r.users.filter(a=>a.id!==t)}))})),le={async getAll(s){const{data:t}=await S.get(`products?limit=${s?.limit}&skip=${s?.skip}&category=${s?.categorySlug}&collection=${s?.collectionSlug}`);return t.data},async getById(s){const{data:t}=await S.get(`products/${s}`);return t},async getProductById(s){return this.getById(s)},async addProduct(s){const{data:t}=await S.post("products",s);return t},async updateProduct(s,t){console.log("ProductService: Updating product:",s,t);const{data:r}=await S.patch(`products/${s}`,t);return r},async deleteProduct(s){console.log("ProductService: Deleting product:",s),await S.delete(`products/${s}`)}},Me=oe(s=>({products:[],isLoading:!1,error:null,setProducts:t=>s({products:t,error:null}),addProduct:t=>s(r=>({products:[...r.products,t],error:null})),updateProduct:t=>s(r=>({products:r.products.map(a=>a.id===t.id?t:a),error:null})),removeProduct:t=>s(r=>({products:r.products.filter(a=>a.id!==t),error:null})),setLoading:t=>s({isLoading:t}),setError:t=>s({error:t,isLoading:!1}),fetchProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping fetchProducts on server"),s({isLoading:!1,error:null,products:[]});return}s({isLoading:!0,error:null});try{const r=await le.getAll(t);s({products:r,isLoading:!1})}catch(r){console.error("❌ Error fetching products:",r),s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1})}},appendProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping appendProducts on server");return}s({isLoading:!0,error:null});try{const r=await le.getAll(t);s(a=>({products:[...a.products,...r],isLoading:!1}))}catch(r){s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1})}},createProduct:async t=>{if(typeof window>"u")throw new Error("createProduct can only be called on client side");s({isLoading:!0,error:null});try{const r=await le.addProduct(t);s(a=>({products:[...a.products,r],isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}},editProduct:async(t,r)=>{if(typeof window>"u")throw new Error("editProduct can only be called on client side");s({isLoading:!0,error:null});try{const a=await le.updateProduct(t,r);s(n=>({products:n.products.map(o=>o.id===t?a:o),isLoading:!1}))}catch(a){throw s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1}),a}},deleteProduct:async t=>{if(typeof window>"u")throw new Error("deleteProduct can only be called on client side");s({isLoading:!0,error:null});try{await le.deleteProduct(t),s(r=>({products:r.products.filter(a=>a.id!==t),isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}}})),he={register:s=>S.post("auth/register",s),async login(s){console.log("[AuthService] login() called with:",s.email);let t;try{console.log("[AuthService] Sending login request to /auth/login");const r=await S.post("auth/login",s);console.log("[AuthService] /auth/login response:",r),t=r.data}catch(r){if(console.error("[AuthService] Error during /auth/login request:",r),console.error("[AuthService] Error response:",r?.response?.data),console.error("[AuthService] Error status:",r?.response?.status),r?.response){const a=r.response.status,n=r.response.data||{};if(console.log("[AuthService] Processing error - status:",a),console.log("[AuthService] Response data:",n),a===401){let o="Неправильний email або пароль";throw typeof n=="string"?o=n:n.message&&typeof n.message=="string"?o=n.message:n.error&&typeof n.error=="string"?o=n.error:n.detail&&typeof n.detail=="string"&&(o=n.detail),console.log("[AuthService] Throwing 401 error with message:",o),new Error(o)}if(a===400){let o="Некоректні дані входу";throw typeof n=="string"?o=n:n.message&&typeof n.message=="string"?o=n.message:n.error&&typeof n.error=="string"&&(o=n.error),new Error(o)}if(n.message&&typeof n.message=="string")throw new Error(n.message);if(n.error&&typeof n.error=="string")throw new Error(n.error)}throw r instanceof Error?r:new Error("Помилка під час входу")}if(!t.accessToken||!t.refreshToken)throw console.error("[AuthService] Missing tokens in response"),new Error("Сервер не повернув токени авторизації");q.getState().setTokens(t.accessToken,t.refreshToken);try{const{data:r}=await this.me();return q.getState().login(t.accessToken,t.refreshToken,r),r}catch(r){throw console.error("[AuthService] Failed to fetch user after login:",r),q.getState().logout(),new Error("Не вдалося отримати дані користувача")}},async refresh(){const s=q.getState().refreshToken;if(!s)throw new Error("Токен оновлення відсутній");try{const{data:t}=await S.post("auth/refresh",{refresh:s});if(!t.accessToken||!t.refreshToken)throw new Error("Сервер не повернув нові токени");q.getState().setTokens(t.accessToken,t.refreshToken)}catch{throw q.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}},async me(){try{return await S.get("users/me")}catch(s){if(s?.response?.status===401)try{return await this.refresh(),await S.get("users/me")}catch{throw q.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}throw s}},async updateUser(s,t){try{const{data:r}=await S.patch(`users/update/${t}`,s),a=q.getState();return a.accessToken&&a.refreshToken&&q.getState().login(a.accessToken,a.refreshToken,r),r}catch(r){throw new Error(r?r.response.data.error.message:"Помилка оновлення профілю")}},async logout(){const s=q.getState().refreshToken;if(s)try{await S.post("auth/logout",{refresh:s})}catch{}q.getState().logout()},async forgotPassword(s){try{await S.post("auth/forgot-password",{email:s})}catch(t){throw new Error(t instanceof Error?t.message:"Помилка оновлення")}},async resetPassword(s,t,r){const a={email:s,resetCode:t,newPassword:r};try{await S.post("auth/reset-password",a)}catch(n){throw new Error(n instanceof Error?n.message:"Помилка оновлення")}},async changePassword(s,t){const r={currentPassword:s,newPassword:t};try{await S.post("auth/change-password",r)}catch(a){throw new Error(a?a.response.data.error.message:"Помилка оновлення")}}},Ks="https://fbe.onrender.com",S=Rs.create({baseURL:Ks});S.interceptors.request.use(s=>{if(s.data instanceof FormData?delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json",s.headers.Accept="*/*",s.url&&!s.url.includes("auth/login")&&!s.url.includes("auth/register")){const t=localStorage.getItem("accessToken")||null;t&&(s.headers.Authorization=`Bearer ${t}`)}return s},s=>Promise.reject(s));let ke=!1;const He=[];S.interceptors.response.use(s=>s,async s=>{const t=s.config;if(s.response&&s.response.status===401&&t&&t.url&&!t.url.includes("auth/login")&&!t.url.includes("auth/register")&&!t.url.includes("auth/refresh")){if(!ke)if(ke=!0,localStorage.getItem("refreshToken"))try{if(await he.refresh(),ke=!1,Ys(),t)return S(t)}catch(a){return console.log("Помилка при оновленні токена:",a),q.getState().logout(),ke=!1,console.log("Не вдалося оновити токен."),Promise.reject(s)}else return ke=!1,q.getState().logout(),Promise.reject(s);return new Promise((r,a)=>{Xs(()=>{t?r(S(t)):a(new Error("Original request is undefined"))})})}return Promise.reject(s)});const Xs=s=>{He.push(s)},Ys=()=>{for(console.log("Оновлення токенів успішно завершене.");He.length;){const s=He.pop();s&&s()}},$e="/categories",Be={async getAll(){return(await S.get($e)).data},async getOne(s){return(await S.get(`${$e}/${s}`)).data},async create(s){return(await S.post($e,s)).data},async remove(s){await S.delete(`${$e}/${s}`)},async update(s,t){return(await S.patch(`${$e}/${s}`,t)).data}},ze=oe(s=>({categories:[],loading:!1,error:null,fetchCategories:async()=>{s({loading:!0,error:null});try{const t=await Be.getAll();s({categories:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження категорій",loading:!1})}},addCategory:async t=>{try{const r=await Be.create(t);if(!r)throw new Error("Категорія не була оновлена");return s(a=>({categories:[...a.categories,r]})),r}catch(r){throw s({error:r.message||"Помилка оновлення категорії",loading:!1}),r}},updateCategory:async(t,r)=>{try{const a=await Be.update(t,r);if(!a)throw new Error("Категорія не була оновлена");return s(n=>({categories:n.categories.map(o=>o.id===t?a:o)})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},removeCategory:t=>s(r=>({categories:r.categories.filter(a=>a.id!==t)}))})),Qs="_inputWrapper_18ahu_1",Zs="_radioCheckboxWrapper_18ahu_8",et="_label_18ahu_14",st="_required_18ahu_22",tt="_input_18ahu_1",rt="_radioCheckboxLabel_18ahu_43",at="_disabled_18ahu_57",nt="_radioCheckboxText_18ahu_77",ot="_errorBorder_18ahu_99",ct="_errorText_18ahu_103",H={inputWrapper:Qs,radioCheckboxWrapper:Zs,label:et,required:st,input:tt,radioCheckboxLabel:rt,disabled:at,radioCheckboxText:nt,errorBorder:ot,errorText:ct},j=ve.forwardRef(({label:s,error:t,type:r="text",placeholder:a,disabled:n=!1,required:o=!1,id:c,name:h,...i},l)=>{const m=r==="radio",g=r==="checkbox";return e.jsxs("div",{className:`${H.inputWrapper} ${m||g?H.radioCheckboxWrapper:""}`,children:[m||g?e.jsxs("label",{className:`${H.radioCheckboxLabel} ${n?H.disabled:""}`,children:[e.jsx("input",{ref:l,className:`${H.input} ${t?H.errorBorder:""}`,type:r,placeholder:a,disabled:n,required:o,id:c,name:h,...i}),e.jsxs("span",{className:H.radioCheckboxText,children:[s," ",o&&e.jsx("span",{className:H.required,children:"*"})]})]}):e.jsxs(e.Fragment,{children:[s&&e.jsxs("label",{className:H.label,children:[s," ",o&&e.jsx("span",{className:H.required,children:"*"})]}),e.jsx("input",{ref:l,type:r,placeholder:a,disabled:n,required:o,id:c,name:h,className:`${H.input} ${t?H.errorBorder:""}`,...i})]}),t&&e.jsx("p",{className:H.errorText,children:t})]})});j.displayName="Input";const it="_container_1riki_1",lt="_header_1riki_10",dt="_btn_1riki_33",ut="_btnPrimary_1riki_66",ht="_btnSuccess_1riki_75",mt="_btnSecondary_1riki_84",pt="_btnEdit_1riki_95",gt="_btnDelete_1riki_106",xt="_btnSave_1riki_117",ft="_btnCancel_1riki_127",jt="_toggleBtn_1riki_137",_t="_createForm_1riki_151",bt="_formInputs_1riki_167",yt="_inputGroup_1riki_179",vt="_formInput_1riki_167",Nt="_formActions_1riki_211",St="_categoriesSection_1riki_217",wt="_sectionHeader_1riki_217",Ct="_categoryItem_1riki_246",kt="_categoryDisplay_1riki_255",$t="_categoryLeft_1riki_270",It="_expandButton_1riki_277",Pt="_spacer_1riki_284",Lt="_categoryInfo_1riki_289",Et="_categoryIcon_1riki_296",Bt="_categoryText_1riki_301",Tt="_categoryName_1riki_307",At="_categorySlug_1riki_313",Ot="_parentInfo_1riki_323",Rt="_categoryActions_1riki_329",Ft="_editForm_1riki_335",qt="_editHeader_1riki_344",Ut="_editingLabel_1riki_347",Mt="_editInputs_1riki_356",zt="_inputWrapper_1riki_368",Dt="_editInput_1riki_356",Wt="_editActions_1riki_394",Gt="_children_1riki_401",Vt="_emptyState_1riki_408",Ht="_emptyIcon_1riki_413",Jt="_loading_1riki_428",Kt="_error_1riki_429",x={container:it,header:lt,btn:dt,btnPrimary:ut,btnSuccess:ht,btnSecondary:mt,btnEdit:pt,btnDelete:gt,btnSave:xt,btnCancel:ft,toggleBtn:jt,createForm:_t,formInputs:bt,inputGroup:yt,formInput:vt,formActions:Nt,categoriesSection:St,sectionHeader:wt,categoryItem:Ct,categoryDisplay:kt,categoryLeft:$t,expandButton:It,spacer:Pt,categoryInfo:Lt,categoryIcon:Et,categoryText:Bt,categoryName:Tt,categorySlug:At,parentInfo:Ot,categoryActions:Rt,editForm:Ft,editHeader:qt,editingLabel:Ut,editInputs:Mt,inputWrapper:zt,editInput:Dt,editActions:Wt,children:Gt,emptyState:Vt,emptyIcon:Ht,loading:Jt,error:Kt},Xt=()=>{const{categories:s,loading:t,error:r,fetchCategories:a,addCategory:n,removeCategory:o,updateCategory:c}=ze(),[h,i]=u.useState(null),[l,m]=u.useState({}),[g,p]=u.useState({name:"",slug:"",parentId:null,imageUrl:""}),[d,f]=u.useState(!1),[_,k]=u.useState(new Set);u.useEffect(()=>{a()},[a]),u.useEffect(()=>{if(s.length>0){const y=s.map(P=>P.id);k(new Set(y))}},[s]);const A=async()=>{if(!g.name?.trim()){alert("Введіть назву категорії");return}try{const y={...g,slug:g.slug||g.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")};await n(y),p({name:"",slug:"",parentId:null,imageUrl:""}),f(!1),alert("Категорія створена")}catch(y){alert(y.message||"Помилка при створенні категорії")}},v=async y=>{const z=s.some(T=>T.parentId===y)?"Ця категорія має підкатегорії. Видалити разом з усіма підкатегоріями?":"Ви дійсно хочете видалити категорію?";if(confirm(z))try{await Be.remove(y),o(y),k(T=>{const W=new Set(T);return W.delete(y),W})}catch(T){alert(T.message||"Помилка при видаленні категорії")}},R=y=>{i(y.id),m({name:y.name,slug:y.slug,parentId:y.parentId,imageUrl:y.imageUrl||""})},N=async()=>{if(l.name?.trim())try{if(h){const y=await Be.update(h,{name:l.name,parentId:l.parentId,slug:l.slug,imageUrl:l.imageUrl});l.id&&c(l.id,y)}else{const y={name:l.name,parentId:l.parentId||null,slug:l.slug||l.name.toLowerCase().replace(/\s+/g,"-"),imageUrl:l.imageUrl||""};n(y)}i(null),m({})}catch(y){alert(y.message||"Помилка при збереженні категорії")}},$=()=>{i(null),m({})},U=y=>{k(P=>{const z=new Set(P);return z.has(y)?z.delete(y):z.add(y),z})},E=y=>s.some(P=>P.parentId===y),L=y=>{if(!y)return"Коренева категорія";const P=s.find(z=>z.id===y);return P?P.name:"Невідома категорія"},M=(y=null,P=0)=>{const z=s.filter(T=>T.parentId===y);return z.length?z.map(T=>{const W=_.has(T.id),fe=E(T.id);return e.jsx("div",{className:x.categoryItem,style:{marginLeft:`${P*20}px`},children:h===T.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування категорії:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва категорії"}),e.jsx(j,{value:l.name||"",onChange:re=>m({...l,name:re.target.value})})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(j,{value:l.slug||"",onChange:re=>m({...l,slug:re.target.value}),required:!0,placeholder:"Введіть slug"})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:l.imageUrl||"",onChange:re=>m({...l,imageUrl:re.target.value})})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:N,className:x.btn,children:[e.jsx(gs,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:$,className:x.btn,children:[e.jsx(xs,{size:16})," Скасувати"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.categoryDisplay,children:[e.jsxs("div",{className:x.categoryLeft,children:[e.jsx("div",{className:x.expandButton,children:fe?e.jsx("button",{onClick:()=>U(T.id),className:x.toggleBtn,children:W?e.jsx(fs,{size:16}):e.jsx(js,{size:16})}):e.jsx("div",{className:x.spacer})}),e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(Ve,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:T.name}),T.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",T.slug]}),T.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",T.imageUrl]}),T.parentId&&e.jsxs("span",{className:x.parentInfo,children:["в категорії: ",L(T.parentId)]})]})]})]}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>R(T),className:x.btn,children:e.jsx(_s,{size:16})}),e.jsx("button",{onClick:()=>v(T.id),className:x.btn,children:e.jsx(bs,{size:16})})]})]}),fe&&W&&e.jsx("div",{className:x.children,children:M(T.id,P+1)})]})},T.id)}):null};return t?e.jsx("div",{children:"Завантаження категорій..."}):r?e.jsxs("div",{children:["Помилка: ",r]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління категоріями"}),e.jsxs("button",{onClick:()=>f(!d),className:x.btn,children:[e.jsx(ms,{size:16})," Додати категорію"]})]}),d&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову категорію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва категорії *"}),e.jsx(j,{value:g.name||"",onChange:y=>p(P=>({...P,name:y.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug"}),e.jsx(j,{value:g.slug||"",onChange:y=>p(P=>({...P,slug:y.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:g.imageUrl||"",onChange:y=>p(P=>({...P,imageUrl:y.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Батьківська категорія"}),e.jsxs("select",{value:g.parentId||"",onChange:y=>p(P=>({...P,parentId:y.target.value?Number(y.target.value):null})),children:[e.jsx("option",{value:"",children:"Коренева категорія"}),s.map(y=>e.jsxs("option",{value:y.id,children:[y.parentId?`${L(y.parentId)} → `:"",y.name]},y.id))]})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:A,className:x.btn,children:[e.jsx(ps,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>f(!1),className:x.btn,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.categoriesSection,children:[e.jsx("h3",{children:"Список категорій"}),s.length===0?e.jsx("p",{children:"Категорії відсутні"}):M()]})]})},Ie="/collections",Te={async getAll(){return(await S.get(Ie)).data},async getOne(s){return(await S.get(`${Ie}/${s}`)).data},async create(s){return(await S.post(Ie,s)).data},async remove(s){await S.delete(`${Ie}/${s}`)},async update(s,t){return(await S.patch(`${Ie}/${s}`,t)).data}},Xe=oe(s=>({collections:[],loading:!1,error:null,fetchCollections:async()=>{s({loading:!0,error:null});try{const t=await Te.getAll();s({collections:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження колекцій",loading:!1})}},addCollection:t=>s(r=>({collections:[...r.collections,t]})),updateCollection:async(t,r)=>{try{const a=await Te.update(t,r);if(!a)throw new Error("Категорія не була оновлена");return s(n=>({collections:n.collections.map(o=>(o.id===t,o))})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},removeCollection:t=>s(r=>({collections:r.collections.filter(a=>a.id!==t)}))})),Yt=()=>{const{collections:s,loading:t,error:r,fetchCollections:a,addCollection:n,removeCollection:o}=Xe(),[c,h]=u.useState(null),[i,l]=u.useState({}),[m,g]=u.useState({name:"",slug:"",imageUrl:""}),[p,d]=u.useState(!1);u.useEffect(()=>{a()},[a]);const f=async()=>{if(!m.name?.trim()){alert("Введіть назву колекції");return}try{const N={...m,slug:m.slug||m.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")},$=await Te.create(N);n($),g({name:"",slug:"",imageUrl:""}),d(!1)}catch(N){alert(N.message||"Помилка при створенні колекції")}},_=async N=>{if(confirm("Ви дійсно хочете видалити колекцію?"))try{await Te.remove(N),o(N)}catch($){alert($.message||"Помилка при видаленні колекції")}},k=N=>{h(N.id),l({name:N.name,slug:N.slug,imageUrl:N.imageUrl||""})},A=async()=>{if(!(!c||!i.name?.trim()))try{const N=await Te.update(c,i);o(c),n(N),h(null),l({})}catch(N){alert(N.message||"Помилка при оновленні колекції")}},v=()=>{h(null),l({})},R=()=>s.length===0?null:s.map(N=>e.jsx("div",{className:x.collectionItem,children:c===N.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування колекції:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва колекції"}),e.jsx(j,{value:i.name||"",onChange:$=>l({...i,name:$.target.value}),placeholder:"Назва колекції",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(j,{value:i.slug||"",onChange:$=>l({...i,slug:$.target.value}),placeholder:"URL slug",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:i.imageUrl||"",onChange:$=>l({...i,imageUrl:$.target.value}),placeholder:"URL зображення",className:x.editInput})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:A,className:`${x.btn} ${x.btnSave}`,children:[e.jsx(gs,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:v,className:`${x.btn} ${x.btnCancel}`,children:[e.jsx(xs,{size:16})," Скасувати"]})]})]}):e.jsxs("div",{className:x.categoryDisplay,children:[e.jsx("div",{className:x.categoryLeft,children:e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(Ve,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:N.name}),N.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",N.slug]}),N.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",N.imageUrl]})]})]})}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>k(N),className:`${x.btn} ${x.btnEdit}`,title:"Редагувати",children:e.jsx(_s,{size:16})}),e.jsx("button",{onClick:()=>_(N.id),className:`${x.btn} ${x.btnDelete}`,title:"Видалити",children:e.jsx(bs,{size:16})})]})]})},N.id));return t?e.jsx("div",{className:x.loading,children:"Завантаження колекцій..."}):r?e.jsxs("div",{className:x.error,children:["Помилка: ",r]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління колекціями"}),e.jsxs("button",{onClick:()=>d(!p),className:`${x.btn} ${x.btnPrimary}`,children:[e.jsx(ms,{size:16})," Додати колекцію"]})]}),p&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову колекцію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва колекції *"}),e.jsx(j,{value:m.name||"",onChange:N=>g($=>({...$,name:N.target.value})),placeholder:"Введіть назву колекції",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug (URL-адреса)"}),e.jsx(j,{value:m.slug||"",onChange:N=>g($=>({...$,slug:N.target.value})),placeholder:"auto-generated або введіть власний",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(j,{value:m.imageUrl||"",onChange:N=>g($=>({...$,imageUrl:N.target.value})),placeholder:"URL зображення",className:x.formInput})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:f,className:`${x.btn} ${x.btnSuccess}`,children:[e.jsx(ps,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>d(!1),className:`${x.btn} ${x.btnSecondary}`,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.collectionsSection,children:[e.jsxs("div",{className:x.sectionHeader,children:[e.jsx("h3",{children:"Список колекцій"}),e.jsxs("div",{className:x.collectionCount,children:["Всього: ",s.length," колекцій"]})]}),s.length===0?e.jsxs("div",{className:x.emptyState,children:[e.jsx(Ve,{size:48,className:x.emptyIcon}),e.jsx("p",{children:"Колекції відсутні"}),e.jsx("p",{children:"Створіть першу колекцію для початку роботи"})]}):e.jsx("div",{className:x.collectionsList,children:R()})]})]})},Qt="_createProduct_1sk0j_2",Zt="_form_1sk0j_22",er="_field_1sk0j_28",sr="_group_1sk0j_33",tr="_btn_1sk0j_51",rr="_submit_1sk0j_80",ar="_checkboxGroup_1sk0j_94",nr="_checkboxLabel_1sk0j_100",or="_variantBlock_1sk0j_140",F={createProduct:Qt,form:Zt,field:er,group:sr,btn:tr,submit:rr,checkboxGroup:ar,checkboxLabel:nr,variantBlock:or,delete:"_delete_1sk0j_144"},Cs=["XS","S","M","L","XL","XXL"],Ye=["RED","GREEN","BLUE","BLACK","WHITE","YELLOW","ORANGE","PURPLE","PINK","GREY","BROWN"],De={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL"},ks={RED:"Red",GREEN:"Green",BLUE:"Blue",BLACK:"Black",WHITE:"White",YELLOW:"Yellow",ORANGE:"Orange",PURPLE:"Purple",PINK:"Pink",GREY:"Grey",BROWN:"Brown"},$s={RED:"#b34a4a",GREEN:"#4a7c59",BLUE:"#527fb3",BLACK:"#1e1e1e",WHITE:"#f5f5f5",YELLOW:"#d4c35b",ORANGE:"#d87a4a",PURPLE:"#6a4a7c",PINK:"#ff99bb",GREY:"#808080",BROWN:"#8b5e3c"},cr="_select_18v07_35",ir="_caruselBox_18v07_55",lr="_wrapper_18v07_74",dr="_categoryBox_18v07_78",ur="_imgBox_18v07_99",Ee={select:cr,caruselBox:ir,wrapper:lr,categoryBox:dr,imgBox:ur};function Qe({value:s,onChange:t,includeEmpty:r=!0,valueKey:a="id"}){const{categories:n}=ze(),o=(c=null,h=0)=>n.filter(i=>i.parentId===c).map(i=>e.jsxs(ve.Fragment,{children:[e.jsxs("option",{value:a==="slug"?i.slug:i.id,children:["— ".repeat(h),i.name]}),o(i.id,h+1)]},i.id));return e.jsxs("select",{value:s??"",onChange:c=>t(a==="id"?Number(c.target.value):c.target.value),className:Ee.select,children:[r&&e.jsx("option",{value:"",children:"Виберіть категорію"}),o(null,0)]})}const hr="_select_1ag6g_1",mr={select:hr};function Ze({value:s,onChange:t,multiple:r=!1,valueKey:a="id"}){const{collections:n,loading:o}=Xe();return o?e.jsx("p",{children:"Завантаження..."}):e.jsxs("select",{multiple:r,value:s??"",onChange:c=>{if(r){const h=Array.from(c.target.selectedOptions,i=>a==="id"?Number(i.value):i.value);t(h)}else{const h=a==="id"?Number(c.target.value):c.target.value;t(h)}},className:mr.select,children:[!r&&e.jsx("option",{value:"",children:"Виберіть колекцію"}),n.map(c=>e.jsx("option",{value:a==="slug"?c.slug:c.id,children:c.name},c.id))]})}const Is=({onUpload:s})=>{const t=async r=>{const a=r.target.files?.[0];if(!a)return;const n=new FormData;n.append("file",a),n.append("upload_preset","FBEimg");try{const c=await(await fetch("https://api.cloudinary.com/v1_1/divhalkcr/image/upload",{method:"POST",body:n})).json();c.secure_url?s(c.secure_url):console.error("Upload failed:",c)}catch(o){console.error("Error uploading image:",o)}};return e.jsx(j,{type:"file",accept:"image/*",onChange:t})},pr="_button_b2icf_1",gr="_primary_b2icf_15",xr="_secondary_b2icf_23",fr="_small_b2icf_31",jr="_danger_b2icf_37",_r="_link_b2icf_45",br="_disabled_b2icf_53",yr="_loader_b2icf_58",vr="_spin_b2icf_1",Ae={button:pr,primary:gr,secondary:xr,small:fr,danger:jr,link:_r,disabled:br,loader:yr,spin:vr},w=u.forwardRef(({type:s="button",onClick:t,disabled:r=!1,loading:a=!1,variant:n="primary",children:o,className:c,style:h,title:i,...l},m)=>e.jsxs("button",{ref:m,type:s,onClick:t,disabled:r||a,style:h,title:i,className:ys(Ae.button,Ae[n],{[Ae.disabled]:r||a},c),...l,children:[a&&e.jsx("span",{className:Ae.loader}),i||o]}));w.displayName="Button";const Nr="_imagesBlock_1y6ls_2",Sr="_newphoto_1y6ls_9",wr="_photoBox_1y6ls_15",Oe={imagesBlock:Nr,newphoto:Sr,photoBox:wr},Cr=({control:s,register:t,setValue:r,watch:a,variantIndex:n})=>{const{fields:o,append:c,remove:h}=de({control:s,name:`variants.${n}.images`}),[i,l]=u.useState("");return e.jsxs("div",{className:Oe.imagesBlock,children:[e.jsx("h5",{children:"Images"}),o.map((m,g)=>{const p=a(`variants.${n}.images.${g}.url`);return e.jsxs("div",{style:{margin:"1rem"},children:[e.jsx(j,{placeholder:"опис фото",style:{margin:"0.5rem"},...t(`variants.${n}.images.${g}.altText`)}),e.jsx(Is,{onUpload:d=>r(`variants.${n}.images.${g}.url`,d)}),e.jsxs("div",{style:{display:"flex",marginTop:"0.5rem",gap:"0.5rem"},children:[e.jsx(j,{type:"text",placeholder:"Встав URL вручну",value:i,onChange:d=>l(d.target.value),id:"urlhandle"}),e.jsx(w,{type:"button",onClick:()=>{i.trim()&&(r(`variants.${n}.images.${g}.url`,i.trim()),l(""))},children:"Завантажити фото"})]}),p&&e.jsx("img",{src:p,alt:"preview",style:{width:100,height:"auto",marginTop:"0.5rem"}}),e.jsx("button",{type:"button",onClick:()=>h(g),children:"✕ Видалити фото"})]},m.id)}),e.jsx(w,{type:"button",onClick:()=>c({url:"",altText:""}),children:"+ Add Image"})]})},kr=()=>{const{register:s,control:t,handleSubmit:r,reset:a,setValue:n,watch:o}=ue({defaultValues:{sku:"",price:0,priceSale:null,categoryId:void 0,collectionId:1,translations:[{name:"",description:"",languageId:1}],features:[{text:"",order:1}],variants:[]}}),c=de({control:t,name:"translations"}),h=de({control:t,name:"features"}),i=de({control:t,name:"variants"}),l=o("price"),m=o("priceSale"),g=async d=>{try{const f={...d,collectionId:Number(d.collectionId),variants:d.variants.map(k=>({...k,productId:1}))},_=await le.addProduct(f);a(),alert(`Товар додано - ${_.translations[0].name}`)}catch(f){console.error("Помилка при створенні продукту:",f)}},p=()=>{i.append({color:"BLACK",sizes:[],price:l||0,priceSale:m||0,stock:0,images:[{url:"",altText:""}],description:""})};return e.jsxs("div",{className:F.createProduct,children:[e.jsx("h1",{children:"Create Product"}),e.jsxs("form",{onSubmit:r(g),className:F.form,children:[e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"SKU * номер товару, ідентифікатор "}),e.jsx("input",{...s("sku",{required:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Base Price *"}),e.jsx(j,{type:"number",step:"1",min:"1",...s("price",{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Base Sale Price"}),e.jsx("input",{type:"number",step:"1",min:"1",...s("priceSale",{valueAsNumber:!0})})]}),e.jsx("h3",{children:"Назва та опис  товару"}),c.fields.map((d,f)=>e.jsxs("div",{className:F.group,children:[e.jsx("input",{placeholder:"Name",...s(`translations.${f}.name`)}),e.jsx("input",{placeholder:"Description",...s(`translations.${f}.description`)}),e.jsx(j,{type:"number",placeholder:"Language ID",label:"language: UA",disabled:!0,...s(`translations.${f}.languageId`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>c.remove(f),children:"✕"})]},d.id)),e.jsx(w,{type:"button",className:F.btn,disabled:!0,onClick:()=>c.append({name:"",description:"",languageId:1}),children:"+ Add Translation"}),e.jsx("h3",{children:"Властивості товару"}),h.fields.map((d,f)=>e.jsxs("div",{className:F.group,children:[e.jsx(j,{placeholder:"приклад: Тканина: кашемір",...s(`features.${f}.text`)}),e.jsx(j,{type:"number",placeholder:"Order",min:"1",...s(`features.${f}.order`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>h.remove(f),children:"✕"})]},d.id)),e.jsx(w,{type:"button",onClick:()=>h.append({text:"",order:h.fields.length+1}),className:F.btn,children:"+ Додати властивість"}),e.jsx("h3",{children:"Variants"}),i.fields.map((d,f)=>e.jsxs("div",{className:F.variantBlock,children:[e.jsxs("h4",{children:["Variant ",f+1]}),e.jsx("input",{type:"hidden",...s(`variants.${f}.productId`)}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...s(`variants.${f}.color`),children:Object.values(Ye).map(_=>e.jsx("option",{value:_,children:ks[_]},_))})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:F.checkboxGroup,children:Object.values(Cs).map(_=>e.jsxs("label",{className:F.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:_,...s(`variants.${f}.sizes`)}),De[_]]},_))})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Price *"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${f}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${f}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Stock"}),e.jsx("input",{type:"number",...s(`variants.${f}.stock`,{valueAsNumber:!0})})]}),e.jsx("div",{className:F.field,children:e.jsx(j,{type:"text",...s(`variants.${f}.description`),label:"Description"})}),e.jsx(Cr,{control:t,register:s,setValue:n,watch:o,variantIndex:f}),e.jsx(w,{type:"button",onClick:()=>i.remove(f),className:F.delete,children:"✕ Remove Variant"})]},d.id)),e.jsx(w,{type:"button",onClick:p,className:F.btn,children:"+ Add Variant"}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Category"}),e.jsx(Qe,{value:o("categoryId"),onChange:d=>n("categoryId",d),valueKey:"id"})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Collections"}),e.jsx(Ze,{value:o("collectionId"),onChange:d=>n("collectionId",Number(d)),valueKey:"id"})]}),e.jsx("button",{type:"submit",className:`${F.submit} ${F.btn}`,children:"Create Product"})]})]})},$r="_card_190q6_2",Ir="_imageWrapper_190q6_11",Pr="_name_190q6_28",Lr="_price_190q6_35",Er="_priceSale_190q6_40",Br="_priceOriginal_190q6_44",Tr="_features_190q6_49",Ar="_colorDots_190q6_59",Or="_colorDot_190q6_59",Rr="_mainFont_190q6_146",Q={card:$r,imageWrapper:Ir,name:Pr,price:Lr,priceSale:Er,priceOriginal:Br,features:Tr,colorDots:Ar,colorDot:Or,mainFont:Rr},es=({product:s,isMainPage:t})=>{const{id:r,translations:a,variants:n,price:o,priceSale:c}=s,h=a&&a.length>0?a[0].name:"Назва відсутня",l=n?.[0]?.images?.[0],m=Array.from(new Set(n?.flatMap(v=>v.sizes)||[])),g=Array.from(new Set(n?.map(v=>v.color)||[])),p=n?.map(v=>v.price).filter(v=>v!=null)||[],d=n?.map(v=>v.priceSale).filter(v=>v!=null)||[],f=p.length>0?Math.min(...p):void 0,_=d.length>0?Math.min(...d):void 0,k=o??f,A=c??_;return e.jsxs("div",{className:Q.card,children:[e.jsx(V,{to:`/product/${r}`,className:Q.imageWrapper,rel:"canonical",children:l?e.jsx("img",{src:l.url,alt:l.altText||h}):e.jsx("div",{className:Q.noImage,children:"Фото відсутнє"})}),e.jsx("p",{className:`${Q.name} ${t?Q.mainFont:""}`,children:e.jsx(V,{to:`/product/${r}`,children:h})}),e.jsx("p",{className:`${Q.price} ${t?Q.mainFont:""}`,children:k?A&&A<k?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:t?"":Q.priceSale,children:["₴",A.toFixed(2)," "]}),e.jsxs("span",{className:Q.priceOriginal,children:["₴",k.toFixed(2)]})]}):e.jsxs("span",{children:["₴",k.toFixed(2)]}):"Ціна відсутня"}),e.jsxs("div",{className:Q.features,children:[t?"":m.length>0?m.map(v=>De[v]).join(", "):"Немає",!t&&e.jsx("br",{}),g.length>0?e.jsx("div",{className:Q.colorDots,children:g.map(v=>e.jsx("span",{className:Q.colorDot,style:{backgroundColor:$s[v]||"#ccc"},title:v},v))}):"Немає"]})]})},Fr="_dashboard_12snk_3",qr="_filters_12snk_9",Ur="_cardsList_12snk_22",Mr="_cardWrapper_12snk_31",zr="_loadMore_12snk_59",Dr="_deleteButton_12snk_89",Wr="_loadMoreButton_12snk_98",se={dashboard:Fr,filters:qr,cardsList:Ur,cardWrapper:Mr,loadMore:zr,deleteButton:Dr,loadMoreButton:Wr},as=()=>{const s=Se(),{products:t,fetchProducts:r,appendProducts:a,deleteProduct:n}=Me(),[o,c]=u.useState(""),[h,i]=u.useState(""),[l,m]=u.useState(0),[g,p]=u.useState(!1);u.useEffect(()=>{(async()=>{p(!0);const k={limit:10,skip:l*10,categorySlug:o||void 0,collectionSlug:h||void 0};l===0?await r(k):await a(k),p(!1)})()},[l,o,h,r,a]);const d=_=>{window.confirm(`Видалити продукт ${_.translations?.[0]?.name}?`)&&n(_.id)},f=()=>{m(0)};return e.jsxs("div",{className:se.dashboard,children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("div",{className:se.filters,children:[e.jsx(Qe,{value:o,onChange:_=>{c(_),f()},valueKey:"slug"}),e.jsx(Ze,{value:h,onChange:_=>{i(_),f()},valueKey:"slug",multiple:!1})]}),e.jsxs("p",{children:["Всього продуктів: ",t.length]}),g&&e.jsx("p",{children:"Завантаження..."}),e.jsx("ul",{className:se.cardsList,children:t.map(_=>e.jsxs("div",{className:se.cardWrapper,children:[e.jsx(es,{product:_}),e.jsx(w,{className:`${se.deleteButton} ${se.button}`,onClick:()=>d(_),children:"Видалити"}),e.jsx(w,{className:` ${se.button}`,onClick:()=>s(`/admin/edit-product/${_.id}`),children:"Редагувати"})]},_.id))}),e.jsx("div",{className:se.loadMore,children:e.jsx(w,{className:`${se.loadMoreButton} ${se.button}`,onClick:()=>m(_=>_+1),disabled:g,children:"Завантажити ще"})})]})},Gr="_editProduct_1f234_1",Vr="_form_1f234_13",Hr="_field_1f234_35",Jr="_group_1f234_65",Kr="_inputText_1f234_73",Xr="_variantBlock_1f234_90",Yr="_checkboxGroup_1f234_107",Qr="_checkboxLabel_1f234_114",Zr="_btn_1f234_130",ea="_submit_1f234_156",sa="_loading_1f234_188",ta="_error_1f234_197",ra="_changesIndicator_1f234_249",aa="_chooseBox_1f234_253",B={editProduct:Gr,form:Vr,field:Hr,group:Jr,inputText:Kr,variantBlock:Xr,checkboxGroup:Yr,checkboxLabel:Qr,btn:Zr,submit:ea,delete:"_delete_1f234_179",loading:sa,error:ta,changesIndicator:ra,chooseBox:aa},na=({control:s,register:t,setValue:r,watch:a,variantIndex:n})=>{const{fields:o,append:c,remove:h}=de({control:s,name:`variants.${n}.images`}),[i,l]=u.useState("");return e.jsxs("div",{className:Oe.imagesBlock,children:[e.jsx("h5",{children:"Images"}),o.map((m,g)=>{const p=a(`variants.${n}.images.${g}.url`);return e.jsx("div",{style:{margin:"1rem"},children:p?e.jsxs("div",{className:Oe.photoBox,children:[e.jsx("img",{src:p,alt:a(`variants.${n}.images.${g}.altText`)||"preview"}),e.jsx(w,{type:"button",onClick:()=>h(g),variant:"small",children:"✕ Видалити фото"})]}):e.jsxs("div",{className:Oe.newphoto,children:[e.jsx(j,{placeholder:"опис фото",style:{marginBottom:"0.5rem"},...t(`variants.${n}.images.${g}.altText`)}),e.jsx(Is,{onUpload:d=>r(`variants.${n}.images.${g}.url`,d)}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx(j,{type:"text",placeholder:"Встав URL вручну",value:i,onChange:d=>l(d.target.value)}),e.jsx(w,{type:"button",onClick:()=>{i.trim()&&(r(`variants.${n}.images.${g}.url`,i.trim()),l(""))},children:"Завантажити фото"})]}),e.jsx(w,{type:"button",onClick:()=>h(g),style:{marginTop:"0.5rem"},variant:"small",children:"✕ Видалити фото"})]})},m.id)}),e.jsx(w,{type:"button",onClick:()=>c({url:"",altText:""}),children:"+ Add Image"})]})};function be(s,t){if(s===t)return!0;if(s==null||t==null)return!1;if(Array.isArray(s)&&Array.isArray(t))return s.length===t.length&&s.every((r,a)=>be(r,t[a]));if(typeof s=="object"&&typeof t=="object"){const r=Object.keys(s),a=Object.keys(t);return r.length===a.length&&r.every(n=>a.includes(n)&&be(s[n],t[n]))}return!1}function ns(s,t){const r={};return["sku","price","priceSale","categoryId","collectionId"].forEach(n=>{const o=t[n];be(s[n],o)||(r[n]=o??void 0)}),be(s.translations,t.translations)||(r.translations=t.translations?.map(n=>({name:n.name,description:n.description??void 0,languageId:n.languageId}))),be(s.features,t.features)||(r.features=t.features?.map(n=>({text:n.text,order:n.order}))),be(s.variants,t.variants)||(r.variants=t.variants?.map(n=>({color:n.color,sizes:n.sizes,price:n.price,priceSale:n.priceSale??void 0,stock:n.stock,description:n.description??void 0,images:n.images?.map(o=>({url:o.url,altText:o.altText??void 0}))}))),r}const oa=()=>{const{id:s}=Ue(),[t,r]=u.useState(!0),[a,n]=u.useState(null),[o,c]=u.useState(!1),h=u.useRef(null),{editProduct:i,isLoading:l}=Me(),{register:m,control:g,handleSubmit:p,reset:d,setValue:f,watch:_}=ue({defaultValues:{id:0,sku:"",price:0,priceSale:void 0,categoryId:void 0,collectionId:void 0,translations:[{name:"",description:void 0,languageId:1}],features:[],variants:[]}}),k=de({control:g,name:"translations"}),A=de({control:g,name:"features"}),v=de({control:g,name:"variants"}),R=_();u.useEffect(()=>{if(h.current&&R){const E=ns(h.current,R);c(Object.keys(E).length>0)}},[R]),u.useEffect(()=>{async function E(){if(!s){n("ID продукту не знайдено"),r(!1);return}try{r(!0);const L=await le.getById(Number(s));h.current=JSON.parse(JSON.stringify(L)),d(L)}catch(L){console.error(L),n("Не вдалося завантажити продукт")}finally{r(!1)}}E()},[s,d]);const N=async E=>{if(!s||!h.current)return;const L=ns(h.current,E);if(Object.keys(L).length===0){alert("Немає змін для збереження");return}try{await i(Number(s),L),h.current=JSON.parse(JSON.stringify(E)),c(!1),alert(`Продукт оновлено: ${Object.keys(L).join(", ")}`)}catch(M){console.error(M),alert("Помилка при оновленні продукту")}},$=()=>{v.append({color:"BLACK",sizes:[],price:R.price??0,priceSale:R.priceSale??void 0,stock:0,description:"",images:[{url:"",altText:void 0}]})},U=()=>{h.current&&(d(h.current),c(!1))};return t||l?e.jsx("div",{className:B.loading,children:"Завантаження..."}):a?e.jsx("div",{className:B.error,children:a}):e.jsxs("div",{className:B.editProduct,children:[e.jsxs("div",{className:B.header,children:[e.jsxs("h1",{children:["Edit Product #",s]}),o&&e.jsxs("div",{className:B.changesIndicator,children:[e.jsx("span",{children:"• Є незбережені зміни"}),e.jsx(w,{type:"button",onClick:U,className:B.resetBtn,children:"Скинути зміни"})]})]}),e.jsxs("form",{onSubmit:p(N),className:B.form,children:[e.jsx("div",{className:B.field,children:e.jsx(j,{...m("sku",{required:!0}),placeholder:"SKU"})}),e.jsx("div",{className:B.field,children:e.jsx(j,{type:"number",...m("price",{required:!0,valueAsNumber:!0}),placeholder:"Price"})}),e.jsx("div",{className:B.field,children:e.jsx(j,{type:"number",...m("priceSale",{valueAsNumber:!0}),placeholder:"Sale Price"})}),e.jsxs("div",{className:B.chooseBox,children:[e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Category"}),e.jsx(Qe,{value:_("categoryId"),onChange:E=>f("categoryId",E),valueKey:"id"})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Collection"}),e.jsx(Ze,{value:_("collectionId"),onChange:E=>f("collectionId",Number(E)),valueKey:"id"})]})]}),e.jsx("h3",{children:"Назва і опис товару"}),k.fields.map((E,L)=>e.jsxs("div",{className:B.group,children:[e.jsx(j,{placeholder:"Name",...m(`translations.${L}.name`)}),e.jsx(j,{placeholder:"Description",...m(`translations.${L}.description`)}),e.jsx(j,{type:"number",label:"Language: UA",disabled:!0,...m(`translations.${L}.languageId`)})]},E.id)),e.jsx("h3",{children:"Властивості товару"}),A.fields.map((E,L)=>e.jsxs("div",{className:B.group,children:[e.jsx(j,{placeholder:"Text",...m(`features.${L}.text`),className:B.inputText,title:_(`features.${L}.text`)||""}),e.jsx(j,{type:"number",placeholder:"Order",...m(`features.${L}.order`,{valueAsNumber:!0})})]},E.id)),e.jsx(w,{type:"button",onClick:()=>A.append({text:"",order:A.fields.length+1}),className:B.btn,children:"+ Add Feature"}),e.jsx("h3",{children:"Variants"}),v.fields.map((E,L)=>e.jsxs("div",{className:B.variantBlock,children:[e.jsxs("h4",{children:["Variant ",L+1]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...m(`variants.${L}.color`),children:Object.values(Ye).map(M=>e.jsx("option",{value:M,children:ks[M]},M))})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:B.checkboxGroup,children:Object.values(Cs).map(M=>e.jsxs("label",{className:B.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:M,...m(`variants.${L}.sizes`)}),De[M]]},M))})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Price *"}),e.jsx(j,{type:"number",...m(`variants.${L}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx(j,{type:"number",...m(`variants.${L}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Stock"}),e.jsx(j,{type:"number",...m(`variants.${L}.stock`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Description"}),e.jsx(j,{placeholder:"Variant description",...m(`variants.${L}.description`)})]}),e.jsx(na,{control:g,register:m,setValue:f,watch:_,variantIndex:L}),e.jsx(w,{type:"button",onClick:()=>v.remove(L),className:B.delete,children:"✕ Remove Variant"})]},E.id)),e.jsx(w,{type:"button",onClick:$,children:" Variant"}),e.jsxs("div",{className:B.formActions,children:[e.jsx("button",{type:"submit",className:`${B.submit} ${B.btn}`,disabled:!o,children:o?"Зберегти зміни":"Немає змін"}),o&&e.jsx(w,{type:"button",onClick:U,className:B.cancelBtn,children:"Скинути"})]})]})]})},ca=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=ue(),a=Se(),n=async c=>{try{await he.forgotPassword(c),alert("Для відновлення паролю перейдіть у поштову скриньку"),a("/")}catch(h){alert(h.response?.data?.message||"Не вдалося відправити лист")}},o=c=>{n(c.email)};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h2",{className:"title",children:"Відновлення пароля"}),e.jsxs("form",{onSubmit:t(o),className:"form",children:[e.jsx(j,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),r.email&&e.jsx("p",{className:"error",children:r.email.message}),e.jsx(w,{type:"submit",children:"Надіслати посилання"})]})]})},ia="_loginContainer_1bxwe_1",la="_title_1bxwe_12",da="_form_1bxwe_18",ua="_registerPrompt_1bxwe_54",me={loginContainer:ia,title:la,form:da,registerPrompt:ua},ha=()=>{const{user:s}=q(),[t,r]=u.useState({email:"",password:""}),[a,n]=u.useState(null),o=Se();u.useEffect(()=>{s&&o("/")},[s,o]);const c=i=>{const{name:l,value:m}=i.target;r(g=>({...g,[l]:m})),a&&n(null)},h=async i=>{if(i.preventDefault(),!t.email||!t.password){n("Будь ласка, заповніть всі поля");return}if(!t.email.includes("@")){n("Введіть коректний email");return}n(null);try{console.log("LoginForm: Starting login process for:",t.email),await he.login(t),console.log("LoginForm: Login successful, redirecting..."),o("/")}catch(l){console.error("LoginForm: Login failed:",l),console.error("LoginForm: Error details:",{type:typeof l,constructor:l?.constructor?.name,message:l instanceof Error?l.message:l,string:String(l)});let m="Помилка входу. Спробуйте ще раз.";if(l instanceof Error)m=l.message;else if(typeof l=="string")m=l;else if(l&&typeof l=="object")if("message"in l&&typeof l.message=="string")m=l.message;else if("error"in l&&typeof l.error=="string")m=l.error;else try{const g=JSON.stringify(l);g&&g!=="{}"&&g!=="[object Object]"&&(m=g)}catch(g){console.error("Failed to stringify error:",g)}console.log("LoginForm: Final error message:",m),n(m)}};return e.jsxs("div",{className:ys(me.loginContainer),children:[e.jsx("h1",{className:me.title,children:"Вхід"}),e.jsxs("form",{onSubmit:h,className:me.form,children:[e.jsx(j,{label:"Email",name:"email",type:"email",placeholder:"Введіть ваш email",value:t.email,onChange:c,required:!0}),e.jsx(j,{label:"Пароль",name:"password",type:"password",placeholder:"Введіть ваш пароль",value:t.password,onChange:c,required:!0}),a&&e.jsx("div",{className:me.errorContainer,children:e.jsx("p",{className:me.error,children:a})}),e.jsx(w,{type:"submit",disabled:!t.email||!t.password,className:"",children:"Увійти"}),e.jsx("p",{className:me.registerPrompt,children:e.jsx(V,{to:"/forgot-password",children:"Забули пароль"})}),e.jsxs("p",{className:me.registerPrompt,children:["Немає аккаунта? ",e.jsx(V,{to:"/register",children:"Зареєструйтесь тут"})]})]})]})},ma=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=ue(),[a]=Fs(),n=Se(),o=a.get("code"),c=a.get("email"),h=i=>{if(!o||!c){alert("Посилання недійсне або відсутні дані");return}try{he.resetPassword(c,o,i.newPassword),alert("Дані oновлено"),n("/login")}catch(l){alert(l.response?.data?.message||"Не вдалося відновити дані")}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Скидання пароля"}),e.jsxs("form",{onSubmit:t(h),className:"form",children:[e.jsx(j,{type:"password",placeholder:"Новий пароль *",...s("newPassword",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),r.newPassword&&e.jsx("p",{className:"error",children:r.newPassword.message}),e.jsx(w,{type:"submit",children:"Змінити пароль"})]})]})},pa="_delivery_1u3z3_1",ga="_section_1u3z3_14",xa="_warning_1u3z3_27",fa="_list_1u3z3_34",ja="_freeShipping_1u3z3_41",_a="_payment_1u3z3_45",ae={delivery:pa,section:ga,warning:xa,list:fa,freeShipping:ja,payment:_a},ba=()=>e.jsx("div",{className:"page",children:e.jsxs("div",{className:ae.delivery,children:[e.jsx("h1",{children:"ДОСТАВКА ТА ПОВЕРНЕННЯ"}),e.jsxs("section",{className:ae.section,children:[e.jsx("h2",{children:"УМОВИ ДОСТАВКИ"}),e.jsx("p",{className:ae.warning,children:"ВАЖЛИВЕ ПОВІДОМЛЕННЯ – ВІЙНА В УКРАЇНІ: Через війну можливі невеликі затримки. Після відправки ваше замовлення прибуде протягом 2-6 робочих днів."}),e.jsxs("ul",{className:ae.list,children:[e.jsx("li",{children:"Замовлення по Україні відправляються «Новою Поштою» (2-3 робочих дні)"}),e.jsx("li",{children:"Замовлення по Польщі відправляємо «Нова пошта» (3-5 робочих дні)"}),e.jsx("li",{children:"Замовлення по США та Канаді відправляються «Пошта Канади» (1-3 робочих дні)"})]}),e.jsx("p",{className:ae.freeShipping,children:"БЕЗКОШТОВНА ЕКСПРЕС-доставка замовлень на суму понад 300$"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Зверніть увагу:"})," ми не доставляємо товари в Росію та Білорусь."]})]}),e.jsxs("section",{className:ae.section,children:[e.jsx("h2",{children:"ВІДСТЕЖУЙТЕ СВОЄ ЗАМОВЛЕННЯ"}),e.jsx("p",{children:"Щойно ваше замовлення буде відправлено, ви отримаєте електронний лист із інформацією про відстеження. Усі деталі відстеження є в електронному листі."}),e.jsxs("p",{children:["Мита та податки: можуть стягуватися митні збори та/або ПДВ.",e.jsx("br",{}),e.jsx("strong",{children:"FBE"})," не несе відповідальності за митні або місцеві податки."]})]}),e.jsxs("section",{className:ae.section,children:[e.jsx("h2",{children:"ПОВЕРНЕННЯ"}),e.jsx("p",{children:"Купальники поверненню та обміну не підлягають."})]}),e.jsxs("section",{className:ae.section,children:[e.jsx("h2",{children:"ОПЛАТА"}),e.jsxs("div",{className:ae.payment,children:[e.jsx("h3",{children:"Рахунок на оплату"}),e.jsx("p",{children:"Після оформлення замовлення ми надішлемо вам рахунок на електронну пошту або у месенджер. Ви зможете оплатити замовлення зручним способом. Після оплати отримаєте підтвердження та деталі доставки."}),e.jsx("h3",{children:"Передоплата"}),e.jsxs("p",{children:["Для замовлень, де потрібна передоплата, необхідно внести ",e.jsx("strong",{children:"200₴"}),". Ця сума гарантує резервування товару."]}),e.jsx("h3",{children:"Післяплата / оплата повної суми"}),e.jsx("p",{children:"Якщо товар оплачується повністю після отримання рахунку, оплатіть зазначену суму згідно з інструкціями. Після отримання платежу ми відправимо ваше замовлення."})]})]})]})}),ya="_checkout_191db_1",va="_summary_191db_15",Na="_item_191db_18",Sa="_total_191db_24",pe={checkout:ya,summary:va,item:Na,total:Sa},Ps="cart",os=()=>{try{const s=localStorage.getItem(Ps);return s?JSON.parse(s):[]}catch{return[]}},Ge=s=>{localStorage.setItem(Ps,JSON.stringify(s))},ge={addItem(s){const t=os(),r=t.findIndex(a=>a.productId===s.productId&&a.color===s.color&&a.size===s.size);return r>=0?t[r].quantity=Math.min(99,t[r].quantity+s.quantity):t.push(s),Ge(t),t},async addToCart(s,t){return(await S.post("/cart/add",{userId:s,item:t})).data.item},async deleteTCartItem(s){await S.delete(`/cart-item/${s}`)},async deleteTCartItems(){await S.delete("/cart/clear")},async getCart(s){return s?(await S.get("/cart")).data.items:os()},setLocalCart(s){return Ge(s),s},clearLocalCart(){Ge([])}},Ne=oe((s,t)=>({cart:[],loaded:!1,isLoading:!1,setCart:r=>s({cart:r}),addCartItem:async r=>{try{const{user:a}=q.getState();if(a?.id){await ge.addToCart(a.id,r);const n=await ge.getCart(a?.id);s({cart:n})}else{const n=Math.floor(Math.random()*1e3),o=r.productId+n,c={...r,id:+o},h=ge.addItem(c);s({cart:h})}}catch(a){console.error("Помилка при додаванні в кошик:",a)}},clearCart:async()=>{try{await ge.clearLocalCart(),s({cart:[],loaded:!1})}catch(r){console.error("Помилка при очищенні кошика:",r)}},deleteCartItems:async()=>{try{await ge.deleteTCartItems(),s({cart:[]})}catch(r){console.error("Помилка при видаленні товарів:",r)}},deleteCartItem:async r=>{const{user:a}=q.getState();try{a&&await ge.deleteTCartItem(+r),s(n=>{const o=n.cart.filter(c=>c.id!==r);return a||localStorage.setItem("cart",JSON.stringify(o)),{cart:o}})}catch(n){console.error("Помилка при delete Item:",n)}},fetchCart:async()=>{const{loaded:r,isLoading:a}=t(),{user:n,accessToken:o}=q.getState();if(!a){if(!n?.id||!o){try{const c=JSON.parse(localStorage.getItem("cart")||"[]");s({cart:c,loaded:!0})}catch(c){console.error("Помилка завантаження кошика з localStorage:",c),s({cart:[],loaded:!0})}return}if(r){console.log("Кошик вже завантажений для користувача");return}if(s({isLoading:!0}),n?.id&&o)try{const c=await ge.getCart(n.id);s({cart:c,loaded:!0,isLoading:!1})}catch(c){console.error("Помилка при завантаженні кошика:",c),s({cart:[],loaded:!0,isLoading:!1})}}}})),qe={async createOrder(s,t,r,a){console.log("➡️ Відправка замовлення на бекенд",a);const n=t.reduce((o,c)=>{const h=c.priceSale&&c.priceSale<c.price?c.priceSale:c.price;return o+h*c.quantity},0);return S.post("/orders",{userId:s??null,guestName:a.fullName,guestPhone:a.phone,guestEmail:a.email,novaPostCity:a.city,novaPostBranch:a.novaPoshtaBranch,paymentMethod:r.toUpperCase(),finalPrice:Number(Math.round(n*10)/10),items:t.map(o=>{const c=o.priceSale&&o.priceSale<o.price?o.priceSale:o.price;return{productId:o.productId,quantity:o.quantity,price:o.price,finalPrice:+(c*o.quantity).toFixed(1),name:o.name,image:o.image,color:o.color,size:o.size,priceSale:o.priceSale+""}})})},getOrders:async(s=!1,t,r=1,a=10)=>{const n={page:r,limit:a};return t?.orderId&&(n.orderId=t.orderId),t?.dateFrom&&(n.dateFrom=t.dateFrom),t?.dateTo&&(n.dateTo=t.dateTo),s&&(n.showAll=!0),(await S.get("/orders/all",{params:n,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data},updateOrderStatus:async(s,t)=>(await S.patch(`/orders/${s}/status`,{status:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data,updateOrderItemTracking:async(s,t)=>(await S.patch(`/orders/tracknumber/${s}`,{trackingNumber:t})).data},wa="_form_15mwq_1",Ca={form:wa},Re={async getAreas(){return(await S.get("nova-poshta/areas")).data},async getCities(s){return(await S.get(`nova-poshta/cities${s?`?areaRef=${s}`:""}`)).data},async getBranches(s){return(await S.get(`nova-poshta/warehouses?cityRef=${s}`)).data},async getTracking(s){return(await S.get(`nova-poshta/tracking?ttn=${s}`)).data[0]}},ka="_selectWrapper_167pe_1",$a="_selectInput_167pe_8",Ia="_placeholder_167pe_29",Pa="_arrow_167pe_33",La="_open_167pe_41",Ea="_optionsList_167pe_45",Ba="_option_167pe_45",Ta="_selected_167pe_80",Aa="_disabled_167pe_86",te={selectWrapper:ka,selectInput:$a,placeholder:Ia,arrow:Pa,open:La,optionsList:Ea,option:Ba,selected:Ta,disabled:Aa},Fe=({options:s,placeholder:t="Select...",onChange:r,value:a,disabled:n=!1})=>{const[o,c]=u.useState(!1),[h,i]=u.useState(a),l=u.useRef(null);u.useEffect(()=>{const g=p=>{l.current&&!l.current.contains(p.target)&&c(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const m=g=>{i(g.value),r(g.value),c(!1)};return e.jsxs("div",{className:te.selectWrapper,ref:l,children:[e.jsxs("div",{className:`${te.selectInput} ${n?te.disabled:""}`,onClick:()=>!n&&c(g=>!g),children:[e.jsx("span",{className:h?"":te.placeholder,children:s.find(g=>g.value===h)?.label||t}),e.jsx("span",{className:`${te.arrow} ${o?te.open:""}`})]}),e.jsx("ul",{className:`${te.optionsList} ${o?te.open:""}`,children:s.map(g=>e.jsx("li",{className:`${te.option} ${g.value===h?te.selected:""}`,onClick:()=>m(g),children:g.label},g.value))})]})},Oa=({form:s,setForm:t})=>{const[r,a]=u.useState([]),[n,o]=u.useState([]),[c,h]=u.useState([]),[i,l]=u.useState(!1),[m,g]=u.useState(!1);u.useEffect(()=>{Re.getAreas().then(d=>a(d)).catch(d=>console.error("❌ Помилка завантаження областей:",d))},[]),u.useEffect(()=>{s.areaRef&&(l(!0),Re.getCities(s.areaRef).then(d=>o(d)).catch(d=>console.error("❌ Помилка завантаження міст:",d)).finally(()=>l(!1)))},[s.areaRef]),u.useEffect(()=>{s.cityRef&&(g(!0),Re.getBranches(s.cityRef).then(d=>h(d)).catch(d=>console.error("❌ Помилка завантаження відділень:",d)).finally(()=>g(!1)))},[s.cityRef]);const p=(d,f)=>{if(d==="areaRef"&&(t(_=>({..._,areaRef:f,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0})),o([]),h([])),d==="cityRef"){const _=n.find(k=>k.Ref===f)?.Description||"";t(k=>({...k,cityRef:f,cityName:_,branchRef:void 0,branchName:void 0})),h([])}if(d==="branchRef"){const _=c.find(k=>k.Ref===f);t(k=>({...k,branchRef:f,branchName:_?`${_.Number} - ${_.ShortAddress}`:""}))}};return e.jsxs("div",{className:Ca.form,children:[e.jsx("input",{type:"text",name:"fullName",placeholder:"Ім’я та прізвище",value:s.fullName,onChange:d=>t(f=>({...f,fullName:d.target.value})),required:!0}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Телефон",value:s.phone,onChange:d=>t(f=>({...f,phone:d.target.value})),required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:d=>t(f=>({...f,email:d.target.value}))}),e.jsx(Fe,{value:s.areaRef||"",onChange:d=>p("areaRef",d),options:r.map(d=>({value:d.Ref,label:d.Description})),placeholder:"Виберіть область"}),e.jsx(Fe,{value:s.cityRef||"",onChange:d=>p("cityRef",d),options:n.map(d=>({value:d.Ref,label:d.Description})),placeholder:i?"Завантаження міст...":"Виберіть місто",disabled:!s.areaRef}),e.jsx(Fe,{value:s.branchRef||"",onChange:d=>p("branchRef",d),options:c.map(d=>({value:d.Ref,label:`${d.Number} - ${d.ShortAddress}`})),placeholder:m?"Завантаження відділень...":"Виберіть відділення",disabled:!s.cityRef})]})},Ra=()=>{const{user:s}=q(),{cart:t,setCart:r,clearCart:a}=Ne(),[n,o]=u.useState(!1),[c,h]=u.useState("cod"),[i,l]=u.useState({fullName:s?`${s.first_name??""} ${s.last_name??""}`.trim():"",phone:"",email:s?.email||"",areaRef:void 0,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0});u.useEffect(()=>{const p=localStorage.getItem("cart");if(p)try{r(JSON.parse(p))}catch{r([])}},[r]);const m=async()=>{if(!i.fullName||!i.phone||!i.areaRef||!i.cityRef||!i.branchRef){alert("⚠ Заповніть усі обов’язкові поля");return}if(t.length===0){alert("🛒 Ваш кошик порожній");return}o(!0);try{const p={...i,city:i.cityName,novaPoshtaBranch:i.branchName};await qe.createOrder(s?.id??null,t,c,p),localStorage.removeItem("cart"),a(),s&&Ne.getState().deleteCartItems(),alert("✅ Замовлення відправлено!")}catch(p){console.error(p),alert("❌ Сталася помилка при оформленні замовлення")}finally{o(!1)}},g=t.reduce((p,d)=>{const f=d?.priceSale&&d?.priceSale<d?.price?d.priceSale:d?.price||0,_=d?.quantity??1;return p+f*_},0);return e.jsxs("div",{className:pe.checkout,children:[e.jsx("h1",{children:"Оформлення замовлення"}),e.jsx(Oa,{form:i,setForm:l}),e.jsxs("div",{className:pe.summary,children:[t.map(p=>{const d=p?.priceSale&&p?.priceSale<p?.price?p.priceSale:p?.price||0,f=p?.quantity??1;return e.jsxs("div",{className:pe.item,children:[e.jsxs("span",{children:[p?.name," x ",f]}),e.jsxs("span",{children:["₴",(d*f).toFixed(2)]})]},p.id)}),e.jsxs("div",{className:pe.total,children:[e.jsx("strong",{children:"Загальна сума:"})," ₴",g.toFixed(2)]})]}),e.jsxs("div",{className:pe.payment,children:[e.jsx("h2",{children:"Метод оплати"}),e.jsx(j,{label:"Оплата при отриманні",type:"radio",value:"cod",checked:c==="cod",onChange:()=>h("cod")}),e.jsx(j,{label:"Оплата за реквізитами",type:"radio",value:"card",checked:c==="card",onChange:()=>h("card")}),c==="card"&&e.jsxs("div",{className:pe.cardDetails,children:[e.jsx("h3",{children:"Реквізити для оплати"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Отримувач:"})," ФОП Батько Ірина Ігорівна"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"IBAN:"})," UA333220010000026005350071455"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ЄДРПОУ:"})," 3590006083"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"МФО:"})," 322001"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Призначення платежу:"})," Оплата замовлення ",t[0].id]})]})]}),e.jsx("div",{className:pe.links,children:e.jsx(V,{to:"/delivery-terms",className:"link",children:"📦 Умови доставки та повернення"})}),e.jsx(w,{onClick:m,disabled:n,children:n?"Відправка...":"Відправити замовлення"})]})},Fa="_page_bo0z4_2",qa="_title_bo0z4_11",Ua="_centerWrapper_bo0z4_18",Ma="_adminPage_bo0z4_30",za="_adminContent_bo0z4_40",Da="_sidebarWrapper_bo0z4_49",Wa="_burger_bo0z4_60",Ga="_open_bo0z4_97",Va="_boxLine_bo0z4_153",Y={page:Fa,title:qa,centerWrapper:Ua,adminPage:Ma,adminContent:za,sidebarWrapper:Da,burger:Wa,open:Ga,boxLine:Va},Ha=()=>{const{user:s,setUser:t}=q(),{register:r,handleSubmit:a,formState:{errors:n}}=ue({defaultValues:s?{first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,address:s.address,city:s.city,country:s.country,postalCode:s.postalCode,dateOfBirth:s.dateOfBirth?s.dateOfBirth.toString().split("T")[0]:void 0}:{}}),[o,c]=u.useState(null),[h,i]=u.useState(null);if(!s)return e.jsx("div",{children:"Ви не авторизовані"});const l=async m=>{try{if(s.id){const g=await he.updateUser(m,s.id);t(g),c("Профіль оновлено успішно"),i(null)}}catch(g){i(g.message||"Помилка при оновленні профілю"),c(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Профіль користувача"}),e.jsxs("div",{className:Y.boxLine,children:[e.jsxs(V,{to:"/orders",children:[" ",e.jsx(w,{variant:"link",children:"Мої замовлення"})," "]}),e.jsx(V,{to:"/change-password",className:"blue hover:underline",children:e.jsx(w,{variant:"link",children:"Змінити пароль"})})]}),e.jsxs("form",{onSubmit:a(l),className:"form",children:[e.jsx(j,{placeholder:"Ім’я",id:"profile-firstname",autoComplete:"given-name",...r("first_name",{required:"Ім’я обов'язкове"})}),n.first_name&&e.jsx("p",{className:"error",children:n.first_name.message}),e.jsx(j,{placeholder:"Прізвище",id:"lastname",...r("last_name",{required:"Прізвище обов'язкове"})}),n.last_name&&e.jsx("p",{className:"error",children:n.last_name.message}),e.jsx(j,{type:"email",placeholder:"Email",autoComplete:"email",disabled:!0,id:"profile-email",...r("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),n.email&&e.jsx("p",{className:"error",children:n.email.message}),e.jsx(j,{placeholder:"Телефон",autoComplete:"tel",...r("phone")}),e.jsx(j,{placeholder:"Адреса",autoComplete:"street-address",...r("address")}),e.jsx(j,{placeholder:"Місто",autoComplete:"address-level2",...r("city")}),e.jsx(j,{placeholder:"Країна",autoComplete:"country",...r("country")}),e.jsx(j,{placeholder:"Поштовий індекс",autoComplete:"postal-code",...r("postalCode")}),e.jsx(j,{type:"date",placeholder:"Дата народження",autoComplete:"bday",...r("dateOfBirth")}),o&&e.jsx("p",{className:"green",children:o}),h&&e.jsx("p",{className:"error",children:h}),e.jsx(w,{type:"submit",children:"Оновити профіль"})]})]})};function Ja(){return e.jsx("div",{className:Y.centerWrapper,children:e.jsx(ha,{})})}const Ka=()=>e.jsx("div",{children:"NotFoundPage"}),Xa="_aboutWrapper_93t88_2",Ya="_fbeAbout_93t88_6",Qa="_title_93t88_24",Za="_subtitle_93t88_46",en="_description_93t88_73",sn="_featuresList_93t88_90",tn="_valuesList_93t88_91",rn="_deliveryList_93t88_92",J={aboutWrapper:Xa,fbeAbout:Ya,title:Qa,subtitle:Za,description:en,featuresList:sn,valuesList:tn,deliveryList:rn},an=()=>{const{t:s}=we();return e.jsx("section",{"data-bg":"dark",className:`content-section ${J.contentSection}`,children:e.jsx("div",{className:J.aboutWrapper,children:e.jsxs("div",{className:J.fbeAbout,children:[e.jsx("h1",{className:J.title,children:s("about-h")}),e.jsx("p",{className:J.description,children:s("about1")}),e.jsx("h2",{className:J.subtitle,children:s("about-h1")}),e.jsx("p",{className:J.description,children:s("about2")}),e.jsx("h2",{className:J.subtitle,children:s("about-h2")}),e.jsxs("ul",{className:J.featuresList,children:[e.jsx("li",{children:s("about3-1")}),e.jsx("li",{children:s("about3-2")}),e.jsx("li",{children:s("about3-3")}),e.jsx("li",{children:s("about3-4")})]}),e.jsx("h2",{className:J.subtitle,children:s("about-h3")}),e.jsxs("ul",{className:J.valuesList,children:[e.jsx("li",{children:s("about4-1")}),e.jsx("li",{children:s("about4-2")}),e.jsx("li",{children:s("about4-3")}),e.jsx("li",{children:s("about4-4")})]}),e.jsx("h2",{className:J.subtitle,children:s("about-h4")}),e.jsxs("ul",{className:J.deliveryList,children:[e.jsx("li",{children:s("about5-1")}),e.jsx("li",{children:s("about5-2")}),e.jsx("li",{children:s("about5-3")}),e.jsx("li",{children:s("about5-4")})]})]})})})},nn=()=>e.jsx("div",{className:"page",children:e.jsx(an,{})}),on="_form_1pgbi_1",cn="_row_1pgbi_26",ln="_error_1pgbi_33",dn="_success_1pgbi_38",ne={form:on,row:cn,error:ln,success:dn},un=()=>{const{register:s,handleSubmit:t,reset:r,formState:{errors:a,isSubmitting:n,isSubmitSuccessful:o},setError:c}=ue({defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:"",address:"",city:"",country:"",postalCode:"",dateOfBirth:""}}),h=async i=>{try{await he.register(i),r()}catch(l){console.log("RegisterForm: Error during registration:",l),c("email",{type:"server",message:l.response?.data?.error.message||"Помилка при реєстрації"})}};return e.jsxs("form",{className:ne.form,onSubmit:t(h),children:[e.jsx("h2",{children:"Реєстрація користувача"}),e.jsxs("div",{className:ne.row,children:[e.jsx(j,{type:"text",placeholder:"Ім'я *",...s("first_name",{required:"Ім'я обов'язкове"})}),a.first_name&&e.jsx("p",{className:ne.error,children:a.first_name.message}),e.jsx(j,{type:"text",placeholder:"Прізвище *",...s("last_name",{required:"Прізвище обов'язкове"})}),a.last_name&&e.jsx("p",{className:ne.error,children:a.last_name.message})]}),e.jsx(j,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),a.email&&e.jsx("p",{className:ne.error,children:a.email.message}),e.jsx(j,{type:"password",placeholder:"Пароль *",...s("password",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Пароль має містити мін. 8 символів, 1 велику і 1 малу літеру"}})}),a.password&&e.jsx("p",{className:ne.error,children:a.password.message}),e.jsx(j,{type:"tel",placeholder:"Телефон *",...s("phone",{required:"Телефон обов'язковий",pattern:{value:/^\+?[0-9\s\-()]+$/,message:"Некоректний номер телефону"}})}),e.jsx(j,{type:"text",placeholder:"Адреса",...s("address")}),e.jsxs("div",{className:ne.row,children:[e.jsx(j,{type:"text",placeholder:"Місто",...s("city")}),e.jsx(j,{type:"text",placeholder:"Країна",...s("country")})]}),e.jsx("div",{className:ne.row,children:e.jsx(j,{type:"text",placeholder:"Поштовий індекс",...s("postalCode")})}),e.jsxs("span",{children:["Дата народження  ",e.jsx("br",{}),e.jsx(j,{type:"date",placeholder:"Дата народження",...s("dateOfBirth")})]}),o&&e.jsx("p",{className:ne.success,children:"Реєстрація успішна! Перейдіть на сторінку авторизації"}),e.jsx(w,{type:"submit",disabled:n,children:n?"Реєстрація...":"Зареєструватися"})]})},hn=()=>e.jsx("div",{className:"page",children:e.jsx(un,{})}),mn=()=>{const{categories:s}=ze(),{t}=we();return e.jsxs("div",{className:Ee.caruselBox,children:[e.jsx("h2",{children:t("choosecategory")}),e.jsx(vs,{effect:"coverflow",grabCursor:!0,pagination:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},modules:[Ns,qs],spaceBetween:16,navigation:{enabled:!0,hideOnClick:!1},watchOverflow:!1,breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}},children:s.filter(r=>r.parentId===null).map(r=>e.jsx(Ss,{className:Ee.wrapper,children:e.jsx(V,{to:`/category/${r.slug}`,children:e.jsxs("div",{className:Ee.categoryBox,children:[e.jsx("h3",{children:r.name}),e.jsx("div",{className:Ee.imgBox,children:e.jsx("img",{src:r.imageUrl,alt:r.name})})]})})},r.id))})]})},cs=()=>{const{products:s,fetchProducts:t}=Me(),[r,a]=u.useState(!1),[n,o]=u.useState(null);return u.useEffect(()=>{(async()=>{a(!0),o(null);try{await t(),console.log("Products loaded successfully from store")}catch(h){console.error("Failed to load products:",h),o(h instanceof Error?h.message:"Unknown error")}finally{a(!1)}})()},[t]),r?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsx("div",{children:e.jsx("p",{children:"Завантаження продуктів..."})})]}):n?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Помилка завантаження: ",n]}),e.jsx(w,{onClick:()=>window.location.reload(),children:"Спробувати знову"})]})]}):e.jsxs("div",{className:"pages",children:[e.jsx("div",{style:{padding:"20px 0"},children:e.jsx(vs,{modules:[Ns],spaceBetween:16,slidesPerView:"auto",navigation:!0,className:"swiper-box",children:s.map(c=>e.jsx(Ss,{className:"slide",children:e.jsx(es,{product:c,isMainPage:!0})},c.id))})}),e.jsx(mn,{})]})},pn="_menuItem_1vxyu_1",gn="_menuLink_1vxyu_7",is={menuItem:pn,menuLink:gn},xn=({href:s,label:t,onClick:r})=>e.jsx("li",{className:is.menuItem,children:e.jsx("a",{href:s,className:is.menuLink,onClick:a=>{a.preventDefault(),r?.()},children:t})}),fn="_menu_cfg4h_1",jn={menu:fn},Ls=({items:s,onItemClick:t})=>{const r=a=>{t&&t(a)};return e.jsx("ul",{className:jn.menu,children:s.map((a,n)=>e.jsx(xn,{href:a.href,label:a.label,onClick:()=>r(a.href)},n))})},_n="_sidebarBox_74jfv_1",bn="_sidebar_74jfv_1",ls={sidebarBox:_n,sidebar:bn},yn=({children:s})=>e.jsx("div",{className:ls.sidebarBox,children:e.jsx("div",{className:ls.sidebar,children:ve.Children.map(s,t=>ve.isValidElement(t)&&t.type===Ls?ve.cloneElement(t):null)})}),vn=()=>{const s=Se(),[t,r]=u.useState(!1),a=[{href:"dashboard",label:"Dashboard"},{href:"createproduct",label:"Create Product"},{href:"create-category",label:"Create/Update Category"},{href:"create-collection",label:"Create/Update Collection"},{href:"/orders",label:"Замовлення"}],n=()=>{r(c=>!c)},o=c=>{s(c),r(!1)};return e.jsxs("div",{className:`${Y.adminPage} ${Y.page}`,children:[e.jsxs("button",{className:Y.burger,onClick:n,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx("div",{className:`${Y.sidebarWrapper} ${t?Y.open:""}`,children:e.jsx(yn,{isOpen:t,children:e.jsx(Ls,{items:a,onItemClick:o})})}),e.jsx("div",{className:Y.adminContent,children:e.jsx(Us,{})})]})},Nn="_cart_l07mg_9",Sn="_cartItems_l07mg_21",wn="_total_l07mg_27",Cn="_checkout_l07mg_42",kn="_empty_l07mg_57",Pe={cart:Nn,cartItems:Sn,total:wn,checkout:Cn,empty:kn},$n="_cartItem_4x454_12",In="_image_4x454_26",Pn="_info_4x454_34",Ln="_quantity_4x454_52",En="_remove_4x454_79",je={cartItem:$n,image:In,info:Pn,quantity:Ln,remove:En},Bn=({item:s,price:t,updateQuantity:r,removeItem:a})=>e.jsxs("div",{className:je.cartItem,children:[e.jsx("img",{src:s.image,alt:s.name,className:je.image}),e.jsxs("div",{className:je.info,children:[e.jsx("h2",{children:s.name}),e.jsxs("p",{children:["Колір: ",s.color]}),e.jsxs("p",{children:["Розмір: ",s.size]}),e.jsxs("p",{children:["Ціна: ₴",t.toFixed(2)]}),e.jsxs("div",{className:je.quantity,children:[e.jsx(w,{onClick:()=>r(s.productId,s.quantity-1),className:"black",children:"-"}),e.jsx(j,{className:je.input,type:"number",id:"quantity",name:"quantity",min:"1",max:"99",value:s.quantity,onChange:n=>r(s.productId,Number(n.target.value))}),e.jsx(w,{onClick:()=>r(s.productId,s.quantity+1),className:"black",children:"+"})]}),e.jsx(w,{className:je.remove,onClick:()=>a(s),children:"Видалити"})]})]}),Tn=()=>{const[s,t]=u.useState([]),[r,a]=u.useState(!1),n=Se(),{cart:o,fetchCart:c}=Ne(),{user:h}=q();u.useEffect(()=>{h&&h?.id&&c()},[h,c]),u.useEffect(()=>{if(o.length>0){const p=o.map(d=>{const f=d.priceSale&&d.priceSale<d.price?d.priceSale:d.price;return{...d,finalPrice:f*d.quantity}});t(p)}else{const p=localStorage.getItem("cart");if(p)try{const f=JSON.parse(p).map(_=>{const k=_.priceSale&&_.priceSale<_.price?_.priceSale:_.price;return{..._,finalPrice:k*_.quantity}});t(f)}catch{t([])}}a(!0)},[o]),u.useEffect(()=>{r&&localStorage.setItem("cart",JSON.stringify(s))},[s,r]);const i=(p,d,f,_,k)=>{t(A=>A.map(v=>{if(k?v.id===k:v.productId===p&&v.color===f&&v.size===_){const N=Math.max(1,Math.min(99,d)),$=v.priceSale&&v.priceSale<v.price?v.priceSale:v.price;return{...v,quantity:N,finalPrice:$*N}}return v}))},l=p=>{console.log(p),p.id?(t(d=>d.filter(f=>f.id!==p.id)),Ne.getState().deleteCartItem(p.id)):(t(d=>d.filter(f=>!(f.productId===p.productId&&f.color===p.color&&f.size===p.size))),localStorage.setItem("cart",JSON.stringify(s)))},m=s.reduce((p,d)=>p+(d.finalPrice??0),0);if(s.length===0)return e.jsx("div",{className:Pe.empty,children:"Кошик порожній"});const g=()=>{if(s.length===0){alert("🛒 Кошик порожній");return}n("/checkout")};return e.jsxs("div",{className:Pe.cart,children:[e.jsx("h1",{children:"Кошик"}),e.jsx("div",{className:Pe.cartItems,children:s.map(p=>e.jsx(Bn,{item:p,price:p.finalPrice?p.finalPrice/p.quantity:0,updateQuantity:(d,f)=>i(d,f,p.color,p.size,p.id),removeItem:l},p.id??`${p.productId}-${p.color}-${p.size}`))}),e.jsxs("div",{className:Pe.total,children:[e.jsxs("h2",{children:["Загальна сума: ₴",m.toFixed(2)]}),e.jsx(w,{className:Pe.checkout,onClick:g,children:"Оформити замовлення"})]})]})},An=()=>e.jsx("div",{className:Y.page,children:e.jsx(Tn,{})}),On="_productsContainer_njt8n_1",Rn="_cardWrapper_njt8n_9",xe={productsContainer:On,cardWrapper:Rn},Es=({categorySlug:s,collectionSlug:t})=>{const{products:r,fetchProducts:a}=Me(),[n,o]=u.useState(!1),[c,h]=u.useState(null);return u.useEffect(()=>{(async()=>{o(!0),h(null);const l={limit:50,skip:0,categorySlug:s||void 0,collectionSlug:t||void 0};try{await a(l),console.log("Products loaded successfully from store")}catch(m){console.error("Failed to load products:",m),h(m instanceof Error?m.message:"Unknown error")}finally{o(!1)}})()},[a,s,t]),n?e.jsx("div",{children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Завантаження продуктів..."})]})}):c?e.jsx("div",{className:xe.productsGrid,children:e.jsxs("div",{className:xe.error,children:[e.jsxs("p",{children:["Помилка завантаження: ",c]}),e.jsx(w,{onClick:()=>window.location.reload(),className:xe.retryButton,children:"Спробувати знову"})]})}):r.length===0?e.jsx("div",{className:xe.productsGrid,children:e.jsx("div",{className:xe.emptyState,children:e.jsx("p",{children:"Товарів поки немає"})})}):e.jsx("div",{className:xe.productsContainer,children:r.map(i=>e.jsx("div",{className:xe.cardWrapper,children:e.jsx(es,{product:i})},i.id))})},Fn=()=>{const{categorySlug:s}=Ue();return e.jsxs("div",{className:Y.page,children:[e.jsx("h2",{className:Y.title,children:s?.toUpperCase()}),e.jsx(Es,{categorySlug:s})]})},qn=()=>{const{collectionSlug:s}=Ue();return console.log("Collection slug:",s),e.jsxs("div",{className:Y.page,children:[e.jsx("h2",{children:s?.toUpperCase()}),e.jsx(Es,{collectionSlug:s})]})},Un="_title_1lqmk_11",Mn="_section_1lqmk_19",zn="_subtitle_1lqmk_32",Dn="_list_1lqmk_41",K={title:Un,section:Mn,subtitle:zn,list:Dn},Wn=()=>e.jsxs("div",{className:"page",children:[e.jsx("h1",{className:K.title,children:"Політика конфіденційності"}),e.jsx("section",{className:K.section,children:e.jsx("p",{children:"У цій Політиці конфіденційності описано, як FBE («Сайт», «ми», «нас» або «наш») збирає, використовує та розкриває вашу особисту інформацію, коли ви відвідуєте, користуєтеся нашими послугами або робите покупки на сайті desse-swim."})}),e.jsxs("section",{className:K.section,children:[e.jsx("h2",{className:K.subtitle,children:"Зміни в цій Політиці конфіденційності"}),e.jsx("p",{children:"Ми можемо час від часу оновлювати цю Політику, у тому числі для відображення змін у нашій практиці або з інших операційних, юридичних чи нормативних причин."})]}),e.jsxs("section",{className:K.section,children:[e.jsx("h2",{className:K.subtitle,children:"Як ми збираємо та використовуємо вашу особисту інформацію"}),e.jsx("p",{children:"Для надання Послуг ми збираємо вашу особисту інформацію з різних джерел. Інформація, яку ми збираємо, залежить від того, як ви взаємодієте з нашим сайтом та послугами."})]}),e.jsxs("section",{className:K.section,children:[e.jsx("h2",{className:K.subtitle,children:"Інформація, яку ми збираємо"}),e.jsxs("ul",{className:K.list,children:[e.jsx("li",{children:"Основні контактні дані (ім'я, адреса, телефон, email)"}),e.jsx("li",{children:"Інформація про замовлення та покупки"}),e.jsx("li",{children:"Дані облікового запису (логін, пароль)"}),e.jsx("li",{children:"Дані про підтримку клієнтів"})]})]}),e.jsxs("section",{className:K.section,children:[e.jsx("h2",{className:K.subtitle,children:"Використання cookies"}),e.jsx("p",{children:"Ми використовуємо файли cookie для роботи сайту, аналітики та персоналізації досвіду користувача."})]}),e.jsxs("section",{className:K.section,children:[e.jsx("h2",{className:K.subtitle,children:"Розкриття інформації"}),e.jsx("p",{children:"Ми можемо передавати інформацію третім сторонам для виконання послуг, аналітики, маркетингу та безпеки."})]})]}),Gn="_product_76txh_3",Vn="_nameBlock_76txh_22",Hn="_priceWrapper_76txh_36",Jn="_images_76txh_53",Kn="_mainImage_76txh_62",Xn="_noImage_76txh_69",Yn="_info_76txh_81",Qn="_title_76txh_87",Zn="_description_76txh_94",eo="_price_76txh_36",so="_priceSale_76txh_113",to="_priceOriginal_76txh_119",ro="_featuresSection_76txh_126",ao="_featuresList_76txh_140",no="_productForm_76txh_152",oo="_formGroup_76txh_162",co="_colorOptions_76txh_175",io="_colorOption_76txh_175",lo="_selected_76txh_197",uo="_sizeOptions_76txh_203",ho="_sizeOption_76txh_203",mo="_quantityWrapper_76txh_232",po="_quantityBtn_76txh_239",go="_quantityInput_76txh_263",xo="_totalPrice_76txh_280",fo="_addToCartBtn_76txh_291",jo="_success_76txh_312",_o="_loading_76txh_320",bo="_error_76txh_321",yo="_noProduct_76txh_322",vo="_accordion_76txh_370",No="_accordionBtn_76txh_374",So="_accordionContent_76txh_388",wo="_mainImageContainer_76txh_427",Co="_thumbnailContainer_76txh_449",ko="_thumbnail_76txh_449",$o="_activeThumbnail_76txh_496",Io="_thumbnailImage_76txh_500",C={product:Gn,nameBlock:Vn,priceWrapper:Hn,images:Jn,mainImage:Kn,noImage:Xn,info:Yn,title:Qn,description:Zn,price:eo,priceSale:so,priceOriginal:to,featuresSection:ro,featuresList:ao,productForm:no,formGroup:oo,colorOptions:co,colorOption:io,selected:lo,sizeOptions:uo,sizeOption:ho,quantityWrapper:mo,quantityBtn:po,quantityInput:go,totalPrice:xo,addToCartBtn:fo,success:jo,loading:_o,error:bo,noProduct:yo,accordion:vo,accordionBtn:No,accordionContent:So,mainImageContainer:wo,thumbnailContainer:Co,thumbnail:ko,activeThumbnail:$o,thumbnailImage:Io},Po=({productId:s})=>{const[t,r]=u.useState(null),[a,n]=u.useState({variantId:null,size:null,quantity:1}),[o,c]=u.useState(!0),[h,i]=u.useState(null),[l,m]=u.useState(!1),[g,p]=u.useState(!1),[d,f]=u.useState(!1),[_,k]=u.useState(0);u.useEffect(()=>{(async()=>{c(!0),i(null);try{const I=Number(s);if(isNaN(I))throw new Error("Невірний ID продукту");const D=await le.getById(I);r(D),D?.variants?.length&&n(Z=>({...Z,variantId:D.variants[0].id||null,size:D.variants[0].sizes?.[0]||null}))}catch(I){i(I instanceof Error?I.message:"Помилка завантаження продукту")}finally{c(!1)}})()},[s]);const v=t?.variants?t.variants.flatMap(b=>(b.images||[]).map(I=>({...I,variantId:b.id,variantColor:b.color,variantSizes:b.sizes}))):[],R=b=>{const I=v[b];if(!I)return;k(b);const D=I.variantId,Z=I.variantSizes?.[0]||null;n(Os=>({...Os,variantId:D||null,size:Z}))},N=b=>{const I=t?.variants.find(Z=>Z.id===b);n(Z=>({...Z,variantId:b,size:I?.sizes?.[0]||null}));const D=v.findIndex(Z=>Z.variantId===b);D!==-1&&k(D)},$=b=>n(I=>({...I,size:b})),U=b=>{const I=Math.max(1,Math.min(99,Number(b.target.value)));n(D=>({...D,quantity:I}))},E=()=>n(b=>({...b,quantity:Math.min(b.quantity+1,99)})),L=()=>n(b=>({...b,quantity:Math.max(b.quantity-1,1)})),M=async()=>{if(!t)return;if(!a.variantId){i("Будь ласка, оберіть варіант");return}if(!a.size){i("Будь ласка, оберіть розмір.");return}const b=t.variants.find(I=>I.id===a.variantId&&!!a.size&&I.sizes.includes(a.size));if(!b){i("Обраний варіант недоступний");return}m(!0),i(null);try{const I=t.translations?.[0],D=b.priceSale&&b.priceSale<b.price?b.priceSale:b.price||t.priceSale||t.price,Z={productId:t.id,name:I?.name||"Без назви",price:D,color:b.color,size:a.size,quantity:a.quantity,image:b.images?.[0]?.url};await Ne.getState().addCartItem(Z),p(!0),setTimeout(()=>{p(!1)},2e3)}catch(I){i(I instanceof Error?I.message:"Помилка додавання в кошик")}finally{m(!1)}};if(o)return e.jsx("div",{className:C.loading,children:"Завантаження..."});if(h)return e.jsxs("div",{className:C.error,children:["Помилка: ",h]});if(!t)return e.jsx("div",{className:C.noProduct,children:"Продукт не знайдено"});const y=t.translations?.[0],P=t.variants.find(b=>b.id===a.variantId),z=P?.sizes||[],T=v[_],W=(P?.priceSale&&P.priceSale<P.price?P.priceSale:P?.price)||t.priceSale||t.price,fe=W*a.quantity;function re(b){return Object.values(Ye).includes(b)}const O=b=>{const I=b.description||b.description||b.color,D=re(b.color)?$s[b.color]:"#cccccc";return{key:b.id,displayName:I,color:D}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:C.product,children:[e.jsxs("div",{className:C.images,children:[e.jsx("div",{className:C.mainImageContainer,children:T?e.jsx("img",{src:T.url,alt:T.altText||y?.name||"Product image",className:C.mainImage}):e.jsx("div",{className:C.noImage,children:"Фото відсутнє"})}),v.length>0&&e.jsx("div",{className:C.thumbnailContainer,children:v.map((b,I)=>e.jsx("div",{className:`${C.thumbnail} ${I===_?C.activeThumbnail:""}`,onClick:()=>R(I),children:e.jsx("img",{src:b.url,alt:b.altText||`Image ${I+1}`,className:C.thumbnailImage})},`${b.variantId}-${b.url}-${I}`))})]}),e.jsxs("div",{className:C.info,children:[e.jsx("h1",{className:C.title,children:y?.name||"Без назви"}),y?.description&&e.jsx("p",{className:C.description,children:y.description}),e.jsx("div",{className:C.nameBlock,children:e.jsx("div",{className:C.priceWrapper,children:P?.description})}),e.jsx("div",{className:C.priceWrapper,children:e.jsx("span",{className:+t.price>+W.toFixed(2)?C.priceOriginal:C.price,children:P&&P.price?"₴ "+P.price.toFixed(2):"₴ "+t.price})}),+t.price>+W.toFixed(2)&&e.jsx("div",{className:C.priceWrapper,children:e.jsxs("span",{className:C.priceSale,children:["₴",W.toFixed(2)]})}),e.jsxs("div",{className:C.productForm,children:[t.variants.length>0&&e.jsxs("div",{className:C.formGroup,children:[e.jsx("h4",{children:"Варіант:"}),e.jsx("div",{className:C.colorOptions,children:t.variants.map(b=>{const I=O(b);return e.jsx(w,{className:`${C.colorOption} ${a.variantId===b.id?C.selected:""}`,onClick:()=>{b.id&&N(b.id)},style:{backgroundColor:I.color.toLowerCase(),width:"40px",height:"40px",minWidth:"40px",padding:"0",border:a.variantId===b.id?"3px solid #000":"1px solid #ccc"}},I.key)})})]}),z.length>0&&e.jsxs("div",{className:C.formGroup,children:[e.jsx("h4",{children:"Розмір:"}),e.jsx("div",{className:C.sizeOptions,children:z.map(b=>e.jsx(w,{className:`${C.sizeOption} ${a.size===b?C.selected:""}`,onClick:()=>$(b),children:De[b]||b},b))})]}),t.features&&t.features.length>0&&e.jsxs("div",{className:C.featuresSection,children:[e.jsx("h3",{children:"Особливості"}),e.jsx("ul",{className:C.featuresList,children:t.features.sort((b,I)=>b.order-I.order).map(b=>e.jsxs("li",{children:[e.jsx("strong",{children:b.text.split(" ")[0]})," ",b.text.split(" ").slice(1).join(" ")]},b.order+b.text))})]}),e.jsxs("div",{className:C.formGroup,children:[e.jsx("h4",{children:"Кількість:"}),e.jsxs("div",{className:C.quantityWrapper,children:[e.jsx(w,{type:"button",className:C.quantityBtn,onClick:L,disabled:a.quantity<=1,children:"−"}),e.jsx(j,{type:"number",min:"1",max:"99",value:a.quantity,onChange:U,className:C.quantityInput}),e.jsx(w,{type:"button",className:C.quantityBtn,onClick:E,disabled:a.quantity>=99,children:"+"})]})]}),e.jsx("div",{className:C.totalPrice,children:e.jsxs("strong",{children:["Загальна ціна: ₴",fe.toFixed(2)]})}),e.jsx(w,{className:`${C.addToCartBtn} ${g?C.success:""}`,onClick:M,disabled:l,children:l?"Додавання...":g?"✓ Додано в кошик!":"Додати в кошик"})]}),e.jsxs("div",{className:C.accordion,children:[e.jsxs("button",{className:C.accordionBtn,onClick:()=>f(!d),children:["Доставка та повернення ",d?"▲":"▼"]}),d&&e.jsxs("div",{className:C.accordionContent,children:[e.jsxs("ul",{children:[e.jsx("li",{children:"Замовлення по Україні: «Нова пошта» (2-3 робочих дні)"}),e.jsx("li",{children:"Замовлення по Польщі: «Нова пошта» (3-5 робочих днів)"}),e.jsx("li",{children:"Замовлення по США та Канаді: «Canada Post» (1-3 робочих дні)"}),e.jsx("li",{children:"Міжнародна доставка: Meest Express (10-12 робочих днів)"})]}),e.jsxs("p",{children:["Для додаткової інформації звертайтесь у"," ",e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:"Instagram"})]})]})]})]})]})})};function Lo(){const s=Ue(),[t,r]=u.useState(null);return u.useEffect(()=>{r(s.id||null)},[s.id]),t?e.jsx("div",{className:Y.page,children:e.jsx(Po,{productId:t})}):e.jsx("div",{children:"Продукт не знайдено"})}const Eo="_form_ri903_1",Bo="_title_ri903_13",To="_field_ri903_20",Ao="_error_ri903_41",ce={form:Eo,title:Bo,field:To,error:Ao},Oo={async getAll(){try{const{data:s}=await S.get("users?limit=10&skip=0");return We.getState().setUsers(s.users),s.users}catch(s){throw new Error("Не вдалося отримати список користувачів: "+s.message)}},async getById(s){try{const{data:t}=await S.get(`users/${s}`);return t}catch(t){throw new Error("Не вдалося отримати користувача: "+t.message)}},async updateUser(s,t){try{const{data:r}=await S.patch(`users/${s}`,t);return We.getState().updateUserInStore(r),r}catch(r){throw new Error("Не вдалося оновити користувача: "+r.message)}},async sendMessageFromContact(s){try{await S.post("telegram/message",s)}catch(t){throw new Error("Не вдалося відправити повідомлення: "+t.message)}},async deleteUser(s){try{await S.delete(`users/${s}`),We.getState().removeUser(s)}catch(t){throw new Error("Не вдалося видалити користувача: "+t.message)}}},Ro=()=>{const{register:s,handleSubmit:t,reset:r,formState:{errors:a,isSubmitting:n}}=ue(),{t:o}=we(),c=async h=>{try{await Oo.sendMessageFromContact(h),alert("Повідомлення успішно відправлено!"),r()}catch(i){console.error("❌ Помилка відправки",i),alert("Сталася помилка. Спробуйте пізніше.")}};return e.jsxs("form",{className:ce.form,onSubmit:t(c),children:[e.jsx("h2",{className:ce.title,children:o("contact-to-me")}),e.jsxs("div",{className:ce.field,children:[e.jsx(j,{type:"text",label:o("name"),...s("name",{required:"Ім’я обов’язкове"})}),a.name&&e.jsx("span",{className:ce.error,children:a.name.message})]}),e.jsxs("div",{className:ce.field,children:[e.jsx(j,{type:"email",label:"Email",...s("email",{required:"Email обов’язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),a.email&&e.jsx("span",{className:ce.error,children:a.email.message})]}),e.jsxs("div",{className:ce.field,children:[e.jsx("label",{children:o("message")}),e.jsx("textarea",{rows:4,...s("message",{required:"Повідомлення обов’язкове"})}),a.message&&e.jsx("span",{className:ce.error,children:a.message.message})]}),e.jsx(w,{type:"submit",disabled:n,children:o(n?"sending":"send")})]})},Fo=()=>e.jsx("div",{className:"page",children:e.jsx(Ro,{})}),qo=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=ue(),[a,n]=u.useState(null),[o,c]=u.useState(null);console.log("error",a);const h=async i=>{if(i.newPassword!==i.confirmPassword){n("Новий пароль і підтвердження не збігаються");return}try{await he.changePassword(i.currentPassword,i.newPassword),c("Пароль успішно змінено"),n(null)}catch(l){n(l.message||"Помилка при зміні пароля"),c(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Зміна пароля"}),e.jsxs("form",{onSubmit:t(h),className:"form",children:[e.jsx(j,{type:"password",placeholder:"Поточний пароль",...s("currentPassword",{required:"Поточний пароль обов'язковий"})}),r.currentPassword&&e.jsx("p",{className:"error",children:r.currentPassword.message}),e.jsx(j,{type:"password",placeholder:"Новий пароль",...s("newPassword",{required:"Новий пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),r.newPassword&&e.jsx("p",{className:"error",children:r.newPassword.message}),e.jsx(j,{type:"password",placeholder:"Підтвердження нового пароля",...s("confirmPassword",{required:"Підтвердження пароля обов'язкове"})}),r.confirmPassword&&e.jsx("p",{className:"text-error-600",children:r.confirmPassword.message}),a&&e.jsx("p",{className:"error",children:a}),o&&e.jsx("p",{className:"green",children:o}),e.jsx(w,{type:"submit",children:"Змінити пароль"})]})]})},Uo=oe((s,t)=>({orders:[],loading:!1,error:null,setOrders:r=>s({orders:r}),fetchOrders:async(r=!1,a,n=1,o=10)=>{s({loading:!0,error:null});try{const c=await qe.getOrders(r,a,n,o);s({orders:c,loading:!1})}catch(c){s({error:c.message||"Помилка завантаження замовлень",loading:!1})}},updateOrderStatus:async(r,a)=>{s({loading:!0,error:null});try{const n=await qe.updateOrderStatus(r,a),o=t().orders.map(c=>c.id===r?{...c,status:n.status}:c);s({orders:o,loading:!1})}catch(n){s({error:n.message||"Помилка оновлення статусу замовлення",loading:!1})}}}));var ss=(s=>(s.ADMIN="ADMIN",s.USER="USER",s.CUSTOMER="CUSTOMER",s))(ss||{}),ye=(s=>(s.PENDING="PENDING",s.PROCESSING="PROCESSING",s.COMPLETED="COMPLETED",s.CANCELED="CANCELED",s))(ye||{});const Mo=({trackingNumber:s,full:t=!1})=>{const[r,a]=u.useState(null),[n,o]=u.useState(!1),[c,h]=u.useState(null);return u.useEffect(()=>{if(!s)return;(async()=>{try{o(!0),h(null);const l=await Re.getTracking(s);a(l)}catch(l){h(l.message||"Не вдалося завантажити інформацію")}finally{o(!1)}})()},[s]),s?n?e.jsx("p",{children:"Завантаження інформації..."}):c?e.jsxs("p",{className:"error",children:["Помилка: ",c]}):r?e.jsxs("div",{className:"tracking-info",children:[e.jsx("h4",{children:"Інформація про відправлення"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Номер ТТН:"})," ",r.Number]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Статус:"})," ",r.Status]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Дата створення:"})," ",r.DateCreated]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Місто отримувача:"})," ",r.CityRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Відділення отримувача:"})," ",r.WarehouseRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Оголошена вартість:"})," ",r.DocumentCost," ₴"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Вага:"})," ",r.FactualWeight," кг"]}),r.ScheduledDeliveryDate&&e.jsxs("li",{children:[e.jsx("strong",{children:"Планова дата доставки:"})," ",r.ScheduledDeliveryDate]})]}),t&&e.jsxs("div",{className:"tracking-details",children:[e.jsx("h5",{children:"Детальна інформація:"}),e.jsx("table",{children:e.jsx("tbody",{children:Object.entries(r).map(([i,l])=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:i})}),e.jsx("td",{children:String(l)})]},i))})})]})]}):e.jsx("p",{children:"Інформація відсутня"}):e.jsx("p",{children:"Номер посилки відсутній"})},ds={[ye.PENDING]:"Очікує обробки",[ye.PROCESSING]:"В обробці",[ye.COMPLETED]:"Виконано",[ye.CANCELED]:"Скасовано"},zo=({order:s,isAdmin:t,updatingOrderId:r,onStatusChange:a})=>{const n=Object.values(ye).map(i=>({value:i,label:ds[i]})),[o,c]=u.useState(s.trackingNumber||""),h=()=>{o&&qe.updateOrderItemTracking(s.id,o)};return e.jsxs("li",{className:"order-item",children:[e.jsxs("div",{className:"order-header-section",children:[e.jsxs("h3",{children:["Замовлення #",s.id," —"," ",new Date(s.createdAt).toLocaleDateString("uk-UA")]}),e.jsxs("div",{className:"order-status-section",children:[t?e.jsx(Fe,{options:n,value:s.status,onChange:i=>a(s.id,i),disabled:r===s.id}):e.jsx("span",{className:`status-badge status-${s.status.toLowerCase()}`,children:ds[s.status]}),r===s.id&&e.jsx("span",{className:"updating-status",children:"Оновлюється..."})]})]}),e.jsxs("p",{className:"order-details",children:[s.guestName&&e.jsxs(e.Fragment,{children:["Ім'я: ",s.guestName]}),s.guestPhone&&e.jsxs(e.Fragment,{children:[", Телефон: ",s.guestPhone]}),s.guestEmail&&e.jsxs(e.Fragment,{children:[", Email: ",s.guestEmail]})]}),s.novaPostCity&&s.novaPostBranch&&e.jsxs("p",{children:["Доставка: Нова Пошта, ",s.novaPostCity,", Відділення №",s.novaPostBranch]}),e.jsxs("p",{children:["Оплата:"," ",s.paymentMethod==="COD"?"Накладений платіж":s.paymentMethod]}),e.jsxs("div",{className:"order-tracking-section",children:[t?e.jsxs("div",{className:"tracking-field",children:[e.jsx("input",{type:"text",placeholder:"Номер посилки",value:o,onChange:i=>c(i.target.value)}),e.jsx("button",{type:"button",onClick:h,children:"Зберегти"})]}):s.trackingNumber&&e.jsxs("p",{children:["Номер посилки: ",s.trackingNumber]}),s.trackingNumber&&e.jsxs("div",{className:"tracking-popover-wrapper",children:[e.jsxs("div",{className:"tracking-trigger",children:["Номер посилки: ",s.trackingNumber]}),e.jsx("div",{className:"tracking-popover",children:e.jsx(Mo,{trackingNumber:s.trackingNumber})})]})]}),e.jsx("ul",{className:"order-items",children:s.items.map(i=>e.jsxs("li",{className:"order-item-row",children:[e.jsx("img",{src:i.image||"",alt:i.name,className:"item-image"}),e.jsxs("div",{children:[e.jsx("span",{children:i.name}),i.color&&e.jsxs("span",{children:[", Колір: ",i.color]}),i.size&&e.jsxs("span",{children:[", Розмір: ",i.size]}),e.jsxs("span",{children:[", Кількість: ",i.quantity]}),e.jsxs("span",{children:[", Ціна:"," ",i.priceSale?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"price-old",children:[i.price,"₴"]})," ",e.jsxs("span",{className:"price-sale",children:[i.priceSale,"₴"]})]}):e.jsxs(e.Fragment,{children:[i.finalPrice,"₴"]})]})]})]},i.id))}),e.jsxs("p",{children:["Загальна сума:"," ",s.items.reduce((i,l)=>i+l.finalPrice*l.quantity,0),"₴"]})]})},Do=(s,t)=>{const[r,a]=u.useState(s);return u.useEffect(()=>{const n=setTimeout(()=>a(s),t);return()=>clearTimeout(n)},[s,t]),r},Wo=()=>{const{user:s}=q(),{orders:t,loading:r,fetchOrders:a,updateOrderStatus:n,error:o}=Uo(),[c,h]=u.useState(""),[i,l]=u.useState(""),[m,g]=u.useState(""),[p,d]=u.useState(1),f=10,[_,k]=u.useState(null),A=u.useRef(null),v=u.useRef(null),R=u.useRef(null),N=u.useRef(null),$=u.useRef(null),[U,E]=u.useState(null),[L,M]=u.useState(0),y=s?.role===ss.ADMIN,P=Do(c,1e3),z=()=>{const O=document.activeElement;O===A.current?E("orderId"):O===v.current?E("dateFrom"):O===R.current?E("dateTo"):O===N.current?E("filterButton"):O===$.current?E("clearButton"):E(null)},T=u.useCallback(()=>{U&&setTimeout(()=>{switch(U){case"orderId":A.current?.focus(),A.current?.setSelectionRange(L,L);break;case"dateFrom":v.current?.focus();break;case"dateTo":R.current?.focus();break;case"filterButton":N.current?.focus();break;case"clearButton":$.current?.focus();break}E(null)},50)},[U,L]),W=u.useCallback(()=>{if(!s)return;z();const O={orderId:P?+P:void 0,dateFrom:i||void 0,dateTo:m||void 0};a(y,O,p,f)},[s,P,i,m,p,f,a,y]);u.useEffect(()=>W(),[W]),u.useEffect(()=>{r||T()},[r,T]);const fe=async(O,b)=>{try{k(O),await n(O,b)}finally{k(null)}},re=()=>{E("clearButton"),h(""),l(""),g(""),d(1)};return e.jsxs("div",{className:"orders-container",children:[e.jsx("h1",{children:y?"Всі замовлення":"Мої замовлення"}),o&&e.jsx("div",{className:"error-message",children:o}),e.jsxs("div",{className:"filters  boxLine",children:[e.jsx(j,{ref:A,type:"number",label:"Номер замовлення",placeholder:"Номер замовлення",value:c,onChange:O=>{M(O.target.selectionStart||0),h(O.target.value)},onFocus:()=>E("orderId")}),e.jsx(j,{ref:v,type:"date",label:"Дата від",value:i,onChange:O=>l(O.target.value),onFocus:()=>E("dateFrom")}),e.jsx(j,{ref:R,type:"date",label:"Дата до",value:m,onChange:O=>g(O.target.value),onFocus:()=>E("dateTo")}),e.jsxs("div",{className:"boxLine",children:[e.jsx(w,{ref:N,onClick:W,variant:"link",children:"Фільтрувати"}),e.jsx(w,{ref:$,onClick:re,variant:"secondary",children:"Очистити"})]})]}),P!==c&&e.jsxs("div",{className:"search-indicator",children:["Пошук замовлення #",c,"..."]}),e.jsx("ul",{className:"orders-list",children:t.length?t.map(O=>e.jsx(zo,{order:O,isAdmin:y,updatingOrderId:_,onStatusChange:fe},O.id)):e.jsx("li",{children:"Немає замовлень"})}),e.jsxs("div",{className:"pagination",children:[e.jsx(w,{onClick:()=>d(O=>Math.max(O-1,1)),disabled:p===1,variant:"link",children:"Попередня"}),e.jsxs("span",{children:["Сторінка ",p]}),e.jsx(w,{onClick:()=>d(O=>O+1),disabled:t.length<f,variant:"link",children:"Наступна"})]}),r&&!_&&e.jsx("div",{className:"loading",children:"Завантаження..."})]})},Go=()=>e.jsx("div",{className:"page",children:e.jsx(Wo,{})}),Vo=()=>e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Політика повернення та обміну"}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Країни"}),e.jsx("p",{children:"Ми здійснюємо обслуговування та продаж товарів лише на території України."})]}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Повернення товарів"}),e.jsxs("p",{children:["Повернення можливе ",e.jsx("strong",{children:"лише у випадку, якщо товар має виробничий дефект  або був пошкоджений під час доставки. "})]}),e.jsxs("p",{children:["Для оформлення повернення, будь ласка, зв'яжіться з нашою службою підтримки протягом"," ",e.jsx("strong",{children:"14 днів"})," з моменту отримання замовлення."]})]}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Обміни"}),e.jsx("p",{children:"Ми приймаємо обміни товарів на інший розмір чи модель у випадку наявності відповідного товару на складі."}),e.jsx("p",{children:"Витрати на пересилання при обміні оплачує покупець, за винятком випадків браку чи дефекту."})]}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Як оформити повернення чи обмін"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Зверніться до нашої підтримки  ",e.jsx(V,{to:"/contact",className:"blue",children:" у розділі Контакти"})]}),e.jsx("li",{children:"Надайте фото товару та опис проблеми."}),e.jsx("li",{children:"Очікуйте підтвердження та інструкції від менеджера."})]})]})]}),Ho=[{path:"/login",element:e.jsx(Ja,{})},{path:"/register",element:e.jsx(hn,{})},{path:"/forgot-password",element:e.jsx(ca,{})},{path:"/reset-password",element:e.jsx(ma,{})},{path:"/change-password",element:e.jsx(qo,{})},{path:"/about",element:e.jsx(nn,{})},{path:"/contact",element:e.jsx(Fo,{})},{path:"/privacy",element:e.jsx(Wn,{})},{path:"/product/:id",element:e.jsx(Lo,{})},{path:"/category/:categorySlug",element:e.jsx(Fn,{})},{path:"/group/:collectionSlug",element:e.jsx(qn,{})},{path:"/cart",element:e.jsx(An,{})},{path:"/checkout",element:e.jsx(Ra,{})},{path:"/delivery-terms",element:e.jsx(ba,{})},{path:"/return-policy",element:e.jsx(Vo,{})}],Jo=[{path:"/",element:e.jsx(cs,{})},{path:"/home",element:e.jsx(cs,{})}],Ko=[{path:"/profile",element:e.jsx(Ha,{})},{path:"/orders",element:e.jsx(Go,{})},{path:"/admin",element:e.jsx(vn,{}),children:[{index:!0,element:e.jsx(as,{})},{path:"createproduct",element:e.jsx(kr,{})},{path:"edit-product/:id",element:e.jsx(oa,{})},{path:"create-category",element:e.jsx(Xt,{})},{path:"create-collection",element:e.jsx(Yt,{})},{path:"dashboard",element:e.jsx(as,{})}]}],us={path:"*",element:e.jsx(Ka,{})},Xo="_footer_3cdk6_2",Yo="_container_3cdk6_11",Qo="_menu_3cdk6_18",Zo="_social_3cdk6_48",ec="_copy_3cdk6_61",sc="_mail_3cdk6_67",_e={footer:Xo,container:Yo,menu:Qo,social:Zo,copy:ec,mail:sc},tc=[{title:"About",url:"/about"},{title:"Contact",url:"/contact"},{title:"Privacy",url:"/privacy"},{title:"ReturnPolicy",url:"/return-policy"}],Bs=()=>e.jsx("footer",{className:_e.footer,children:e.jsxs("div",{className:_e.container,children:[e.jsx("div",{className:_e.menu,children:e.jsx("ul",{children:tc.map(s=>e.jsx("li",{children:e.jsx(V,{to:s.url,children:s.title})},s.title))})}),e.jsx("div",{className:_e.social,children:e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:e.jsx(Ms,{})})}),e.jsxs("div",{className:_e.copy,children:["© ",new Date().getFullYear()," ",e.jsx("a",{href:"mailto:office.fly.app@gmail.com",className:_e.mail,children:"FlyApp"})," ","Всі права захищені."]})]})}),rc="_headerMenu_10icq_3",ac="_menuList_10icq_25",nc="_menuListOpen_10icq_51",oc="_menuItem_10icq_67",cc="_menuLink_10icq_92",ic="_submenu_10icq_117",lc="_submenuItem_10icq_145",dc="_arrow_10icq_168",uc="_open_10icq_177",hc="_burger_10icq_187",mc="_block_10icq_224",G={headerMenu:rc,menuList:ac,menuListOpen:nc,menuItem:oc,menuLink:cc,submenu:ic,submenuItem:lc,arrow:dc,open:uc,burger:hc,block:mc},pc="_subsubmenu_q82db_1",gc="_open_q82db_15",xc="_submenuItem_q82db_19",fc="_categoryContainer_q82db_25",jc="_categoryLink_q82db_39",_c="_spacer_q82db_54",ie={subsubmenu:pc,open:gc,submenuItem:xc,categoryContainer:fc,categoryLink:jc,spacer:_c},bc=({categories:s})=>{const[t,r]=u.useState(new Set),a=typeof window<"u"&&window.innerWidth<768,n=i=>{r(l=>{const m=new Set(l);return m.has(i)?m.delete(i):m.add(i),m})},o=i=>{a||r(l=>new Set(l).add(i))},c=i=>{a||r(l=>{const m=new Set(l);return m.delete(i),m})},h=(i=null)=>{const l=s.filter(m=>i===null?!m.parentId:m.parentId===i);return l.length?e.jsx("ul",{className:`${i===null?ie.submenu:ie.subsubmenu} ${i!==null&&t.has(i)?ie.open:""}`,children:l.map(m=>{const g=s.some(d=>d.parentId===m.id),p=t.has(m.id);return e.jsxs("li",{className:ie.submenuItem,onMouseEnter:g?()=>o(m.id):void 0,onMouseLeave:g?()=>c(m.id):void 0,children:[e.jsxs("div",{className:ie.categoryContainer,onClick:a&&g?()=>n(m.id):void 0,children:[e.jsx("a",{href:`/category/${m.slug}`,className:ie.categoryLink,children:m.name}),g?e.jsx("span",{className:ie.iconContainer,children:p?e.jsx(fs,{size:16}):e.jsx(js,{size:16})}):e.jsx("span",{className:ie.spacer})]}),g&&p&&h(m.id)]},m.id)})}):null};return e.jsx(e.Fragment,{children:h()})},yc=({collections:s})=>e.jsx(e.Fragment,{children:s.map(t=>e.jsx("li",{className:G.submenuItem,children:e.jsx("a",{href:`/group/${t.slug||t.id}`,className:G.submenuLink,children:t.name})},t.id))});function Ts(s){const[t,r]=u.useState(()=>typeof window<"u"?window.matchMedia(s).matches:!1);return u.useEffect(()=>{const a=window.matchMedia(s),n=o=>r(o.matches);return a.addEventListener("change",n),()=>a.removeEventListener("change",n)},[s]),t}const vc="About",Nc="Contact",Sc="Shop",wc="Home",Cc="Categories",kc="Collections",$c="FirstName",Ic="Message",Pc="For those who play beautifully",Lc="Choose by category",Ec="Send",Bc="Sending...",Tc="FBE is a Ukrainian brand of modern clothing that combines quality, style and affordability. We create things for those who value comfort and individuality in everyday life, as well as for enjoyable sports and active recreation that brings pleasure.",Ac="To provide quality clothing that enhances each client's personality and makes them feel confident. We believe that stylish and functional clothing should be accessible to everyone.",Oc={about:vc,contact:Nc,shop:Sc,home:wc,categories:Cc,collections:kc,"fast-delivery":"Fast delivery","change-return":"Exchanges and Returns","free-delivery":"Free delivery within Ukraine for orders over 5000 UAH","contact-to-me":"Contact us",name:$c,message:Ic,whoplay:Pc,choosecategory:Lc,send:Ec,sending:Bc,"about-h":"About FBE","about-h1":"Our mission","about-h2":"What sets us apart","about-h3":"Our values","about-h4":"Delivery",about1:Tc,about2:Ac,"about3-1":"Quality of materials — we use only proven fabrics and accessories","about3-2":"Contemporary design — we follow global trends and create our own","about3-3":"Affordable prices — a price-quality ratio that will pleasantly surprise you","about3-4":"Fast delivery — we operate throughout Ukraine, Poland, the USA, and Canada","about4-1":"Quality — each item undergoes thorough quality control","about4-2":"Style — we create clothing for modern and active people","about4-3":"Service — individual approach to each client","about4-4":"Innovation — we constantly improve our processes and products","about5-1":"Ukraine: Nova Poshta (2-3 business days)","about5-2":"Poland: Nova Poshta (3-5 business days)","about5-3":"USA & Canada: Canada Post (1-3 business days)","about5-4":"International Shipping: Meest Express (10-12 business days)"},Rc="Про нас",Fc="Контакти",qc="Maгазин",Uc="Головна",Mc="Категорії",zc="Колекції",Dc="Ім’я",Wc="Повідомлення",Gc="Відправити",Vc="Відправка...",Hc="Для тих, хто грає красиво",Jc="Обирайте за категорією",Kc="FBE — український бренд сучасного одягу, який поєднує якість, стиль та доступність. Ми створюємо речі для тих, хто цінує комфорт та індивідуальність у щоденному житті, а також для приємного спорту й активного відпочинку, що приносить задоволення.",Xc="Надавати якісний одяг, який підкреслює особистість кожного клієнта та робить їх впевненими в собі. Ми віримо, що стильний та функціональний одяг має бути доступним для кожного.",Yc={about:Rc,contact:Fc,shop:qc,home:Uc,categories:Mc,collections:zc,"fast-delivery":"Швидка доставка","change-return":"Обмін і Повернення","free-delivery":"Доставка від 5000 грн по Україні безкоштовна","contact-to-me":"Зв'яжіться з нами",name:Dc,message:Wc,send:Gc,sending:Vc,whoplay:Hc,choosecategory:Jc,"about-h":"Про FBE","about-h1":"Наша місія","about-h2":"Що нас відрізняє","about-h3":"Наші цінності","about-h4":"Доставка",about1:Kc,about2:Xc,"about3-1":"Якість матеріалів — використовуємо тільки перевірені тканини та фурнітуру","about3-2":"Актуальний дизайн — слідкуємо за світовими трендами та створюємо власні","about3-3":"Доступні ціни — співвідношення ціна-якість, яке вас приємно здивує","about3-4":"Швидка доставка — працюємо по всій Україні, Польщі, США та Канаді","about4-1":"Якість — кожна річ проходить ретельний контроль якості","about4-2":"Стиль — створюємо одяг для сучасних та активних людей","about4-3":"Сервіс — індивідуальний підхід до кожного клієнта","about4-4":"Інновації — постійно вдосконалюємо наші процеси та продукти","about5-1":"Україна: Нова пошта (2-3 робочих дні)","about5-2":"Польща: Нова пошта (3-5 робочих днів)","about5-3":"США та Канада: Canada Post (1-3 робочих дні)","about5-4":"Міжнародна доставка: Meest Express (10-12 робочих днів)"},Qc={en:{translation:Oc},uk:{translation:Yc}},Zc=localStorage.getItem("language")||"uk";Ke.use(zs).init({resources:Qc,lng:Zc,fallbackLng:"uk",interpolation:{escapeValue:!1}});const ei=localStorage.getItem("language")||Ke.language,Je=oe(s=>({lang:ei,setLang:t=>{Ke.changeLanguage(t),localStorage.setItem("language",t),s({lang:t})}})),si="_switcher_2c75z_1",ti="_uk_2c75z_21",ri="_en_2c75z_24",ai="_hidden_2c75z_27",Le={switcher:si,"lang-btn":"_lang-btn_2c75z_6",uk:ti,en:ri,hidden:ai},ni=()=>{const s=Je(c=>c.lang),t=Je(c=>c.setLang),[r,a]=u.useState(!1),n=s==="uk"?"en":"uk",o=()=>{t(n),a(!1)};return e.jsxs("div",{className:Le.switcher,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[e.jsx("button",{className:`${Le["lang-btn"]} ${Le[s]}`,children:s.toUpperCase()}),e.jsx("button",{className:`${Le["lang-btn"]} ${Le[n]}`,onClick:o,style:{opacity:r?1:0,pointerEvents:r?"auto":"none",transform:r?"translateX(0)":"translateX(-10px)"},children:n.toUpperCase()})]})},oi=({textColor:s})=>{const[t,r]=u.useState(null),[a,n]=u.useState(!1),[o,c]=u.useState(null),{categories:h,fetchCategories:i}=ze(),{collections:l,fetchCollections:m}=Xe(),{user:g}=q(),{t:p}=we(),d=Je($=>$.lang);u.useEffect(()=>{i(),m()},[i,m]);const f=u.useMemo(()=>[{label:p("home"),link:"/"},{label:p("shop"),submenu:!0},{label:p("about"),link:"/about"},{label:p("contact"),link:"/contact"},...g?.role===ss.ADMIN?[{label:"Адмінка",link:"/admin"}]:[]],[g,d,p]),_=()=>{n(!a),c(null)},k=$=>{c(o===$?null:$)},A={color:s,transition:"color 0.3s ease",backgroundColor:"transparent"},v={borderColor:`transparent ${s} ${s} transparent`,transition:"border-color 0.3s ease"},R={backgroundColor:s,transition:"background-color 0.3s ease"},N=Ts("(max-width: 950px)");return e.jsxs("nav",{className:G.headerMenu,children:[e.jsx(ni,{}),N&&e.jsxs(w,{className:`${G.burger} ${a?G.open:""}`,onClick:_,"aria-label":"Toggle menu",style:A,children:[e.jsx("span",{style:R}),e.jsx("span",{style:R}),e.jsx("span",{style:R})]}),e.jsx("ul",{className:`${G.menuList} ${a?G.menuListOpen:""}`,children:f.map(($,U)=>e.jsx("li",{className:G.menuItem,onMouseEnter:()=>!a&&r(U),onMouseLeave:()=>!a&&r(null),children:$.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>k(U),"aria-expanded":o===U,style:A,children:[$.label,e.jsx("span",{className:`${G.arrow} ${o===U?G.open:""}`,style:v})]}),(t===U||o===U)&&e.jsxs("ul",{className:G.submenu,children:[e.jsxs("div",{className:G.block,children:[e.jsx("li",{className:"submenuTitle",children:p("categories")}),e.jsx(bc,{categories:h})]}),e.jsxs("div",{className:G.block,children:[e.jsx("li",{className:"submenuTitle",children:p("collections")}),e.jsx(yc,{collections:l})]})]})]}):e.jsx("a",{href:$.link,className:G.menuLink,style:A,children:$.label})},U))})]})},ci="_header_1vrs6_3",ii="_logo_1vrs6_38",li="_main_1vrs6_65",di="_sub_1vrs6_77",ui="_authBlock_1vrs6_107",hi="_authBlockUser_1vrs6_137",mi="_userName_1vrs6_147",pi="_shoppingCart_1vrs6_274",gi="_profileMenu_1vrs6_285",xi="_dropdown_1vrs6_290",fi="_logoutBtn_1vrs6_305",ee={header:ci,logo:ii,main:li,sub:di,authBlock:ui,authBlockUser:hi,userName:mi,shoppingCart:pi,profileMenu:gi,dropdown:xi,logoutBtn:fi},As=()=>{const{logout:s,accessToken:t,user:r}=q(),{theme:a}=ws(),[n,o]=u.useState("#333333"),c=u.useRef(null),[h,i]=u.useState(!1),{cart:l,fetchCart:m}=Ne(),g=Ts("(max-width: 950px)");return u.useEffect(()=>{(!h||r&&!l.length)&&(m(),i(!0))},[r?.id]),u.useEffect(()=>{t||i(!1)},[t]),u.useEffect(()=>{const p=()=>{const A=document.querySelectorAll("[data-bg]"),v=c.current?.getBoundingClientRect();if(!v)return;let R=a==="dark";A.forEach(N=>{const $=N.getBoundingClientRect();if($.top<v.bottom&&$.bottom>v.top){const U=N.getAttribute("data-bg");U==="dark"?R=!0:U==="light"&&(R=!1)}}),o(R?"#ffffff":"#333333")},d=new IntersectionObserver(A=>{A.forEach(v=>{v.isIntersecting&&p()})},{rootMargin:"0px 0px -80% 0px"});document.querySelectorAll("section, .hero, .section, main > div, [data-section]").forEach(A=>d.observe(A)),p();let _;const k=()=>{clearTimeout(_),_=window.setTimeout(p,100)};return window.addEventListener("scroll",k),()=>{d.disconnect(),clearTimeout(_),window.removeEventListener("scroll",k)}},[a]),e.jsxs("div",{ref:c,className:ee.header,style:{color:n,transition:"color 0.3s ease"},children:[e.jsx(V,{to:"/home",children:e.jsxs("div",{className:ee.logo,children:[e.jsx("span",{className:ee.main,children:"fbe"}),e.jsx("span",{className:ee.sub,children:"full body era"})]})}),e.jsx(oi,{textColor:n}),e.jsxs("div",{className:`${ee.authBlock} ${r?ee.authBlockUser:""}`,children:[t?e.jsxs("div",{className:ee.profileMenu,children:[e.jsx("span",{className:ee.userName,style:{color:n,transition:"color 0.3s ease"},children:e.jsxs(V,{to:"/profile",className:"grey boxLine",children:[!g&&e.jsx(ts,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.3rem",transition:"color 0.3s ease"}}),(r?.last_name?.[0]??"").toUpperCase(),(r?.first_name?.[0]??"").toUpperCase()]})}),e.jsx("div",{className:ee.dropdown,children:e.jsx("button",{className:ee.logoutBtn,onClick:s,style:{color:n,border:"none",cursor:"pointer"},children:"Logout"})})]}):e.jsx(V,{to:"/login",children:e.jsx(ts,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease"}})}),e.jsxs(V,{to:"/cart",className:ee.shoppingCart,children:[e.jsx(Ds,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease",marginLeft:"10px"}}),e.jsx("span",{children:l&&l.length>0?l.length:""})]})]})]})},ji="_dark_1eti1_1",_i="_darkContent_1eti1_11",bi="_title_1eti1_20",yi="_description_1eti1_25",vi="_headerTop_1eti1_46",Ni="_layout_1eti1_68",Si="_content_1eti1_106",wi="_contentSection_1eti1_115",X={dark:ji,darkContent:_i,title:bi,description:yi,headerTop:vi,layout:Ni,content:Si,contentSection:wi};function Ci({children:s}){const{t}=we();return e.jsxs("div",{className:X.layout,children:[e.jsx(As,{}),e.jsxs("main",{className:X.content,children:[e.jsx("section",{"data-bg":"dark",className:`hero-section ${X.headerSection}`,children:e.jsx("div",{className:X.dark,children:e.jsxs("div",{className:X.darkContent,children:[e.jsx("h1",{className:X.title,children:"FULL BODY ERA"}),e.jsx("p",{className:X.description,children:t("whoplay")})]})})}),e.jsx("section",{"data-bg":"light",className:`content-section ${X.contentSection}`,children:s})]}),e.jsx(Bs,{})]})}function hs({children:s}){const{t}=we();return e.jsxs("div",{className:X.layout,children:[e.jsxs("section",{"data-bg":"light",className:`content-section ${X.contentSection} `,children:[e.jsxs("ul",{className:X.headerTop,children:[e.jsx("li",{children:t("fast-delivery")}),e.jsx("li",{children:t("free-delivery")}),e.jsx("li",{children:t("change-return")})]}),e.jsx(As,{})]}),e.jsx("section",{"data-bg":"light",className:`content-section ${X.contentSection}`,children:e.jsx("main",{className:X.content,children:s})}),e.jsx(Bs,{})]})}function ki(){const{theme:s}=ws(),{accessToken:t}=q();return e.jsx("div",{className:`${s}`,children:e.jsxs(Ws,{children:[Jo.map(({path:r,element:a})=>e.jsx(Ce,{path:r,element:e.jsx(Ci,{children:a})},r)),Ho.map(({path:r,element:a})=>e.jsx(Ce,{path:r,element:e.jsx(hs,{children:a})},r)),Ko.map(({path:r,element:a,children:n})=>e.jsx(Ce,{path:r,element:t?e.jsx(hs,{children:a}):e.jsx(Gs,{to:"/login",replace:!0}),children:n&&n.map(o=>e.jsx(Ce,{index:o.index,path:o.path,element:o.element},o.path||"index"))},r)),e.jsx(Ce,{path:us.path,element:us.element})]})})}Vs.createRoot(document.getElementById("root")).render(e.jsx(ve.StrictMode,{children:e.jsx(Hs,{basename:"/",children:e.jsx(ki,{})})}));
