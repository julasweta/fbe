import{c as ce,R as Se,j as e,r as u,P as fs,F as js,S as ys,X as _s,C as vs,a as bs,b as Xe,d as Ns,T as Ss,u as ue,e as me,i as Gs,L as V,f as ye,h as We,k as Vs,l as he,m as ks,n as ws,O as Hs,H as Js,o as Ks,p as ns,q as Xs,s as Ys,t as ke,N as Qs,v as Zs,B as et}from"./react-vendor-CzngjZU8.js";import{i as st,j as Cs,k as Qe,N as $s,E as tt}from"./vendor-DdMLshvE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const Is=ce(s=>({theme:localStorage.getItem("theme")||"light",toggleTheme:()=>s(t=>{const a=t.theme==="light"?"dark":"light";return localStorage.setItem("theme",a),{theme:a}}),setTheme:t=>s(()=>(localStorage.setItem("theme",t),{theme:t}))})),os=localStorage.getItem("user"),at=os?JSON.parse(os):null,U=ce(s=>({accessToken:localStorage.getItem("accessToken")||null,refreshToken:localStorage.getItem("refreshToken")||null,user:at,login:(t,a,r)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",a),localStorage.setItem("user",JSON.stringify(r)),s({accessToken:t,refreshToken:a,user:r})},setUser:t=>{t?localStorage.setItem("user",JSON.stringify(t)):localStorage.removeItem("user"),s({user:t})},setTokens:(t,a)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",a),s({accessToken:t,refreshToken:a})},logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("cart"),s({accessToken:null,refreshToken:null,user:null})},forgotPassword:t=>{pe.forgotPassword(t)}})),Je=ce(s=>({users:[],setUsers:t=>s({users:t}),updateUserInStore:t=>s(a=>({users:a.users.map(r=>r.id===t.id?t:r)})),removeUser:t=>s(a=>({users:a.users.filter(r=>r.id!==t)}))})),de={async getAll(s){const{data:t}=await I.get(`products?limit=${s?.limit}&skip=${s?.skip}&category=${s?.categorySlug}&collection=${s?.collectionSlug}`);return t.data},async getById(s){const{data:t}=await I.get(`products/${s}`);return t},async getProductById(s){return this.getById(s)},async addProduct(s){const{data:t}=await I.post("products",s);return t},async updateProduct(s,t){console.log("ProductService: Updating product:",s,t);const{data:a}=await I.patch(`products/${s}`,t);return a},async deleteProduct(s){console.log("ProductService: Deleting product:",s),await I.delete(`products/${s}`)}},Ge=ce(s=>({products:[],isLoading:!1,error:null,setProducts:t=>s({products:t,error:null}),addProduct:t=>s(a=>({products:[...a.products,t],error:null})),updateProduct:t=>s(a=>({products:a.products.map(r=>r.id===t.id?t:r),error:null})),removeProduct:t=>s(a=>({products:a.products.filter(r=>r.id!==t),error:null})),setLoading:t=>s({isLoading:t}),setError:t=>s({error:t,isLoading:!1}),fetchProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping fetchProducts on server"),s({isLoading:!1,error:null,products:[]});return}s({isLoading:!0,error:null});try{const a=await de.getAll(t);s({products:a,isLoading:!1})}catch(a){console.error("❌ Error fetching products:",a),s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1})}},appendProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping appendProducts on server");return}s({isLoading:!0,error:null});try{const a=await de.getAll(t);s(r=>({products:[...r.products,...a],isLoading:!1}))}catch(a){s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1})}},createProduct:async t=>{if(typeof window>"u")throw new Error("createProduct can only be called on client side");s({isLoading:!0,error:null});try{const a=await de.addProduct(t);s(r=>({products:[...r.products,a],isLoading:!1}))}catch(a){throw s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1}),a}},editProduct:async(t,a)=>{if(typeof window>"u")throw new Error("editProduct can only be called on client side");s({isLoading:!0,error:null});try{const r=await de.updateProduct(t,a);s(n=>({products:n.products.map(o=>o.id===t?r:o),isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}},deleteProduct:async t=>{if(typeof window>"u")throw new Error("deleteProduct can only be called on client side");s({isLoading:!0,error:null});try{await de.deleteProduct(t),s(a=>({products:a.products.filter(r=>r.id!==t),isLoading:!1}))}catch(a){throw s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1}),a}}})),pe={register:s=>I.post("auth/register",s),async login(s){let t;try{t=(await I.post("auth/login",s)).data}catch(a){if(console.error("[AuthService] Error during /auth/login request:",a),console.error("[AuthService] Error status:",a?.response?.status),a?.response){const r=a.response.status,n=a.response.data||{};if(r===401){let o="Неправильний email або пароль";throw typeof n=="string"?o=n:n.message&&typeof n.message=="string"?o=n.message:n.error&&typeof n.error=="string"?o=n.error:n.detail&&typeof n.detail=="string"&&(o=n.detail),console.log("[AuthService] Throwing 401 error with message:",o),new Error(o)}if(r===400){let o="Некоректні дані входу";throw typeof n=="string"?o=n:n.message&&typeof n.message=="string"?o=n.message:n.error&&typeof n.error=="string"&&(o=n.error),new Error(o)}if(n.message&&typeof n.message=="string")throw new Error(n.message);if(n.error&&typeof n.error=="string")throw new Error(n.error)}throw a instanceof Error?a:new Error("Помилка під час входу")}if(!t.accessToken||!t.refreshToken)throw console.error("[AuthService] Missing tokens in response"),new Error("Сервер не повернув токени авторизації");U.getState().setTokens(t.accessToken,t.refreshToken);try{const{data:a}=await this.me();return U.getState().login(t.accessToken,t.refreshToken,a),a}catch(a){throw console.error("[AuthService] Failed to fetch user after login:",a),U.getState().logout(),new Error("Не вдалося отримати дані користувача")}},async refresh(){const s=U.getState().refreshToken;if(!s)throw new Error("Токен оновлення відсутній");try{const{data:t}=await I.post("auth/refresh",{refresh:s});if(!t.accessToken||!t.refreshToken)throw new Error("Сервер не повернув нові токени");U.getState().setTokens(t.accessToken,t.refreshToken)}catch{throw U.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}},async me(){try{return await I.get("users/me")}catch(s){if(s?.response?.status===401)try{return await this.refresh(),await I.get("users/me")}catch{throw U.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}throw s}},async updateUser(s,t){try{const{data:a}=await I.patch(`users/update/${t}`,s),r=U.getState();return r.accessToken&&r.refreshToken&&U.getState().login(r.accessToken,r.refreshToken,a),a}catch(a){throw new Error(a?a.response.data.error.message:"Помилка оновлення профілю")}},async logout(){const s=U.getState().refreshToken;if(s)try{await I.post("auth/logout",{refresh:s})}catch{}U.getState().logout()},async forgotPassword(s){try{await I.post("auth/forgot-password",{email:s})}catch(t){throw new Error(t instanceof Error?t.message:"Помилка оновлення")}},async resetPassword(s,t,a){const r={email:s,resetCode:t,newPassword:a};try{await I.post("auth/reset-password",r)}catch(n){throw new Error(n instanceof Error?n.message:"Помилка оновлення")}},async changePassword(s,t){const a={currentPassword:s,newPassword:t};try{await I.post("auth/change-password",a)}catch(r){throw new Error(r?r.response.data.error.message:"Помилка оновлення")}}},rt="https://fbe.onrender.com",I=st.create({baseURL:rt});I.interceptors.request.use(s=>{if(s.data instanceof FormData?delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json",s.headers.Accept="*/*",s.url&&!s.url.includes("auth/login")&&!s.url.includes("auth/register")&&!s.url.includes("auth/refresh")){const t=localStorage.getItem("accessToken");t&&(s.headers.Authorization=`Bearer ${t}`)}return s},s=>Promise.reject(s));let we=!1;const Ye=[];I.interceptors.response.use(s=>s,async s=>{const t=s.config;if(s.response?.status===401&&t?.url&&!t.url.includes("auth/login")&&!t.url.includes("auth/register")&&!t.url.includes("auth/refresh")){if(!we)if(we=!0,localStorage.getItem("refreshToken"))try{if(await pe.refresh(),we=!1,ot(),t.headers){const r=localStorage.getItem("accessToken");r&&(t.headers.Authorization=`Bearer ${r}`)}return I(t)}catch(r){return console.error("Помилка при оновленні токена:",r),U.getState().logout(),we=!1,Promise.reject(s)}else return we=!1,U.getState().logout(),Promise.reject(s);return new Promise((a,r)=>{nt(()=>{if(t){const n=localStorage.getItem("accessToken");n&&t.headers&&(t.headers.Authorization=`Bearer ${n}`),a(I(t))}else r(new Error("Original request is undefined"))})})}return Promise.reject(s)});const nt=s=>{Ye.push(s)},ot=()=>{for(;Ye.length;){const s=Ye.pop();s&&s()}},Ce="/categories",Be={async getAll(){return(await I.get(Ce)).data},async getOne(s){return(await I.get(`${Ce}/${s}`)).data},async create(s){return(await I.post(Ce,s)).data},async remove(s){await I.delete(`${Ce}/${s}`)},async update(s,t){return(await I.patch(`${Ce}/${s}`,t)).data}},Ae=ce(s=>({categories:[],loading:!1,error:null,fetchCategories:async()=>{s({loading:!0,error:null});try{const t=await Be.getAll();s({categories:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження категорій",loading:!1})}},addCategory:async t=>{try{const a=await Be.create(t);if(!a)throw new Error("Категорія не була оновлена");return s(r=>({categories:[...r.categories,a]})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},updateCategory:async(t,a)=>{try{const r=await Be.update(t,a);if(!r)throw new Error("Категорія не була оновлена");return s(n=>({categories:n.categories.map(o=>o.id===t?r:o)})),r}catch(r){throw s({error:r.message||"Помилка оновлення категорії",loading:!1}),r}},removeCategory:t=>s(a=>({categories:a.categories.filter(r=>r.id!==t)}))})),ct="_inputWrapper_18ahu_1",it="_radioCheckboxWrapper_18ahu_8",lt="_label_18ahu_14",dt="_required_18ahu_22",ut="_input_18ahu_1",mt="_radioCheckboxLabel_18ahu_43",ht="_disabled_18ahu_57",pt="_radioCheckboxText_18ahu_77",gt="_errorBorder_18ahu_99",xt="_errorText_18ahu_103",J={inputWrapper:ct,radioCheckboxWrapper:it,label:lt,required:dt,input:ut,radioCheckboxLabel:mt,disabled:ht,radioCheckboxText:pt,errorBorder:gt,errorText:xt},_=Se.forwardRef(({label:s,error:t,type:a="text",placeholder:r,disabled:n=!1,required:o=!1,id:c,name:m,...i},l)=>{const h=a==="radio",f=a==="checkbox";return e.jsxs("div",{className:`${J.inputWrapper} ${h||f?J.radioCheckboxWrapper:""}`,children:[h||f?e.jsxs("label",{className:`${J.radioCheckboxLabel} ${n?J.disabled:""}`,children:[e.jsx("input",{ref:l,className:`${J.input} ${t?J.errorBorder:""}`,type:a,placeholder:r,disabled:n,required:o,id:c,name:m,...i}),e.jsxs("span",{className:J.radioCheckboxText,children:[s," ",o&&e.jsx("span",{className:J.required,children:"*"})]})]}):e.jsxs(e.Fragment,{children:[s&&e.jsxs("label",{className:J.label,children:[s," ",o&&e.jsx("span",{className:J.required,children:"*"})]}),e.jsx("input",{ref:l,type:a,placeholder:r,disabled:n,required:o,id:c,name:m,className:`${J.input} ${t?J.errorBorder:""}`,...i})]}),t&&e.jsx("p",{className:J.errorText,children:t})]})});_.displayName="Input";const ft="_container_1riki_1",jt="_header_1riki_10",yt="_btn_1riki_33",_t="_btnPrimary_1riki_66",vt="_btnSuccess_1riki_75",bt="_btnSecondary_1riki_84",Nt="_btnEdit_1riki_95",St="_btnDelete_1riki_106",kt="_btnSave_1riki_117",wt="_btnCancel_1riki_127",Ct="_toggleBtn_1riki_137",$t="_createForm_1riki_151",It="_formInputs_1riki_167",Pt="_inputGroup_1riki_179",Et="_formInput_1riki_167",Lt="_formActions_1riki_211",Bt="_categoriesSection_1riki_217",Tt="_sectionHeader_1riki_217",Ot="_categoryItem_1riki_246",At="_categoryDisplay_1riki_255",Rt="_categoryLeft_1riki_270",Ft="_expandButton_1riki_277",qt="_spacer_1riki_284",Ut="_categoryInfo_1riki_289",zt="_categoryIcon_1riki_296",Mt="_categoryText_1riki_301",Dt="_categoryName_1riki_307",Wt="_categorySlug_1riki_313",Gt="_parentInfo_1riki_323",Vt="_categoryActions_1riki_329",Ht="_editForm_1riki_335",Jt="_editHeader_1riki_344",Kt="_editingLabel_1riki_347",Xt="_editInputs_1riki_356",Yt="_inputWrapper_1riki_368",Qt="_editInput_1riki_356",Zt="_editActions_1riki_394",ea="_children_1riki_401",sa="_emptyState_1riki_408",ta="_emptyIcon_1riki_413",aa="_loading_1riki_428",ra="_error_1riki_429",x={container:ft,header:jt,btn:yt,btnPrimary:_t,btnSuccess:vt,btnSecondary:bt,btnEdit:Nt,btnDelete:St,btnSave:kt,btnCancel:wt,toggleBtn:Ct,createForm:$t,formInputs:It,inputGroup:Pt,formInput:Et,formActions:Lt,categoriesSection:Bt,sectionHeader:Tt,categoryItem:Ot,categoryDisplay:At,categoryLeft:Rt,expandButton:Ft,spacer:qt,categoryInfo:Ut,categoryIcon:zt,categoryText:Mt,categoryName:Dt,categorySlug:Wt,parentInfo:Gt,categoryActions:Vt,editForm:Ht,editHeader:Jt,editingLabel:Kt,editInputs:Xt,inputWrapper:Yt,editInput:Qt,editActions:Zt,children:ea,emptyState:sa,emptyIcon:ta,loading:aa,error:ra},na=()=>{const{categories:s,loading:t,error:a,fetchCategories:r,addCategory:n,removeCategory:o,updateCategory:c}=Ae(),[m,i]=u.useState(null),[l,h]=u.useState({}),[f,g]=u.useState({name:"",slug:"",parentId:null,imageUrl:""}),[d,p]=u.useState(!1),[y,w]=u.useState(new Set);u.useEffect(()=>{r()},[r]),u.useEffect(()=>{if(s.length>0){const b=s.map(F=>F.id);w(new Set(b))}},[s]);const P=async()=>{if(!f.name?.trim()){alert("Введіть назву категорії");return}try{const b={...f,slug:f.slug||f.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")};await n(b),g({name:"",slug:"",parentId:null,imageUrl:""}),p(!1),alert("Категорія створена")}catch(b){alert(b.message||"Помилка при створенні категорії")}},k=async b=>{const G=s.some(R=>R.parentId===b)?"Ця категорія має підкатегорії. Видалити разом з усіма підкатегоріями?":"Ви дійсно хочете видалити категорію?";if(confirm(G))try{await Be.remove(b),o(b),w(R=>{const Z=new Set(R);return Z.delete(b),Z})}catch(R){alert(R.message||"Помилка при видаленні категорії")}},O=b=>{i(b.id),h({name:b.name,slug:b.slug,parentId:b.parentId,imageUrl:b.imageUrl||""})},S=async()=>{if(l.name?.trim())try{if(m){const b=await Be.update(m,{name:l.name,parentId:l.parentId,slug:l.slug,imageUrl:l.imageUrl});l.id&&c(l.id,b)}else{const b={name:l.name,parentId:l.parentId||null,slug:l.slug||l.name.toLowerCase().replace(/\s+/g,"-"),imageUrl:l.imageUrl||""};n(b)}i(null),h({})}catch(b){alert(b.message||"Помилка при збереженні категорії")}},L=()=>{i(null),h({})},A=b=>{w(F=>{const G=new Set(F);return G.has(b)?G.delete(b):G.add(b),G})},v=b=>s.some(F=>F.parentId===b),E=b=>{if(!b)return"Коренева категорія";const F=s.find(G=>G.id===b);return F?F.name:"Невідома категорія"},z=(b=null,F=0)=>{const G=s.filter(R=>R.parentId===b);return G.length?G.map(R=>{const Z=y.has(R.id),ne=v(R.id);return e.jsx("div",{className:x.categoryItem,style:{marginLeft:`${F*20}px`},children:m===R.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування категорії:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва категорії"}),e.jsx(_,{value:l.name||"",onChange:te=>h({...l,name:te.target.value})})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(_,{value:l.slug||"",onChange:te=>h({...l,slug:te.target.value}),required:!0,placeholder:"Введіть slug"})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(_,{value:l.imageUrl||"",onChange:te=>h({...l,imageUrl:te.target.value})})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:S,className:x.btn,children:[e.jsx(ys,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:L,className:x.btn,children:[e.jsx(_s,{size:16})," Скасувати"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.categoryDisplay,children:[e.jsxs("div",{className:x.categoryLeft,children:[e.jsx("div",{className:x.expandButton,children:ne?e.jsx("button",{onClick:()=>A(R.id),className:x.toggleBtn,children:Z?e.jsx(vs,{size:16}):e.jsx(bs,{size:16})}):e.jsx("div",{className:x.spacer})}),e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(Xe,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:R.name}),R.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",R.slug]}),R.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",R.imageUrl]}),R.parentId&&e.jsxs("span",{className:x.parentInfo,children:["в категорії: ",E(R.parentId)]})]})]})]}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>O(R),className:x.btn,children:e.jsx(Ns,{size:16})}),e.jsx("button",{onClick:()=>k(R.id),className:x.btn,children:e.jsx(Ss,{size:16})})]})]}),ne&&Z&&e.jsx("div",{className:x.children,children:z(R.id,F+1)})]})},R.id)}):null};return t?e.jsx("div",{children:"Завантаження категорій..."}):a?e.jsxs("div",{children:["Помилка: ",a]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління категоріями"}),e.jsxs("button",{onClick:()=>p(!d),className:x.btn,children:[e.jsx(fs,{size:16})," Додати категорію"]})]}),d&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову категорію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва категорії *"}),e.jsx(_,{value:f.name||"",onChange:b=>g(F=>({...F,name:b.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug"}),e.jsx(_,{value:f.slug||"",onChange:b=>g(F=>({...F,slug:b.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(_,{value:f.imageUrl||"",onChange:b=>g(F=>({...F,imageUrl:b.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Батьківська категорія"}),e.jsxs("select",{value:f.parentId||"",onChange:b=>g(F=>({...F,parentId:b.target.value?Number(b.target.value):null})),children:[e.jsx("option",{value:"",children:"Коренева категорія"}),s.map(b=>e.jsxs("option",{value:b.id,children:[b.parentId?`${E(b.parentId)} → `:"",b.name]},b.id))]})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:P,className:x.btn,children:[e.jsx(js,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>p(!1),className:x.btn,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.categoriesSection,children:[e.jsx("h3",{children:"Список категорій"}),s.length===0?e.jsx("p",{children:"Категорії відсутні"}):z()]})]})},$e="/collections",Te={async getAll(){return(await I.get($e)).data},async getOne(s){return(await I.get(`${$e}/${s}`)).data},async create(s){return(await I.post($e,s)).data},async remove(s){await I.delete(`${$e}/${s}`)},async update(s,t){return(await I.patch(`${$e}/${s}`,t)).data}},Ze=ce(s=>({collections:[],loading:!1,error:null,fetchCollections:async()=>{s({loading:!0,error:null});try{const t=await Te.getAll();s({collections:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження колекцій",loading:!1})}},addCollection:t=>s(a=>({collections:[...a.collections,t]})),updateCollection:async(t,a)=>{try{const r=await Te.update(t,a);if(!r)throw new Error("Категорія не була оновлена");return s(n=>({collections:n.collections.map(o=>(o.id===t,o))})),r}catch(r){throw s({error:r.message||"Помилка оновлення категорії",loading:!1}),r}},removeCollection:t=>s(a=>({collections:a.collections.filter(r=>r.id!==t)}))})),oa=()=>{const{collections:s,loading:t,error:a,fetchCollections:r,addCollection:n,removeCollection:o}=Ze(),[c,m]=u.useState(null),[i,l]=u.useState({}),[h,f]=u.useState({name:"",slug:"",imageUrl:""}),[g,d]=u.useState(!1);u.useEffect(()=>{r()},[r]);const p=async()=>{if(!h.name?.trim()){alert("Введіть назву колекції");return}try{const S={...h,slug:h.slug||h.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")},L=await Te.create(S);n(L),f({name:"",slug:"",imageUrl:""}),d(!1)}catch(S){alert(S.message||"Помилка при створенні колекції")}},y=async S=>{if(confirm("Ви дійсно хочете видалити колекцію?"))try{await Te.remove(S),o(S)}catch(L){alert(L.message||"Помилка при видаленні колекції")}},w=S=>{m(S.id),l({name:S.name,slug:S.slug,imageUrl:S.imageUrl||""})},P=async()=>{if(!(!c||!i.name?.trim()))try{const S=await Te.update(c,i);o(c),n(S),m(null),l({})}catch(S){alert(S.message||"Помилка при оновленні колекції")}},k=()=>{m(null),l({})},O=()=>s.length===0?null:s.map(S=>e.jsx("div",{className:x.collectionItem,children:c===S.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування колекції:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва колекції"}),e.jsx(_,{value:i.name||"",onChange:L=>l({...i,name:L.target.value}),placeholder:"Назва колекції",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(_,{value:i.slug||"",onChange:L=>l({...i,slug:L.target.value}),placeholder:"URL slug",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(_,{value:i.imageUrl||"",onChange:L=>l({...i,imageUrl:L.target.value}),placeholder:"URL зображення",className:x.editInput})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:P,className:`${x.btn} ${x.btnSave}`,children:[e.jsx(ys,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:k,className:`${x.btn} ${x.btnCancel}`,children:[e.jsx(_s,{size:16})," Скасувати"]})]})]}):e.jsxs("div",{className:x.categoryDisplay,children:[e.jsx("div",{className:x.categoryLeft,children:e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(Xe,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:S.name}),S.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",S.slug]}),S.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",S.imageUrl]})]})]})}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>w(S),className:`${x.btn} ${x.btnEdit}`,title:"Редагувати",children:e.jsx(Ns,{size:16})}),e.jsx("button",{onClick:()=>y(S.id),className:`${x.btn} ${x.btnDelete}`,title:"Видалити",children:e.jsx(Ss,{size:16})})]})]})},S.id));return t?e.jsx("div",{className:x.loading,children:"Завантаження колекцій..."}):a?e.jsxs("div",{className:x.error,children:["Помилка: ",a]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління колекціями"}),e.jsxs("button",{onClick:()=>d(!g),className:`${x.btn} ${x.btnPrimary}`,children:[e.jsx(fs,{size:16})," Додати колекцію"]})]}),g&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову колекцію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва колекції *"}),e.jsx(_,{value:h.name||"",onChange:S=>f(L=>({...L,name:S.target.value})),placeholder:"Введіть назву колекції",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug (URL-адреса)"}),e.jsx(_,{value:h.slug||"",onChange:S=>f(L=>({...L,slug:S.target.value})),placeholder:"auto-generated або введіть власний",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(_,{value:h.imageUrl||"",onChange:S=>f(L=>({...L,imageUrl:S.target.value})),placeholder:"URL зображення",className:x.formInput})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:p,className:`${x.btn} ${x.btnSuccess}`,children:[e.jsx(js,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>d(!1),className:`${x.btn} ${x.btnSecondary}`,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.collectionsSection,children:[e.jsxs("div",{className:x.sectionHeader,children:[e.jsx("h3",{children:"Список колекцій"}),e.jsxs("div",{className:x.collectionCount,children:["Всього: ",s.length," колекцій"]})]}),s.length===0?e.jsxs("div",{className:x.emptyState,children:[e.jsx(Xe,{size:48,className:x.emptyIcon}),e.jsx("p",{children:"Колекції відсутні"}),e.jsx("p",{children:"Створіть першу колекцію для початку роботи"})]}):e.jsx("div",{className:x.collectionsList,children:O()})]})]})},ca="_createProduct_1sk0j_2",ia="_form_1sk0j_22",la="_field_1sk0j_28",da="_group_1sk0j_33",ua="_btn_1sk0j_51",ma="_submit_1sk0j_80",ha="_checkboxGroup_1sk0j_94",pa="_checkboxLabel_1sk0j_100",ga="_variantBlock_1sk0j_140",q={createProduct:ca,form:ia,field:la,group:da,btn:ua,submit:ma,checkboxGroup:ha,checkboxLabel:pa,variantBlock:ga,delete:"_delete_1sk0j_144"},Ps=["XS","S","M","L","XL","XXL"],es=["RED","GREEN","BLUE","BLACK","WHITE","YELLOW","ORANGE","PURPLE","PINK","GREY","BROWN"],Ve={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL"},Es={RED:"Red",GREEN:"Green",BLUE:"Blue",BLACK:"Black",WHITE:"White",YELLOW:"Yellow",ORANGE:"Orange",PURPLE:"Purple",PINK:"Pink",GREY:"Grey",BROWN:"Brown"},Ls={RED:"#b34a4a",GREEN:"#4a7c59",BLUE:"#527fb3",BLACK:"#1e1e1e",WHITE:"#f5f5f5",YELLOW:"#d4c35b",ORANGE:"#d87a4a",PURPLE:"#6a4a7c",PINK:"#ff99bb",GREY:"#808080",BROWN:"#8b5e3c"},xa="_select_18v07_35",fa="_caruselBox_18v07_55",ja="_wrapper_18v07_74",ya="_categoryBox_18v07_78",_a="_imgBox_18v07_99",Le={select:xa,caruselBox:fa,wrapper:ja,categoryBox:ya,imgBox:_a};function ss({value:s,onChange:t,includeEmpty:a=!0,valueKey:r="id"}){const{categories:n}=Ae(),o=(c=null,m=0)=>n.filter(i=>i.parentId===c).map(i=>e.jsxs(Se.Fragment,{children:[e.jsxs("option",{value:r==="slug"?i.slug:i.id,children:["— ".repeat(m),i.name]}),o(i.id,m+1)]},i.id));return e.jsxs("select",{value:s??"",onChange:c=>t(r==="id"?Number(c.target.value):c.target.value),className:Le.select,children:[a&&e.jsx("option",{value:"",children:"Виберіть категорію"}),o(null,0)]})}const va="_select_1ag6g_1",ba={select:va};function ts({value:s,onChange:t,multiple:a=!1,valueKey:r="id"}){const{collections:n,loading:o}=Ze();return o?e.jsx("p",{children:"Завантаження..."}):e.jsxs("select",{multiple:a,value:s??"",onChange:c=>{if(a){const m=Array.from(c.target.selectedOptions,i=>r==="id"?Number(i.value):i.value);t(m)}else{const m=r==="id"?Number(c.target.value):c.target.value;t(m)}},className:ba.select,children:[!a&&e.jsx("option",{value:"",children:"Виберіть колекцію"}),n.map(c=>e.jsx("option",{value:r==="slug"?c.slug:c.id,children:c.name},c.id))]})}const Bs=({onUpload:s})=>{const t=async a=>{const r=a.target.files?.[0];if(!r)return;const n=new FormData;n.append("file",r),n.append("upload_preset","FBEimg");try{const c=await(await fetch("https://api.cloudinary.com/v1_1/divhalkcr/image/upload",{method:"POST",body:n})).json();c.secure_url?s(c.secure_url):console.error("Upload failed:",c)}catch(o){console.error("Error uploading image:",o)}};return e.jsx(_,{type:"file",accept:"image/*",onChange:t})},Na="_button_1452p_1",Sa="_primary_1452p_15",ka="_secondary_1452p_23",wa="_small_1452p_31",Ca="_danger_1452p_37",$a="_link_1452p_45",Ia="_full_1452p_53",Pa="_disabled_1452p_62",Ea="_loader_1452p_67",La="_spin_1452p_1",Ba="_categoriesContainer_1452p_84",qe={button:Na,primary:Sa,secondary:ka,small:wa,danger:Ca,link:$a,full:Ia,disabled:Pa,loader:Ea,spin:La,categoriesContainer:Ba},$=u.forwardRef(({type:s="button",onClick:t,disabled:a=!1,loading:r=!1,variant:n="primary",children:o,className:c,style:m,title:i,...l},h)=>e.jsxs("button",{ref:h,type:s,onClick:t,disabled:a||r,style:m,title:i,className:Cs(qe.button,qe[n],{[qe.disabled]:a||r},c),...l,children:[r&&e.jsx("span",{className:qe.loader}),i||o]}));$.displayName="Button";const Ta="_imagesBlock_1y6ls_2",Oa="_newphoto_1y6ls_9",Aa="_photoBox_1y6ls_15",Ue={imagesBlock:Ta,newphoto:Oa,photoBox:Aa},Ra=({control:s,register:t,setValue:a,watch:r,variantIndex:n})=>{const{fields:o,append:c,remove:m}=ue({control:s,name:`variants.${n}.images`}),[i,l]=u.useState(""),h=f=>{m(f),(r(`variants.${n}.images`)||[]).forEach((d,p)=>{a(`variants.${n}.images.${p}.order`,p+1)})};return e.jsxs("div",{className:Ue.imagesBlock,children:[e.jsx("h5",{children:"Images"}),o.map((f,g)=>{const d=r(`variants.${n}.images.${g}.url`);return e.jsxs("div",{style:{margin:"1rem"},children:[e.jsxs("div",{className:"column",children:[e.jsxs("div",{className:"padding",children:[e.jsx(_,{placeholder:"опис фото",style:{margin:"0.5rem"},...t(`variants.${n}.images.${g}.altText`)}),e.jsx(Bs,{onUpload:p=>a(`variants.${n}.images.${g}.url`,p)}),e.jsxs("div",{style:{display:"flex",marginTop:"0.5rem",gap:"0.5rem"},children:[e.jsx(_,{type:"text",placeholder:"Встав URL вручну",value:i,onChange:p=>l(p.target.value),id:"urlhandle"}),e.jsx($,{type:"button",onClick:()=>{i.trim()&&(a(`variants.${n}.images.${g}.url`,i.trim()),l(""))},children:"Завантажити фото"})]}),e.jsx(_,{type:"number",placeholder:"Order",min:1,...t(`variants.${n}.images.${g}.order`,{valueAsNumber:!0})})]}),d&&e.jsx("img",{src:d,alt:"preview",style:{width:100,height:"auto",marginTop:"0.5rem"}})]}),e.jsx("button",{type:"button",onClick:()=>h(g),children:"✕ Видалити фото"})]},f.id)}),e.jsx($,{type:"button",variant:"full",onClick:()=>c({url:"",altText:"",order:o.length+1}),children:"+ Add Image"})]})},Fa=()=>{const{register:s,control:t,handleSubmit:a,reset:r,setValue:n,watch:o}=me({defaultValues:{sku:"",price:0,priceSale:null,categoryId:void 0,collectionId:1,translations:[{name:"",description:"",languageId:1}],features:[{text:"",textEn:"",order:1}],variants:[]}}),c=ue({control:t,name:"translations"}),m=ue({control:t,name:"features"}),i=ue({control:t,name:"variants"}),l=o("price"),h=o("priceSale"),f=async d=>{try{const p={...d,collectionId:Number(d.collectionId),variants:d.variants.map(w=>({...w,productId:1}))},y=await de.addProduct(p);r(),alert(`Товар додано - ${y.translations[0].name}`)}catch(p){console.error("Помилка при створенні продукту:",p)}},g=()=>{i.append({color:"BLACK",sizes:[],price:l||0,priceSale:h||0,stock:0,images:[{url:"",altText:"",order:1}],description:""})};return e.jsxs("div",{className:q.createProduct,children:[e.jsx("h1",{children:"Create Product"}),e.jsxs("form",{onSubmit:a(f),className:q.form,children:[e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"SKU * номер товару, ідентифікатор "}),e.jsx("input",{...s("sku",{required:!0})})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Base Price *"}),e.jsx(_,{type:"number",step:"1",min:"1",...s("price",{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Base Sale Price"}),e.jsx("input",{type:"number",step:"1",min:"1",...s("priceSale",{valueAsNumber:!0})})]}),e.jsx("h3",{children:"Назва та опис  товару"}),c.fields.map((d,p)=>{const y=o(`translations.${p}.languageId`);return e.jsxs("div",{className:q.group,children:[e.jsx("input",{placeholder:"Name",...s(`translations.${p}.name`)}),e.jsx("input",{placeholder:"Description",...s(`translations.${p}.description`)}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:`Language: ${y===1?"Ukraine":"English"}`}),e.jsxs("select",{...s(`translations.${p}.languageId`,{valueAsNumber:!0,validate:w=>[1,2].includes(w)||"Тільки 1 або 2"}),children:[e.jsx("option",{value:"",children:"Оберіть мову"}),e.jsx("option",{value:1,children:"Ukraine"}),e.jsx("option",{value:2,children:"English"})]})]}),c.fields.length>1&&e.jsx("button",{type:"button",onClick:()=>c.remove(p),children:"✕"})]},d.id)}),e.jsx($,{type:"button",className:q.btn,onClick:()=>c.append({name:"",description:"",languageId:1}),children:"+ Add Translation"}),e.jsx("h3",{children:"Властивості товару"}),m.fields.map((d,p)=>e.jsxs("div",{className:q.group,children:[e.jsx(_,{placeholder:"приклад: Тканина: кашемір",...s(`features.${p}.text`)}),e.jsx(_,{placeholder:"Example EN",...s(`features.${p}.textEn`)}),e.jsx(_,{type:"number",placeholder:"Order",min:"1",...s(`features.${p}.order`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>m.remove(p),children:"✕"})]},d.id)),e.jsx($,{type:"button",onClick:()=>m.append({text:"",textEn:"",order:m.fields.length+1}),className:q.btn,children:"+ Додати властивість"}),e.jsx("h3",{children:"Variants"}),i.fields.map((d,p)=>e.jsxs("div",{className:`${q.variantBlock} form form2`,children:[e.jsxs("h4",{children:["Variant ",p+1]}),e.jsx("input",{type:"hidden",...s(`variants.${p}.productId`)}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...s(`variants.${p}.color`),children:Object.values(es).map(y=>e.jsx("option",{value:y,children:Es[y]},y))})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:q.checkboxGroup,children:Object.values(Ps).map(y=>e.jsxs("label",{className:q.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:y,...s(`variants.${p}.sizes`)}),Ve[y]]},y))})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Price *"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${p}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${p}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Послідовність варіантів - введіть 1, якщо це головний варіант який буде відображатись всюди перший"}),e.jsx("input",{type:"number",...s(`variants.${p}.stock`,{valueAsNumber:!0})})]}),e.jsx("div",{className:q.field,children:e.jsx(_,{type:"text",...s(`variants.${p}.description`),label:"Description"})}),e.jsx(Ra,{control:t,register:s,setValue:n,watch:o,variantIndex:p}),e.jsx($,{type:"button",onClick:()=>i.remove(p),className:q.delete,children:"✕ Remove Variant"})]},d.id)),e.jsx($,{type:"button",onClick:g,className:q.btn,children:"+ Add Variant"}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Category"}),e.jsx(ss,{value:o("categoryId"),onChange:d=>n("categoryId",d),valueKey:"id"})]}),e.jsxs("div",{className:q.field,children:[e.jsx("label",{children:"Collections"}),e.jsx(ts,{value:o("collectionId"),onChange:d=>n("collectionId",Number(d)),valueKey:"id"})]}),e.jsx("button",{type:"submit",className:`${q.submit} ${q.btn}`,children:"Create Product"})]})]})},qa="_card_190q6_2",Ua="_imageWrapper_190q6_11",za="_name_190q6_28",Ma="_price_190q6_35",Da="_priceSale_190q6_40",Wa="_priceOriginal_190q6_44",Ga="_features_190q6_49",Va="_colorDots_190q6_59",Ha="_colorDot_190q6_59",Ja="_mainFont_190q6_146",Q={card:qa,imageWrapper:Ua,name:za,price:Ma,priceSale:Da,priceOriginal:Wa,features:Ga,colorDots:Va,colorDot:Ha,mainFont:Ja},Ka="About",Xa="Contact",Ya="Shop",Qa="Home",Za="Categories",er="Collections",sr="FirstName",tr="Message",ar="For those who play beautifully",rr="Choose by category",nr="Send",or="Sending...",cr="FBE is a Ukrainian brand of modern clothing that combines quality, style and affordability. We create things for those who value comfort and individuality in everyday life, as well as for enjoyable sports and active recreation that brings pleasure.",ir="To provide quality clothing that enhances each client's personality and makes them feel confident. We believe that stylish and functional clothing should be accessible to everyone.",lr="Variant:",dr="Quantity:",ur="Total price:",mr="Add to cart",hr="Buy now",pr="Adding...",gr="✓ Added to cart!",xr="Features",fr="Delivery and returns",jr=["Orders in Ukraine: «Nova Poshta» (2-3 business days)","Orders in Poland: «Nova Poshta» (3-5 business days)","Orders in USA and Canada: «Canada Post» (1-3 business days)"],yr="For additional information contact us on",_r="Photo not available",vr={about:Ka,contact:Xa,shop:Ya,home:Qa,categories:Za,collections:er,"fast-delivery":"Fast delivery","change-return":"Exchanges and Returns","free-delivery":"Free delivery within Ukraine for orders over 5000 UAH","contact-to-me":"Contact us",name:sr,message:tr,whoplay:ar,choosecategory:rr,send:nr,sending:or,"about-h":"About FBE","about-h1":"Our mission","about-h2":"What sets us apart","about-h3":"Our values","about-h4":"Delivery",about1:cr,about2:ir,"about3-1":"Quality of materials — we use only proven fabrics and accessories","about3-2":"Contemporary design — we follow global trends and create our own","about3-3":"Affordable prices — a price-quality ratio that will pleasantly surprise you","about3-4":"Fast delivery — we operate throughout Ukraine, Poland, the USA, and Canada","about4-1":"Quality — each item undergoes thorough quality control","about4-2":"Style — we create clothing for modern and active people","about4-3":"Service — individual approach to each client","about4-4":"Innovation — we constantly improve our processes and products","about5-1":"Ukraine: Nova Poshta (2-3 business days)","about5-2":"Poland: Nova Poshta (3-5 business days)","about5-3":"USA & Canada: Canada Post (1-3 business days)",variant:lr," size":"Size:",quantity:dr,totalPrice:ur,addToCart:mr,buyNow:hr,adding:pr,added:gr,features:xr,delivery:fr,deliveryInfo:jr,deliveryNote:yr,noImage:_r,"delivery-title":"Delivery and Returns","delivery-conditions-title":"Delivery Conditions","delivery-warning":"IMPORTANT NOTICE – WAR IN UKRAINE: Due to the war, small delays are possible. After dispatch, your order will arrive within 2-6 business days.","delivery-ua":"Orders in Ukraine are shipped via Nova Poshta (2-3 business days)","delivery-pl":"Orders in Poland are shipped via Nova Poshta (3-5 business days)","delivery-us-ca":"Orders in USA & Canada are shipped via Canada Post (1-3 business days)","delivery-free":"FREE EXPRESS shipping on orders over 5000 UAH","delivery-restrictions":"Note: we do not ship to Russia and Belarus.","exchange-title":"Exchanges","exchange-info":"We accept exchanges for a different size or model if the required item is in stock.","exchange-costs":"Shipping costs for exchanges are paid by the customer, except in cases of defects or faults.","exchange-return-how-title":"How to request a return or exchange","exchange-return-step1":"Contact our support team in","exchange-return-contact":"the Contact section","exchange-return-step2":"Provide a photo of the item and a description of the issue.","exchange-return-step3":"Wait for confirmation and instructions from our manager.","tracking-title":"Track Your Order","tracking-info":"Once your order is shipped, you will receive an email with tracking information. All tracking details are included in the email.","tracking-taxes":"Customs duties and/or VAT may apply. FBE is not responsible for customs or local taxes.","return-title":"Returns","return-info":"Returns are only possible if the product has a manufacturing defect or was damaged during delivery. To process a return, please contact our support service within 14 days of receiving your order.","payment-title":"Payment","payment-invoice-title":"Invoice","payment-invoice-info":"After placing your order, we will send you an invoice via email or messenger. You can pay in a convenient way. After payment, you will receive confirmation and delivery details.","payment-prepay-title":"Prepayment","payment-prepay-info":"For orders requiring prepayment, a deposit of 200₴ is required. This amount guarantees reservation of the item.","payment-postpay-title":"Postpayment / Full Payment","payment-postpay-info":"If the order is paid in full after receiving the invoice, please pay the specified amount according to the instructions. After receiving payment, we will ship your order."},br="Про нас",Nr="Контакти",Sr="Maгазин",kr="Головна",wr="Категорії",Cr="Колекції",$r="Ім’я",Ir="Повідомлення",Pr="Відправити",Er="Відправка...",Lr="Для тих, хто грає красиво",Br="Обирайте за категорією",Tr="FBE — український бренд сучасного одягу, який поєднує якість, стиль та доступність. Ми створюємо речі для тих, хто цінує комфорт та індивідуальність у щоденному житті, а також для приємного спорту й активного відпочинку, що приносить задоволення.",Or="Надавати якісний одяг, який підкреслює особистість кожного клієнта та робить їх впевненими в собі. Ми віримо, що стильний та функціональний одяг має бути доступним для кожного.",Ar="Варіант:",Rr="Розмір:",Fr="Кількість:",qr="Загальна ціна:",Ur="Додати в кошик",zr="Купити в один клік",Mr="Додавання...",Dr="✓ Додано в кошик!",Wr="Особливості",Gr="Доставка та повернення",Vr=["Замовлення по Україні: «Нова пошта» (2-3 робочих дні)","Замовлення по Польщі: «Нова пошта» (3-5 робочих днів)","Замовлення по США та Канаді: «Canada Post» (1-3 робочих дні)"],Hr="Для додаткової інформації звертайтесь у",Jr="Фото відсутнє",Kr={about:br,contact:Nr,shop:Sr,home:kr,categories:wr,collections:Cr,"fast-delivery":"Швидка доставка","change-return":"Обмін і Повернення","free-delivery":"Доставка від 5000 грн по Україні безкоштовна","contact-to-me":"Зв'яжіться з нами",name:$r,message:Ir,send:Pr,sending:Er,whoplay:Lr,choosecategory:Br,"about-h":"Про FBE","about-h1":"Наша місія","about-h2":"Що нас відрізняє","about-h3":"Наші цінності","about-h4":"Доставка",about1:Tr,about2:Or,"about3-1":"Якість матеріалів — використовуємо тільки перевірені тканини та фурнітуру","about3-2":"Актуальний дизайн — слідкуємо за світовими трендами та створюємо власні","about3-3":"Доступні ціни — співвідношення ціна-якість, яке вас приємно здивує","about3-4":"Швидка доставка — працюємо по всій Україні, Польщі, США та Канаді","about4-1":"Якість — кожна річ проходить ретельний контроль якості","about4-2":"Стиль — створюємо одяг для сучасних та активних людей","about4-3":"Сервіс — індивідуальний підхід до кожного клієнта","about4-4":"Інновації — постійно вдосконалюємо наші процеси та продукти","about5-1":"Україна: Нова пошта (2-3 робочих дні)","about5-2":"Польща: Нова пошта (3-5 робочих днів)","about5-3":"США та Канада: Canada Post (1-3 робочих дні)",variant:Ar,size:Rr,quantity:Fr,totalPrice:qr,addToCart:Ur,buyNow:zr,adding:Mr,added:Dr,features:Wr,delivery:Gr,deliveryInfo:Vr,deliveryNote:Hr,noImage:Jr,"delivery-title":"Доставка та повернення","delivery-conditions-title":"Умови доставки","delivery-warning":"ВАЖЛИВЕ ПОВІДОМЛЕННЯ – ВІЙНА В УКРАЇНІ: Через війну можливі невеликі затримки. Після відправки ваше замовлення прибуде протягом 2-6 робочих днів.","delivery-ua":"Замовлення по Україні відправляються «Новою Поштою» (2-3 робочих дні)","delivery-pl":"Замовлення по Польщі відправляємо «Нова пошта» (3-5 робочих дні)","delivery-us-ca":"Замовлення по США та Канаді відправляються «Пошта Канади» (1-3 робочих дні)","delivery-free":"БЕЗКОШТОВНА ЕКСПРЕС-доставка замовлень на суму понад 5000 UAH","delivery-restrictions":"Зверніть увагу: ми не доставляємо товари в Росію та Білорусь.","exchange-title":"Обміни","exchange-info":"Ми приймаємо обміни товарів на інший розмір чи модель у випадку наявності відповідного товару на складі.","exchange-costs":"Витрати на пересилання при обміні оплачує покупець, за винятком випадків браку чи дефекту.","exchange-return-how-title":"Як оформити повернення чи обмін","exchange-return-step1":"Зверніться до нашої підтримки у","exchange-return-contact":"розділі Контакти","exchange-return-step2":"Надайте фото товару та опис проблеми.","exchange-return-step3":"Очікуйте підтвердження та інструкції від менеджера.","tracking-title":"Відстежуйте своє замовлення","tracking-info":"Щойно ваше замовлення буде відправлено, ви отримаєте електронний лист із інформацією про відстеження. Усі деталі відстеження є в електронному листі.","tracking-taxes":"Мита та податки: можуть стягуватися митні збори та/або ПДВ. FBE не несе відповідальності за митні або місцеві податки.","return-title":"Повернення","return-info":"Повернення можливе лише у випадку, якщо товар має виробничий дефект  або був пошкоджений під час доставки.Для оформлення повернення, будь ласка, зв'яжіться з нашою службою підтримки протягом 14 днів з моменту отримання замовлення.","payment-title":"Оплата","payment-invoice-title":"Рахунок на оплату","payment-invoice-info":"Після оформлення замовлення ми надішлемо вам рахунок на електронну пошту або у месенджер. Ви зможете оплатити замовлення зручним способом. Після оплати отримаєте підтвердження та деталі доставки.","payment-prepay-title":"Передоплата","payment-prepay-info":"Для замовлень, де потрібна передоплата, необхідно внести 200₴. Ця сума гарантує резервування товару.","payment-postpay-title":"Післяплата / оплата повної суми","payment-postpay-info":"Якщо товар оплачується повністю після отримання рахунку, оплатіть зазначену суму згідно з інструкціями. Після отримання платежу ми відправимо ваше замовлення."},Xr={en:{translation:vr},uk:{translation:Kr}},Yr=localStorage.getItem("language")||"uk";Qe.use(Gs).init({resources:Xr,lng:Yr,fallbackLng:"uk",interpolation:{escapeValue:!1}});const Qr=localStorage.getItem("language")||Qe.language,Oe=ce(s=>({lang:Qr,setLang:t=>{Qe.changeLanguage(t),localStorage.setItem("language",t),s({lang:t})}})),as=({product:s,isMainPage:t})=>{const{id:a,translations:r,variants:n,price:o,priceSale:c}=s,m=Oe(v=>v.lang),h=(v=>{if(!v||v.length===0)return null;const z={uk:1,en:2}[m];return v.find(b=>b.languageId===z)||v[0]})(r)?.name||(m==="uk"?"Назва відсутня":"Name not available"),f=n?.find(v=>v.stock===1)||n?.[0],g=f?.images?.find(v=>v.order===1)||f?.images?.[0],d=Array.from(new Set(n?.flatMap(v=>v.sizes)||[])),p=Array.from(new Set(n?.map(v=>v.color)||[])),y=n?.map(v=>v.price).filter(v=>v!=null)||[],w=n?.map(v=>v.priceSale).filter(v=>v!=null)||[],P=y.length>0?Math.min(...y):void 0,k=w.length>0?Math.min(...w):void 0,O=o??P,S=c??k,L={uk:{noImage:"Фото відсутнє",noPrice:"Ціна відсутня",noSizes:"Немає",noColors:"Немає"},en:{noImage:"Photo not available",noPrice:"Price not available",noSizes:"None",noColors:"None"}},A=L[m]||L.uk;return e.jsxs("div",{className:Q.card,children:[e.jsx(V,{to:`/product/${a}/`,className:Q.imageWrapper,children:g?e.jsx("img",{src:g.url,alt:g.altText||h}):e.jsx("div",{className:Q.noImage,children:A.noImage})}),e.jsx("p",{className:`${Q.name} ${t?Q.mainFont:""}`,children:e.jsx(V,{to:`/product/${a}`,children:h})}),e.jsx("p",{className:`${Q.price} ${t?Q.mainFont:""}`,children:O?S&&S<O?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:t?"":Q.priceSale,children:["₴",S.toFixed(2)," "]}),e.jsxs("span",{className:Q.priceOriginal,children:["₴",O.toFixed(2)]})]}):e.jsxs("span",{children:["₴",O.toFixed(2)]}):A.noPrice}),e.jsxs("div",{className:Q.features,children:[t?"":d.length>0?d.map(v=>Ve[v]).join(", "):A.noSizes,!t&&e.jsx("br",{}),p.length>0?e.jsx("div",{className:Q.colorDots,children:p.map(v=>e.jsx("span",{className:Q.colorDot,style:{backgroundColor:Ls[v]||"#ccc"},title:v},v))}):!t&&A.noColors]})]})},Zr="_dashboard_12snk_3",en="_filters_12snk_9",sn="_cardsList_12snk_22",tn="_cardWrapper_12snk_31",an="_loadMore_12snk_59",rn="_deleteButton_12snk_89",nn="_loadMoreButton_12snk_98",ae={dashboard:Zr,filters:en,cardsList:sn,cardWrapper:tn,loadMore:an,deleteButton:rn,loadMoreButton:nn},cs=()=>{const s=ye(),{products:t,fetchProducts:a,appendProducts:r,deleteProduct:n}=Ge(),[o,c]=u.useState(""),[m,i]=u.useState(""),[l,h]=u.useState(0),[f,g]=u.useState(!1);u.useEffect(()=>{(async()=>{g(!0);const w={limit:10,skip:l*10,categorySlug:o||void 0,collectionSlug:m||void 0};l===0?await a(w):await r(w),g(!1)})()},[l,o,m,a,r]);const d=y=>{window.confirm(`Видалити продукт ${y.translations?.[0]?.name}?`)&&n(y.id)},p=()=>{h(0)};return e.jsxs("div",{className:ae.dashboard,children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("div",{className:ae.filters,children:[e.jsx(ss,{value:o,onChange:y=>{c(y),p()},valueKey:"slug"}),e.jsx(ts,{value:m,onChange:y=>{i(y),p()},valueKey:"slug",multiple:!1})]}),e.jsxs("p",{children:["Всього продуктів: ",t.length]}),f&&e.jsx("p",{children:"Завантаження..."}),e.jsx("ul",{className:ae.cardsList,children:t.map(y=>e.jsxs("div",{className:ae.cardWrapper,children:[e.jsx(as,{product:y}),e.jsx($,{className:`${ae.deleteButton} ${ae.button}`,onClick:()=>d(y),children:"Видалити"}),e.jsx($,{className:` ${ae.button}`,onClick:()=>s(`/admin/edit-product/${y.id}`),children:"Редагувати"})]},y.id))}),e.jsx("div",{className:ae.loadMore,children:e.jsx($,{className:`${ae.loadMoreButton} ${ae.button}`,onClick:()=>h(y=>y+1),disabled:f,children:"Завантажити ще"})})]})},on="_editProduct_1f234_1",cn="_form_1f234_13",ln="_field_1f234_35",dn="_group_1f234_65",un="_inputText_1f234_73",mn="_variantBlock_1f234_90",hn="_checkboxGroup_1f234_107",pn="_checkboxLabel_1f234_114",gn="_btn_1f234_130",xn="_submit_1f234_156",fn="_loading_1f234_188",jn="_error_1f234_197",yn="_changesIndicator_1f234_249",_n="_chooseBox_1f234_253",T={editProduct:on,form:cn,field:ln,group:dn,inputText:un,variantBlock:mn,checkboxGroup:hn,checkboxLabel:pn,btn:gn,submit:xn,delete:"_delete_1f234_179",loading:fn,error:jn,changesIndicator:yn,chooseBox:_n},vn=({control:s,register:t,setValue:a,watch:r,variantIndex:n})=>{const{fields:o,append:c,remove:m}=ue({control:s,name:`variants.${n}.images`}),[i,l]=u.useState(""),h=f=>{m(f),(r(`variants.${n}.images`)||[]).forEach((d,p)=>{a(`variants.${n}.images.${p}.order`,p+1)})};return e.jsxs("div",{className:Ue.imagesBlock,children:[e.jsx("h5",{children:"Images"}),o.map((f,g)=>{const d=r(`variants.${n}.images.${g}.url`);return e.jsx("div",{style:{margin:"1rem"},children:d?e.jsxs("div",{className:Ue.photoBox,children:[e.jsx("img",{src:d,alt:r(`variants.${n}.images.${g}.altText`)||"preview"}),e.jsx(_,{type:"number",placeholder:"Order",min:1,...t(`variants.${n}.images.${g}.order`,{valueAsNumber:!0})}),e.jsx($,{type:"button",onClick:()=>h(g),variant:"small",children:"✕ Видалити фото"})]}):e.jsxs("div",{className:Ue.newphoto,children:[e.jsx(_,{placeholder:"опис фото",style:{marginBottom:"0.5rem"},...t(`variants.${n}.images.${g}.altText`)}),e.jsx(Bs,{onUpload:p=>a(`variants.${n}.images.${g}.url`,p)}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx(_,{type:"text",placeholder:"Встав URL вручну",value:i,onChange:p=>l(p.target.value)}),e.jsx($,{type:"button",onClick:()=>{i.trim()&&(a(`variants.${n}.images.${g}.url`,i.trim()),l(""))},children:"Завантажити фото"})]}),e.jsx(_,{type:"number",placeholder:"Order",min:1,...t(`variants.${n}.images.${g}.order`,{valueAsNumber:!0}),style:{marginTop:"0.5rem"}}),e.jsx($,{type:"button",onClick:()=>h(g),style:{marginTop:"0.5rem"},variant:"small",children:"✕ Видалити фото"})]})},f.id)}),e.jsx($,{type:"button",variant:"full",onClick:()=>c({url:"",altText:"",order:o.length+1}),children:"+ Add Image"})]})};function be(s,t){if(s===t)return!0;if(s==null||t==null)return!1;if(Array.isArray(s)&&Array.isArray(t))return s.length===t.length&&s.every((a,r)=>be(a,t[r]));if(typeof s=="object"&&typeof t=="object"){const a=Object.keys(s),r=Object.keys(t);return a.length===r.length&&a.every(n=>r.includes(n)&&be(s[n],t[n]))}return!1}function is(s,t){const a={};return["sku","price","priceSale","categoryId","collectionId"].forEach(n=>{const o=t[n];be(s[n],o)||(a[n]=o??void 0)}),be(s.translations,t.translations)||(a.translations=t.translations?.map(n=>({name:n.name,description:n.description??void 0,languageId:n.languageId}))),be(s.features,t.features)||(a.features=t.features?.map(n=>({text:n.text,textEn:n.textEn??void 0,order:n.order}))),be(s.variants,t.variants)||(a.variants=t.variants?.map(n=>({color:n.color,sizes:n.sizes,price:n.price,priceSale:n.priceSale??void 0,stock:n.stock,description:n.description??void 0,images:n.images?.map((o,c)=>({url:o.url,altText:o.altText??void 0,order:o.order??c+1}))}))),a}const bn=()=>{const{id:s}=We(),[t,a]=u.useState(!0),[r,n]=u.useState(null),[o,c]=u.useState(!1),m=u.useRef(null),{editProduct:i,isLoading:l}=Ge(),{register:h,control:f,handleSubmit:g,reset:d,setValue:p,watch:y}=me({defaultValues:{id:0,sku:"",price:0,priceSale:void 0,categoryId:void 0,collectionId:void 0,translations:[{name:"",description:void 0,languageId:1}],features:[],variants:[]}}),w=ue({control:f,name:"translations"}),P=ue({control:f,name:"features"}),k=ue({control:f,name:"variants"}),O=y();u.useEffect(()=>{if(m.current&&O){const v=is(m.current,O);c(Object.keys(v).length>0)}},[O]),u.useEffect(()=>{async function v(){if(!s){n("ID продукту не знайдено"),a(!1);return}try{a(!0);const E=await de.getById(Number(s));m.current=JSON.parse(JSON.stringify(E)),d(E)}catch(E){console.error(E),n("Не вдалося завантажити продукт")}finally{a(!1)}}v()},[s,d]);const S=async v=>{if(!s||!m.current)return;const E=is(m.current,v);if(Object.keys(E).length===0){alert("Немає змін для збереження");return}try{await i(Number(s),E),m.current=JSON.parse(JSON.stringify(v)),c(!1),alert(`Продукт оновлено: ${Object.keys(E).join(", ")}`)}catch(z){console.error(z),alert("Помилка при оновленні продукту")}},L=()=>{k.append({color:"BLACK",sizes:[],price:O.price??0,priceSale:O.priceSale??void 0,stock:0,description:"",images:[{url:"",altText:"",order:1}]})},A=()=>{m.current&&(d(m.current),c(!1))};return t||l?e.jsx("div",{className:T.loading,children:"Завантаження..."}):r?e.jsx("div",{className:T.error,children:r}):e.jsxs("div",{className:T.editProduct,children:[e.jsxs("div",{className:T.header,children:[e.jsxs("h1",{children:["Edit Product #",s]}),o&&e.jsxs("div",{className:T.changesIndicator,children:[e.jsx("span",{children:"• Є незбережені зміни"}),e.jsx($,{type:"button",onClick:A,className:T.resetBtn,children:"Скинути зміни"})]})]}),e.jsxs("form",{onSubmit:g(S),className:T.form,children:[e.jsx("div",{className:T.field,children:e.jsx(_,{...h("sku",{required:!0}),placeholder:"SKU"})}),e.jsx("div",{className:T.field,children:e.jsx(_,{type:"number",...h("price",{required:!0,valueAsNumber:!0}),placeholder:"Price"})}),e.jsx("div",{className:T.field,children:e.jsx(_,{type:"number",...h("priceSale",{valueAsNumber:!0}),placeholder:"Sale Price"})}),e.jsxs("div",{className:T.chooseBox,children:[e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Category"}),e.jsx(ss,{value:y("categoryId"),onChange:v=>p("categoryId",v),valueKey:"id"})]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Collection"}),e.jsx(ts,{value:y("collectionId"),onChange:v=>p("collectionId",Number(v)),valueKey:"id"})]})]}),e.jsx("h3",{children:"Назва і опис товару"}),w.fields.map((v,E)=>{const z=y(`translations.${E}.languageId`);return e.jsxs("div",{className:T.group,children:[e.jsx(_,{placeholder:"Name",...h(`translations.${E}.name`)}),e.jsx(_,{placeholder:"Description",...h(`translations.${E}.description`)}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:`Language: ${z===1?"Ukraine":z===2?"English":"Unknown"}`}),e.jsxs("select",{...h(`translations.${E}.languageId`,{valueAsNumber:!0}),children:[e.jsx("option",{value:1,children:"Ukraine"}),e.jsx("option",{value:2,children:"English"})]})]}),w.fields.length>1&&e.jsx("button",{type:"button",onClick:()=>w.remove(E),children:"✕"})]},v.id)}),w.fields.length<2&&e.jsx($,{type:"button",className:T.btn,onClick:()=>{const E=w.fields.map((z,b)=>y(`translations.${b}.languageId`)).includes(1)?2:1;w.append({name:"",description:"",languageId:E})},children:"+ Add Translation"}),e.jsx("h3",{children:"Властивості товару"}),P.fields.map((v,E)=>e.jsxs("div",{className:T.group,children:[e.jsxs("div",{className:T.featureInputs,children:[e.jsx(_,{placeholder:"Text (українська)",...h(`features.${E}.text`),className:T.inputText,title:y(`features.${E}.text`)||"",label:"Українська"}),e.jsx(_,{placeholder:"Text (English)",...h(`features.${E}.textEn`),className:T.inputText,title:y(`features.${E}.textEn`)||"",label:"English"})]}),e.jsx(_,{type:"number",placeholder:"Order",...h(`features.${E}.order`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>P.remove(E),className:T.removeBtn,children:"✕"})]},v.id)),e.jsx($,{type:"button",onClick:()=>P.append({text:"",textEn:"",order:P.fields.length+1}),className:T.btn,children:"+ Add Feature"}),e.jsx("h3",{children:"Variants"}),k.fields.map((v,E)=>e.jsxs("div",{className:`${T.variantBlock} form form2`,children:[e.jsxs("h4",{children:["Variant ",E+1]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...h(`variants.${E}.color`),children:Object.values(es).map(z=>e.jsx("option",{value:z,children:Es[z]},z))})]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:T.checkboxGroup,children:Object.values(Ps).map(z=>e.jsxs("label",{className:T.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:z,...h(`variants.${E}.sizes`)}),Ve[z]]},z))})]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Price *"}),e.jsx(_,{type:"number",...h(`variants.${E}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx(_,{type:"number",...h(`variants.${E}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{className:"label",children:"Послідовність варіантів - введіть 1, якщо це головний варіант який буде відображатись всюди перший"}),e.jsx(_,{type:"number",...h(`variants.${E}.stock`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:T.field,children:[e.jsx("label",{children:"Description"}),e.jsx(_,{placeholder:"Variant description",...h(`variants.${E}.description`)})]}),e.jsx(vn,{control:f,register:h,setValue:p,watch:y,variantIndex:E}),e.jsx($,{type:"button",onClick:()=>k.remove(E),className:T.delete,children:"✕ Remove Variant"})]},v.id)),e.jsx($,{type:"button",onClick:L,children:" Variant"}),e.jsxs("div",{className:T.formActions,children:[e.jsx("button",{type:"submit",className:`${T.submit} ${T.btn}`,disabled:!o,children:o?"Зберегти зміни":"Немає змін"}),o&&e.jsx($,{type:"button",onClick:A,className:T.cancelBtn,children:"Скинути"})]})]})]})},Nn=()=>{const{register:s,handleSubmit:t,formState:{errors:a}}=me(),r=ye(),n=async c=>{try{await pe.forgotPassword(c),alert("Для відновлення паролю перейдіть у поштову скриньку"),r("/")}catch(m){alert(m.response?.data?.message||"Не вдалося відправити лист")}},o=c=>{n(c.email)};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h2",{className:"title",children:"Відновлення пароля"}),e.jsxs("form",{onSubmit:t(o),className:"form",children:[e.jsx(_,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),a.email&&e.jsx("p",{className:"error",children:a.email.message}),e.jsx($,{type:"submit",children:"Надіслати посилання"})]})]})},Sn="_loginContainer_1bxwe_1",kn="_title_1bxwe_12",wn="_form_1bxwe_18",Cn="_registerPrompt_1bxwe_54",ge={loginContainer:Sn,title:kn,form:wn,registerPrompt:Cn},$n=()=>{const{user:s}=U(),[t,a]=u.useState({email:"",password:""}),[r,n]=u.useState(null),o=ye();u.useEffect(()=>{s&&o("/")},[s,o]);const c=i=>{const{name:l,value:h}=i.target;a(f=>({...f,[l]:h})),r&&n(null)},m=async i=>{if(i.preventDefault(),!t.email||!t.password){n("Будь ласка, заповніть всі поля");return}if(!t.email.includes("@")){n("Введіть коректний email");return}n(null);try{await pe.login(t),o("/")}catch(l){console.error("LoginForm: Login failed:",l),console.error("LoginForm: Error details:",{type:typeof l,constructor:l?.constructor?.name,message:l instanceof Error?l.message:l,string:String(l)});let h="Помилка входу. Спробуйте ще раз.";if(l instanceof Error)h=l.message;else if(typeof l=="string")h=l;else if(l&&typeof l=="object")if("message"in l&&typeof l.message=="string")h=l.message;else if("error"in l&&typeof l.error=="string")h=l.error;else try{const f=JSON.stringify(l);f&&f!=="{}"&&f!=="[object Object]"&&(h=f)}catch(f){console.error("Failed to stringify error:",f)}console.log("LoginForm: Final error message:",h),n(h)}};return e.jsxs("div",{className:Cs(ge.loginContainer),children:[e.jsx("h1",{className:ge.title,children:"Вхід"}),e.jsxs("form",{onSubmit:m,className:ge.form,children:[e.jsx(_,{label:"Email",name:"email",type:"email",placeholder:"Введіть ваш email",value:t.email,onChange:c,required:!0}),e.jsx(_,{label:"Пароль",name:"password",type:"password",placeholder:"Введіть ваш пароль",value:t.password,onChange:c,required:!0}),r&&e.jsx("div",{className:ge.errorContainer,children:e.jsx("p",{className:ge.error,children:r})}),e.jsx($,{type:"submit",disabled:!t.email||!t.password,className:"",children:"Увійти"}),e.jsx("p",{className:ge.registerPrompt,children:e.jsx(V,{to:"/forgot-password",children:"Забули пароль"})}),e.jsxs("p",{className:ge.registerPrompt,children:["Немає аккаунта? ",e.jsx(V,{to:"/register",children:"Зареєструйтесь тут"})]})]})]})},In=()=>{const{register:s,handleSubmit:t,formState:{errors:a}}=me(),[r]=Vs(),n=ye(),o=r.get("code"),c=r.get("email"),m=i=>{if(!o||!c){alert("Посилання недійсне або відсутні дані");return}try{pe.resetPassword(c,o,i.newPassword),alert("Дані oновлено"),n("/login")}catch(l){alert(l.response?.data?.message||"Не вдалося відновити дані")}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Скидання пароля"}),e.jsxs("form",{onSubmit:t(m),className:"form",children:[e.jsx(_,{type:"password",placeholder:"Новий пароль *",...s("newPassword",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),a.newPassword&&e.jsx("p",{className:"error",children:a.newPassword.message}),e.jsx($,{type:"submit",children:"Змінити пароль"})]})]})},Pn="_delivery_1u3z3_1",En="_section_1u3z3_14",Ln="_warning_1u3z3_27",Bn="_list_1u3z3_34",Tn="_freeShipping_1u3z3_41",On="_payment_1u3z3_45",ee={delivery:Pn,section:En,warning:Ln,list:Bn,freeShipping:Tn,payment:On},ls=()=>{const{t:s}=he();return e.jsx("div",{className:"page",children:e.jsxs("div",{className:ee.delivery,children:[e.jsx("h1",{children:s("delivery-title")}),e.jsxs("section",{className:ee.section,children:[e.jsx("h2",{children:s("delivery-conditions-title")}),e.jsx("p",{className:ee.warning,children:s("delivery-warning")}),e.jsxs("ul",{className:ee.list,children:[e.jsx("li",{children:s("delivery-ua")}),e.jsx("li",{children:s("delivery-pl")}),e.jsx("li",{children:s("delivery-us-ca")})]}),e.jsx("p",{className:ee.freeShipping,children:s("delivery-free")}),e.jsx("p",{children:s("delivery-restrictions")})]}),e.jsxs("section",{className:ee.section,children:[e.jsx("h2",{children:s("tracking-title")}),e.jsx("p",{children:s("tracking-info")}),e.jsx("p",{children:s("tracking-taxes")})]}),e.jsxs("section",{className:ee.section,children:[e.jsx("h2",{children:s("exchange-title")}),e.jsx("p",{children:s("exchange-info")}),e.jsx("p",{children:s("exchange-costs")})]}),e.jsxs("section",{className:ee.section,children:[e.jsx("h2",{children:s("return-title")}),e.jsx("p",{children:s("return-info")})]}),e.jsxs("section",{className:`${ee.section}`,children:[e.jsx("h2",{children:s("exchange-return-how-title")}),e.jsxs("ul",{children:[e.jsxs("li",{children:[s("exchange-return-step1")," ",e.jsx(V,{to:"/contact",className:"blue",children:s("exchange-return-contact")})]}),e.jsx("li",{children:s("exchange-return-step2")}),e.jsx("li",{children:s("exchange-return-step3")})]})]}),e.jsxs("section",{className:ee.section,children:[e.jsx("h2",{children:s("payment-title")}),e.jsxs("div",{className:ee.payment,children:[e.jsx("h3",{children:s("payment-invoice-title")}),e.jsx("p",{children:s("payment-invoice-info")}),e.jsx("h3",{children:s("payment-prepay-title")}),e.jsx("p",{children:s("payment-prepay-info")}),e.jsx("h3",{children:s("payment-postpay-title")}),e.jsx("p",{children:s("payment-postpay-info")})]})]})]})})},An="_checkout_zaab7_1",Rn="_summary_zaab7_15",Fn="_item_zaab7_22",qn="_total_zaab7_28",xe={checkout:An,summary:Rn,item:Fn,total:qn},Ts="cart",ds=()=>{try{const s=localStorage.getItem(Ts);return s?JSON.parse(s):[]}catch{return[]}},Ke=s=>{localStorage.setItem(Ts,JSON.stringify(s))},fe={addItem(s){const t=ds(),a=t.findIndex(r=>r.productId===s.productId&&r.color===s.color&&r.size===s.size);return a>=0?t[a].quantity=Math.min(99,t[a].quantity+s.quantity):t.push(s),Ke(t),t},async addToCart(s,t){return(await I.post("/cart/add",{userId:s,item:t})).data.item},async deleteTCartItem(s){await I.delete(`/cart-item/${s}`)},async deleteTCartItems(){await I.delete("/cart/clear")},async getCart(s){return s?(await I.get("/cart")).data.items:ds()},setLocalCart(s){return Ke(s),s},clearLocalCart(){Ke([])}},je=ce((s,t)=>({cart:[],loaded:!1,isLoading:!1,setCart:a=>s({cart:a}),addCartItem:async a=>{try{const{user:r}=U.getState();if(r?.id){await fe.addToCart(r.id,a);const n=await fe.getCart(r?.id);s({cart:n})}else{const n=Math.floor(Math.random()*1e3),o=a.productId+n,c={...a,id:+o},m=fe.addItem(c);s({cart:m})}}catch(r){console.error("Помилка при додаванні в кошик:",r)}},clearCart:async()=>{try{await fe.clearLocalCart(),s({cart:[],loaded:!1})}catch(a){console.error("Помилка при очищенні кошика:",a)}},deleteCartItems:async()=>{try{await fe.deleteTCartItems(),s({cart:[]})}catch(a){console.error("Помилка при видаленні товарів:",a)}},deleteCartItem:async a=>{const{user:r}=U.getState();try{r&&await fe.deleteTCartItem(+a),s(n=>{const o=n.cart.filter(c=>c.id!==a);return r||localStorage.setItem("cart",JSON.stringify(o)),{cart:o}})}catch(n){console.error("Помилка при delete Item:",n)}},fetchCart:async()=>{const{loaded:a,isLoading:r}=t(),{user:n,accessToken:o}=U.getState();if(!r){if(!n?.id||!o){try{const c=JSON.parse(localStorage.getItem("cart")||"[]");s({cart:c,loaded:!0})}catch(c){console.error("Помилка завантаження кошика з localStorage:",c),s({cart:[],loaded:!0})}return}if(a){console.log("Кошик вже завантажений для користувача");return}if(s({isLoading:!0}),n?.id&&o)try{const c=await fe.getCart(n.id);s({cart:c,loaded:!0,isLoading:!1})}catch(c){console.error("Помилка при завантаженні кошика:",c),s({cart:[],loaded:!0,isLoading:!1})}}}})),De={async createOrder(s,t,a,r){const n=t.reduce((o,c)=>{const m=c.priceSale&&c.priceSale<c.price?c.priceSale:c.price;return o+m*c.quantity},0);return I.post("/orders",{userId:s??null,guestName:r.fullName,guestPhone:r.phone,guestEmail:r.email,novaPostCity:r.city,novaPostBranch:r.novaPoshtaBranch,paymentMethod:a.toUpperCase(),finalPrice:Number(Math.round(n*10)/10),items:t.map(o=>{const c=o.priceSale&&o.priceSale<o.price?o.priceSale:o.price;return{productId:o.productId,quantity:o.quantity,price:o.price,finalPrice:+(c*o.quantity).toFixed(1),name:o.name,image:o.image,color:o.color,size:o.size,priceSale:o.priceSale+""}})})},getOrders:async(s=!1,t,a=1,r=10)=>{const n={page:a,limit:r};return t?.orderId&&(n.orderId=t.orderId),t?.dateFrom&&(n.dateFrom=t.dateFrom),t?.dateTo&&(n.dateTo=t.dateTo),s&&(n.showAll=!0),(await I.get("/orders/all",{params:n,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data},updateOrderStatus:async(s,t)=>(await I.patch(`/orders/${s}/status`,{status:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data,updateOrderItemTracking:async(s,t)=>(await I.patch(`/orders/tracknumber/${s}`,{trackingNumber:t})).data},Un="_form_15mwq_1",zn={form:Un},ze={async getAreas(){return(await I.get("nova-poshta/areas")).data},async getCities(s){return(await I.get(`nova-poshta/cities${s?`?areaRef=${s}`:""}`)).data},async getBranches(s){return(await I.get(`nova-poshta/warehouses?cityRef=${s}`)).data},async getTracking(s){return(await I.get(`nova-poshta/tracking?ttn=${s}`)).data[0]}},Mn="_selectWrapper_167pe_1",Dn="_selectInput_167pe_8",Wn="_placeholder_167pe_29",Gn="_arrow_167pe_33",Vn="_open_167pe_41",Hn="_optionsList_167pe_45",Jn="_option_167pe_45",Kn="_selected_167pe_80",Xn="_disabled_167pe_86",re={selectWrapper:Mn,selectInput:Dn,placeholder:Wn,arrow:Gn,open:Vn,optionsList:Hn,option:Jn,selected:Kn,disabled:Xn},Me=({options:s,placeholder:t="Select...",onChange:a,value:r,disabled:n=!1})=>{const[o,c]=u.useState(!1),[m,i]=u.useState(r),l=u.useRef(null);u.useEffect(()=>{const f=g=>{l.current&&!l.current.contains(g.target)&&c(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const h=f=>{i(f.value),a(f.value),c(!1)};return e.jsxs("div",{className:re.selectWrapper,ref:l,children:[e.jsxs("div",{className:`${re.selectInput} ${n?re.disabled:""}`,onClick:()=>!n&&c(f=>!f),children:[e.jsx("span",{className:m?"":re.placeholder,children:s.find(f=>f.value===m)?.label||t}),e.jsx("span",{className:`${re.arrow} ${o?re.open:""}`})]}),e.jsx("ul",{className:`${re.optionsList} ${o?re.open:""}`,children:s.map(f=>e.jsx("li",{className:`${re.option} ${f.value===m?re.selected:""}`,onClick:()=>h(f),children:f.label},f.value))})]})},Yn=({form:s,setForm:t})=>{const[a,r]=u.useState([]),[n,o]=u.useState([]),[c,m]=u.useState([]),[i,l]=u.useState(!1),[h,f]=u.useState(!1);u.useEffect(()=>{ze.getAreas().then(d=>r(d)).catch(d=>console.error("❌ Помилка завантаження областей:",d))},[]),u.useEffect(()=>{s.areaRef&&(l(!0),ze.getCities(s.areaRef).then(d=>o(d)).catch(d=>console.error("❌ Помилка завантаження міст:",d)).finally(()=>l(!1)))},[s.areaRef]),u.useEffect(()=>{s.cityRef&&(f(!0),ze.getBranches(s.cityRef).then(d=>m(d)).catch(d=>console.error("❌ Помилка завантаження відділень:",d)).finally(()=>f(!1)))},[s.cityRef]);const g=(d,p)=>{if(d==="areaRef"&&(t(y=>({...y,areaRef:p,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0})),o([]),m([])),d==="cityRef"){const y=n.find(w=>w.Ref===p)?.Description||"";t(w=>({...w,cityRef:p,cityName:y,branchRef:void 0,branchName:void 0})),m([])}if(d==="branchRef"){const y=c.find(w=>w.Ref===p);t(w=>({...w,branchRef:p,branchName:y?`${y.Number} - ${y.ShortAddress}`:""}))}};return e.jsxs("div",{className:zn.form,children:[e.jsx("input",{type:"text",name:"fullName",placeholder:"Ім’я та прізвище",value:s.fullName,onChange:d=>t(p=>({...p,fullName:d.target.value})),required:!0}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Телефон",value:s.phone,onChange:d=>t(p=>({...p,phone:d.target.value})),required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:d=>t(p=>({...p,email:d.target.value}))}),e.jsx(Me,{value:s.areaRef||"",onChange:d=>g("areaRef",d),options:a.map(d=>({value:d.Ref,label:d.Description})),placeholder:"Виберіть область"}),e.jsx(Me,{value:s.cityRef||"",onChange:d=>g("cityRef",d),options:n.map(d=>({value:d.Ref,label:d.Description})),placeholder:i?"Завантаження міст...":"Виберіть місто",disabled:!s.areaRef}),e.jsx(Me,{value:s.branchRef||"",onChange:d=>g("branchRef",d),options:c.map(d=>({value:d.Ref,label:`${d.Number} - ${d.ShortAddress}`})),placeholder:h?"Завантаження відділень...":"Виберіть відділення",disabled:!s.cityRef})]})},Qn=()=>{const{user:s}=U(),{cart:t,setCart:a,clearCart:r}=je(),[n,o]=u.useState(!1),[c,m]=u.useState("cod"),i=ye(),[l,h]=u.useState({fullName:s?`${s.first_name??""} ${s.last_name??""}`.trim():"",phone:"",email:s?.email||"",areaRef:void 0,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0});u.useEffect(()=>{const d=localStorage.getItem("cart");if(d)try{a(JSON.parse(d))}catch{a([])}},[a]);const f=async()=>{if(!l.fullName||!l.phone||!l.areaRef||!l.cityRef||!l.branchRef){alert("⚠ Заповніть усі обов’язкові поля");return}if(t.length===0){alert("🛒 Ваш кошик порожній");return}o(!0);try{const d={...l,city:l.cityName,novaPoshtaBranch:l.branchName},p=await De.createOrder(s?.id??null,t,c,d);localStorage.removeItem("cart"),r(),s&&je.getState().deleteCartItems(),alert("✅ Замовлення відправлено!"),window.gapi&&window.gapi.load("surveyoptin",function(){window.gapi.surveyoptin.render({merchant_id:5655937585,order_id:p.id,email:l.email,delivery_country:"UA",estimated_delivery_date:"2025-09-30"});const y=setInterval(()=>{document.querySelector("iframe[src*='surveyoptin']")||(clearInterval(y),i("/"))},1e3)})}catch(d){console.error(d),alert("❌ Сталася помилка при оформленні замовлення")}finally{o(!1)}},g=t.reduce((d,p)=>{const y=p?.priceSale&&p?.priceSale<p?.price?p.priceSale:p?.price||0,w=p?.quantity??1;return d+y*w},0);return e.jsxs("div",{className:`${xe.checkout} page`,children:[e.jsx("h1",{children:"Оформлення замовлення"}),e.jsx(Yn,{form:l,setForm:h}),e.jsxs("div",{className:xe.summary,children:[t.map(d=>{const p=d?.priceSale&&d?.priceSale<d?.price?d.priceSale:d?.price||0,y=d?.quantity??1;return e.jsxs("div",{className:xe.item,children:[e.jsxs("span",{children:[d?.name," (color:  ",d.color,") -  ",e.jsx("strong",{children:y})]}),e.jsxs("span",{children:[" x ",(p*y).toFixed(2)," "]})]},d.id)}),e.jsxs("div",{className:xe.total,children:[e.jsx("strong",{children:"Загальна сума:"})," ₴",g.toFixed(2)]})]}),e.jsxs("div",{className:xe.payment,children:[e.jsx("h2",{children:"Метод оплати"}),e.jsx(_,{label:"Оплата при отриманні",type:"radio",value:"cod",checked:c==="cod",onChange:()=>m("cod")}),e.jsx(_,{label:"Оплата за реквізитами",type:"radio",value:"card",checked:c==="card",onChange:()=>m("card")}),c==="card"&&e.jsxs("div",{className:xe.cardDetails,children:[e.jsx("h3",{children:"Реквізити для оплати"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Отримувач:"})," ФОП Батько Ірина Ігорівна"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"IBAN:"})," UA333220010000026005350071455"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ЄДРПОУ:"})," 3590006083"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"МФО:"})," 322001"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Призначення платежу:"})," Оплата замовлення ",t[0].id]})]})]}),e.jsx("div",{className:xe.links,children:e.jsx(V,{to:"/delivery-terms",className:"link",children:"📦 Умови доставки та повернення"})}),e.jsx($,{onClick:f,disabled:n,children:n?"Відправка...":"Відправити замовлення"})]})},Zn="_page_16uea_2",eo="_title_16uea_11",so="_centerWrapper_16uea_18",to="_adminPage_16uea_30",ao="_adminContent_16uea_40",ro="_sidebarWrapper_16uea_49",no="_burger_16uea_60",oo="_open_16uea_97",co="_boxLine_16uea_153",io="_subcategories_16uea_161",lo="_subcategoriesList_16uea_174",uo="_subcategoryLink_16uea_194",mo="_category_16uea_215",ho="_categoryImage_16uea_240",po="_categoryName_16uea_293",go="_categoryIcon_16uea_319",D={page:Zn,title:eo,centerWrapper:so,adminPage:to,adminContent:ao,sidebarWrapper:ro,burger:no,open:oo,boxLine:co,subcategories:io,subcategoriesList:lo,subcategoryLink:uo,category:mo,categoryImage:ho,categoryName:po,categoryIcon:go},xo=()=>{const{user:s,setUser:t}=U(),{register:a,handleSubmit:r,formState:{errors:n}}=me({defaultValues:s?{first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,address:s.address,city:s.city,country:s.country,postalCode:s.postalCode,dateOfBirth:s.dateOfBirth?s.dateOfBirth.toString().split("T")[0]:void 0}:{}}),[o,c]=u.useState(null),[m,i]=u.useState(null);if(!s)return e.jsx("div",{children:"Ви не авторизовані"});const l=async h=>{try{if(s.id){const f=await pe.updateUser(h,s.id);t(f),c("Профіль оновлено успішно"),i(null)}}catch(f){i(f.message||"Помилка при оновленні профілю"),c(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Профіль користувача"}),e.jsxs("div",{className:D.boxLine,children:[e.jsxs(V,{to:"/orders",children:[" ",e.jsx($,{variant:"link",children:"Мої замовлення"})," "]}),e.jsx(V,{to:"/change-password",className:"blue hover:underline",children:e.jsx($,{variant:"link",children:"Змінити пароль"})})]}),e.jsxs("form",{onSubmit:r(l),className:"form",children:[e.jsx(_,{placeholder:"Ім’я",id:"profile-firstname",autoComplete:"given-name",...a("first_name",{required:"Ім’я обов'язкове"})}),n.first_name&&e.jsx("p",{className:"error",children:n.first_name.message}),e.jsx(_,{placeholder:"Прізвище",id:"lastname",...a("last_name",{required:"Прізвище обов'язкове"})}),n.last_name&&e.jsx("p",{className:"error",children:n.last_name.message}),e.jsx(_,{type:"email",placeholder:"Email",autoComplete:"email",disabled:!0,id:"profile-email",...a("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),n.email&&e.jsx("p",{className:"error",children:n.email.message}),e.jsx(_,{placeholder:"Телефон",autoComplete:"tel",...a("phone")}),e.jsx(_,{placeholder:"Адреса",autoComplete:"street-address",...a("address")}),e.jsx(_,{placeholder:"Місто",autoComplete:"address-level2",...a("city")}),e.jsx(_,{placeholder:"Країна",autoComplete:"country",...a("country")}),e.jsx(_,{placeholder:"Поштовий індекс",autoComplete:"postal-code",...a("postalCode")}),e.jsx(_,{type:"date",placeholder:"Дата народження",autoComplete:"bday",...a("dateOfBirth")}),o&&e.jsx("p",{className:"green",children:o}),m&&e.jsx("p",{className:"error",children:m}),e.jsx($,{type:"submit",children:"Оновити профіль"})]})]})};function fo(){return e.jsx("div",{className:D.centerWrapper,children:e.jsx($n,{})})}const jo=()=>e.jsx("div",{children:"NotFoundPage"}),yo="_aboutWrapper_93t88_2",_o="_fbeAbout_93t88_6",vo="_title_93t88_24",bo="_subtitle_93t88_46",No="_description_93t88_73",So="_featuresList_93t88_90",ko="_valuesList_93t88_91",wo="_deliveryList_93t88_92",K={aboutWrapper:yo,fbeAbout:_o,title:vo,subtitle:bo,description:No,featuresList:So,valuesList:ko,deliveryList:wo},Co=()=>{const{t:s}=he();return e.jsx("section",{"data-bg":"dark",className:`content-section ${K.contentSection}`,children:e.jsx("div",{className:K.aboutWrapper,children:e.jsxs("div",{className:K.fbeAbout,children:[e.jsx("h1",{className:K.title,children:s("about-h")}),e.jsx("p",{className:K.description,children:s("about1")}),e.jsx("h2",{className:K.subtitle,children:s("about-h1")}),e.jsx("p",{className:K.description,children:s("about2")}),e.jsx("h2",{className:K.subtitle,children:s("about-h2")}),e.jsxs("ul",{className:K.featuresList,children:[e.jsx("li",{children:s("about3-1")}),e.jsx("li",{children:s("about3-2")}),e.jsx("li",{children:s("about3-3")}),e.jsx("li",{children:s("about3-4")})]}),e.jsx("h2",{className:K.subtitle,children:s("about-h3")}),e.jsxs("ul",{className:K.valuesList,children:[e.jsx("li",{children:s("about4-1")}),e.jsx("li",{children:s("about4-2")}),e.jsx("li",{children:s("about4-3")}),e.jsx("li",{children:s("about4-4")})]}),e.jsx("h2",{className:K.subtitle,children:s("about-h4")}),e.jsxs("ul",{className:K.deliveryList,children:[e.jsx("li",{children:s("about5-1")}),e.jsx("li",{children:s("about5-2")}),e.jsx("li",{children:s("about5-3")})]})]})})})},$o=()=>e.jsx("div",{className:"page",children:e.jsx(Co,{})}),Io="_form_1pgbi_1",Po="_row_1pgbi_26",Eo="_error_1pgbi_33",Lo="_success_1pgbi_38",oe={form:Io,row:Po,error:Eo,success:Lo},Bo=()=>{const{register:s,handleSubmit:t,reset:a,formState:{errors:r,isSubmitting:n,isSubmitSuccessful:o},setError:c}=me({defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:"",address:"",city:"",country:"",postalCode:"",dateOfBirth:""}}),m=async i=>{try{await pe.register(i),a()}catch(l){console.log("RegisterForm: Error during registration:",l),c("email",{type:"server",message:l.response?.data?.error.message||"Помилка при реєстрації"})}};return e.jsxs("form",{className:oe.form,onSubmit:t(m),children:[e.jsx("h2",{children:"Реєстрація користувача"}),e.jsxs("div",{className:oe.row,children:[e.jsx(_,{type:"text",placeholder:"Ім'я *",...s("first_name",{required:"Ім'я обов'язкове"})}),r.first_name&&e.jsx("p",{className:oe.error,children:r.first_name.message}),e.jsx(_,{type:"text",placeholder:"Прізвище *",...s("last_name",{required:"Прізвище обов'язкове"})}),r.last_name&&e.jsx("p",{className:oe.error,children:r.last_name.message})]}),e.jsx(_,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),r.email&&e.jsx("p",{className:oe.error,children:r.email.message}),e.jsx(_,{type:"password",placeholder:"Пароль *",...s("password",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Пароль має містити мін. 8 символів, 1 велику і 1 малу літеру"}})}),r.password&&e.jsx("p",{className:oe.error,children:r.password.message}),e.jsx(_,{type:"tel",placeholder:"Телефон *",...s("phone",{required:"Телефон обов'язковий",pattern:{value:/^\+?[0-9\s\-()]+$/,message:"Некоректний номер телефону"}})}),e.jsx(_,{type:"text",placeholder:"Адреса",...s("address")}),e.jsxs("div",{className:oe.row,children:[e.jsx(_,{type:"text",placeholder:"Місто",...s("city")}),e.jsx(_,{type:"text",placeholder:"Країна",...s("country")})]}),e.jsx("div",{className:oe.row,children:e.jsx(_,{type:"text",placeholder:"Поштовий індекс",...s("postalCode")})}),e.jsxs("span",{children:["Дата народження  ",e.jsx("br",{}),e.jsx(_,{type:"date",placeholder:"Дата народження",...s("dateOfBirth")})]}),o&&e.jsx("p",{className:oe.success,children:"Реєстрація успішна! Перейдіть на сторінку авторизації"}),e.jsx($,{type:"submit",disabled:n,children:n?"Реєстрація...":"Зареєструватися"})]})},To=()=>e.jsx("div",{className:"page",children:e.jsx(Bo,{})}),Oo=()=>{const{categories:s}=Ae(),{t}=he();return e.jsxs("div",{className:Le.caruselBox,children:[e.jsx("h2",{children:t("choosecategory")}),e.jsx(ks,{effect:"coverflow",grabCursor:!0,pagination:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},modules:[$s,tt],spaceBetween:16,navigation:{enabled:!0,hideOnClick:!1},watchOverflow:!1,breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}},children:s.filter(a=>a.parentId===null).map(a=>e.jsx(ws,{className:Le.wrapper,children:e.jsx(V,{to:`/category/${a.slug}`,children:e.jsxs("div",{className:Le.categoryBox,children:[e.jsx("h3",{children:a.name}),e.jsx("div",{className:Le.imgBox,children:e.jsx("img",{src:a.imageUrl,alt:a.name})})]})})},a.id))})]})},us=()=>{const{products:s,fetchProducts:t}=Ge(),[a,r]=u.useState(!1),[n,o]=u.useState(null);return u.useEffect(()=>{(async()=>{r(!0),o(null);try{await t()}catch(m){console.error("Failed to load products:",m),o(m instanceof Error?m.message:"Unknown error")}finally{r(!1)}})()},[t]),a?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsx("div",{children:e.jsx("p",{children:"Завантаження продуктів..."})})]}):n?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Помилка завантаження: ",n]}),e.jsx($,{onClick:()=>window.location.reload(),children:"Спробувати знову"})]})]}):e.jsxs("div",{className:"pages",children:[e.jsx("div",{style:{padding:"20px 0"},children:e.jsx(ks,{modules:[$s],spaceBetween:16,slidesPerView:"auto",navigation:!0,className:"swiper-box",children:s.map(c=>e.jsx(ws,{className:"slide",children:e.jsx(as,{product:c,isMainPage:!0})},c.id))})}),e.jsx(Oo,{})]})},Ao="_menuItem_1vxyu_1",Ro="_menuLink_1vxyu_7",ms={menuItem:Ao,menuLink:Ro},Fo=({href:s,label:t,onClick:a})=>e.jsx("li",{className:ms.menuItem,children:e.jsx("a",{href:s,className:ms.menuLink,onClick:r=>{r.preventDefault(),a?.()},children:t})}),qo="_menu_cfg4h_1",Uo={menu:qo},Os=({items:s,onItemClick:t})=>{const a=r=>{t&&t(r)};return e.jsx("ul",{className:Uo.menu,children:s.map((r,n)=>e.jsx(Fo,{href:r.href,label:r.label,onClick:()=>a(r.href)},n))})},zo="_sidebarBox_74jfv_1",Mo="_sidebar_74jfv_1",hs={sidebarBox:zo,sidebar:Mo},Do=({children:s})=>e.jsx("div",{className:hs.sidebarBox,children:e.jsx("div",{className:hs.sidebar,children:Se.Children.map(s,t=>Se.isValidElement(t)&&t.type===Os?Se.cloneElement(t):null)})}),Wo=()=>{const s=ye(),[t,a]=u.useState(!1),r=[{href:"dashboard",label:"Dashboard"},{href:"createproduct",label:"Create Product"},{href:"create-category",label:"Create/Update Category"},{href:"create-collection",label:"Create/Update Collection"},{href:"/orders",label:"Замовлення"}],n=()=>{a(c=>!c)},o=c=>{s(c),a(!1)};return e.jsxs("div",{className:`${D.adminPage} ${D.page}`,children:[e.jsxs("button",{className:D.burger,onClick:n,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx("div",{className:`${D.sidebarWrapper} ${t?D.open:""}`,children:e.jsx(Do,{isOpen:t,children:e.jsx(Os,{items:r,onItemClick:o})})}),e.jsx("div",{className:D.adminContent,children:e.jsx(Hs,{})})]})},Go="_cart_l07mg_9",Vo="_cartItems_l07mg_21",Ho="_total_l07mg_27",Jo="_checkout_l07mg_42",Ko="_empty_l07mg_57",Ie={cart:Go,cartItems:Vo,total:Ho,checkout:Jo,empty:Ko},Xo="_cartItem_4x454_12",Yo="_image_4x454_26",Qo="_info_4x454_34",Zo="_quantity_4x454_52",ec="_remove_4x454_79",_e={cartItem:Xo,image:Yo,info:Qo,quantity:Zo,remove:ec},sc=({item:s,price:t,updateQuantity:a,removeItem:r})=>e.jsxs("div",{className:_e.cartItem,children:[e.jsx("img",{src:s.image,alt:s.name,className:_e.image}),e.jsxs("div",{className:_e.info,children:[e.jsx("h2",{children:s.name}),e.jsxs("p",{children:["Колір: ",s.color]}),e.jsxs("p",{children:["Розмір: ",s.size]}),e.jsxs("p",{children:["Ціна: ₴",t.toFixed(2)]}),e.jsxs("div",{className:_e.quantity,children:[e.jsx($,{onClick:()=>a(s.productId,s.quantity-1),className:"black",children:"-"}),e.jsx(_,{className:_e.input,type:"number",id:"quantity",name:"quantity",min:"1",max:"99",value:s.quantity,onChange:n=>a(s.productId,Number(n.target.value))}),e.jsx($,{onClick:()=>a(s.productId,s.quantity+1),className:"black",children:"+"})]}),e.jsx($,{className:_e.remove,onClick:()=>r(s),children:"Видалити"})]})]}),tc=()=>{const[s,t]=u.useState([]),[a,r]=u.useState(!1),n=ye(),{cart:o,fetchCart:c}=je(),{user:m}=U();u.useEffect(()=>{m&&m?.id&&c()},[m,c]),u.useEffect(()=>{if(o.length>0){const g=o.map(d=>{const p=d.priceSale&&d.priceSale<d.price?d.priceSale:d.price;return{...d,finalPrice:p*d.quantity}});t(g)}else{const g=localStorage.getItem("cart");if(g)try{const p=JSON.parse(g).map(y=>{const w=y.priceSale&&y.priceSale<y.price?y.priceSale:y.price;return{...y,finalPrice:w*y.quantity}});t(p)}catch{t([])}}r(!0)},[o]),u.useEffect(()=>{a&&localStorage.setItem("cart",JSON.stringify(s))},[s,a]);const i=(g,d,p,y,w)=>{t(P=>P.map(k=>{if(w?k.id===w:k.productId===g&&k.color===p&&k.size===y){const S=Math.max(1,Math.min(99,d)),L=k.priceSale&&k.priceSale<k.price?k.priceSale:k.price;return{...k,quantity:S,finalPrice:L*S}}return k}))},l=g=>{g.id?(t(d=>d.filter(p=>p.id!==g.id)),je.getState().deleteCartItem(g.id)):(t(d=>d.filter(p=>!(p.productId===g.productId&&p.color===g.color&&p.size===g.size))),localStorage.setItem("cart",JSON.stringify(s)))},h=s.reduce((g,d)=>g+(d.finalPrice??0),0);if(s.length===0)return e.jsx("div",{className:Ie.empty,children:"Кошик порожній"});const f=()=>{if(s.length===0){alert("🛒 Кошик порожній");return}n("/checkout")};return e.jsxs("div",{className:Ie.cart,children:[e.jsx("h1",{children:"Кошик"}),e.jsx("div",{className:Ie.cartItems,children:s.map(g=>e.jsx(sc,{item:g,price:g.finalPrice?g.finalPrice/g.quantity:0,updateQuantity:(d,p)=>i(d,p,g.color,g.size,g.id),removeItem:l},g.id??`${g.productId}-${g.color}-${g.size}`))}),e.jsxs("div",{className:Ie.total,children:[e.jsxs("h2",{children:["Загальна сума: ₴",h.toFixed(2)]}),e.jsx($,{className:Ie.checkout,onClick:f,children:"Оформити замовлення"})]})]})},ac=()=>e.jsx("div",{className:D.page,children:e.jsx(tc,{})}),rc="_productsContainer_njt8n_1",nc="_cardWrapper_njt8n_9",Pe={productsContainer:rc,cardWrapper:nc},As=({categorySlug:s,collectionSlug:t})=>{const{products:a,fetchProducts:r}=Ge(),[n,o]=u.useState(!1),[c,m]=u.useState(null);return u.useEffect(()=>{(async()=>{o(!0),m(null);const l={limit:50,skip:0,categorySlug:s||void 0,collectionSlug:t||void 0};try{await r(l)}catch(h){console.error("Failed to load products:",h),m(h instanceof Error?h.message:"Unknown error")}finally{o(!1)}})()},[r,s,t]),n?e.jsx("div",{children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Завантаження продуктів..."})]})}):c?e.jsx("div",{className:Pe.productsGrid,children:e.jsxs("div",{className:Pe.error,children:[e.jsxs("p",{children:["Помилка завантаження: ",c]}),e.jsx($,{onClick:()=>window.location.reload(),className:Pe.retryButton,children:"Спробувати знову"})]})}):e.jsx("div",{className:Pe.productsContainer,children:a.map(i=>e.jsx("div",{className:Pe.cardWrapper,children:e.jsx(as,{product:i})},i.id))})},oc=()=>{const{categorySlug:s}=We(),{categories:t}=Ae(),a=t.find(o=>o.slug===s),r=t.filter(o=>o.parentId===a?.id),n=o=>o?{backgroundImage:`url(${o})`}:{};return e.jsxs("div",{className:D.page,children:[e.jsx("h2",{className:D.title,children:a?.name||s?.toUpperCase()}),r.length>0&&e.jsx("div",{className:D.subcategories,children:e.jsx("div",{className:D.subcategoriesList,children:r.map(o=>e.jsx(V,{to:`/category/${o.slug}`,className:D.subcategoryLink,children:e.jsxs("div",{className:D.category,children:[e.jsx("div",{className:D.categoryImage,style:n(o.imageUrl),role:"img","aria-label":`Зображення категорії ${o.name}`,children:!o.imageUrl&&e.jsx("div",{className:D.categoryIcon,children:"📦"})}),e.jsx("div",{className:D.categoryName,children:o.name})]})},o.id))})}),e.jsx(As,{categorySlug:s})]})},cc=()=>{const{collectionSlug:s}=We();return e.jsxs("div",{className:D.page,children:[e.jsx("h2",{children:s?.toUpperCase()}),e.jsx(As,{collectionSlug:s})]})},ic="_title_1lqmk_11",lc="_section_1lqmk_19",dc="_subtitle_1lqmk_32",uc="_list_1lqmk_41",X={title:ic,section:lc,subtitle:dc,list:uc},mc=()=>e.jsxs("div",{className:"page",children:[e.jsx("h1",{className:X.title,children:"Політика конфіденційності"}),e.jsx("section",{className:X.section,children:e.jsx("p",{children:"У цій Політиці конфіденційності описано, як FBE («Сайт», «ми», «нас» або «наш») збирає, використовує та розкриває вашу особисту інформацію, коли ви відвідуєте, користуєтеся нашими послугами або робите покупки на сайті desse-swim."})}),e.jsxs("section",{className:X.section,children:[e.jsx("h2",{className:X.subtitle,children:"Зміни в цій Політиці конфіденційності"}),e.jsx("p",{children:"Ми можемо час від часу оновлювати цю Політику, у тому числі для відображення змін у нашій практиці або з інших операційних, юридичних чи нормативних причин."})]}),e.jsxs("section",{className:X.section,children:[e.jsx("h2",{className:X.subtitle,children:"Як ми збираємо та використовуємо вашу особисту інформацію"}),e.jsx("p",{children:"Для надання Послуг ми збираємо вашу особисту інформацію з різних джерел. Інформація, яку ми збираємо, залежить від того, як ви взаємодієте з нашим сайтом та послугами."})]}),e.jsxs("section",{className:X.section,children:[e.jsx("h2",{className:X.subtitle,children:"Інформація, яку ми збираємо"}),e.jsxs("ul",{className:X.list,children:[e.jsx("li",{children:"Основні контактні дані (ім'я, адреса, телефон, email)"}),e.jsx("li",{children:"Інформація про замовлення та покупки"}),e.jsx("li",{children:"Дані облікового запису (логін, пароль)"}),e.jsx("li",{children:"Дані про підтримку клієнтів"})]})]}),e.jsxs("section",{className:X.section,children:[e.jsx("h2",{className:X.subtitle,children:"Використання cookies"}),e.jsx("p",{children:"Ми використовуємо файли cookie для роботи сайту, аналітики та персоналізації досвіду користувача."})]}),e.jsxs("section",{className:X.section,children:[e.jsx("h2",{className:X.subtitle,children:"Розкриття інформації"}),e.jsx("p",{children:"Ми можемо передавати інформацію третім сторонам для виконання послуг, аналітики, маркетингу та безпеки."})]})]}),hc="_product_somy3_3",pc="_nameBlock_somy3_22",gc="_priceWrapper_somy3_36",xc="_images_somy3_53",fc="_mainImage_somy3_62",jc="_noImage_somy3_69",yc="_info_somy3_81",_c="_title_somy3_87",vc="_description_somy3_94",bc="_price_somy3_36",Nc="_priceSale_somy3_113",Sc="_priceOriginal_somy3_119",kc="_featuresSection_somy3_126",wc="_featuresList_somy3_140",Cc="_productForm_somy3_152",$c="_formGroup_somy3_162",Ic="_colorOptions_somy3_175",Pc="_colorOption_somy3_175",Ec="_selected_somy3_197",Lc="_sizeOptions_somy3_203",Bc="_sizeOption_somy3_203",Tc="_quantityWrapper_somy3_232",Oc="_quantityBtn_somy3_239",Ac="_quantityInput_somy3_263",Rc="_totalPrice_somy3_280",Fc="_addToCartBtn_somy3_291",qc="_success_somy3_312",Uc="_loading_somy3_320",zc="_error_somy3_321",Mc="_noProduct_somy3_322",Dc="_accordion_somy3_370",Wc="_accordionBtn_somy3_374",Gc="_accordionContent_somy3_388",Vc="_mainImageContainer_somy3_427",Hc="_thumbnailContainer_somy3_449",Jc="_thumbnail_somy3_449",Kc="_activeThumbnail_somy3_496",Xc="_thumbnailImage_somy3_500",Yc="_buyNowBtn_somy3_535",C={product:hc,nameBlock:pc,priceWrapper:gc,images:xc,mainImage:fc,noImage:jc,info:yc,title:_c,description:vc,price:bc,priceSale:Nc,priceOriginal:Sc,featuresSection:kc,featuresList:wc,productForm:Cc,formGroup:$c,colorOptions:Ic,colorOption:Pc,selected:Ec,sizeOptions:Lc,sizeOption:Bc,quantityWrapper:Tc,quantityBtn:Oc,quantityInput:Ac,totalPrice:Rc,addToCartBtn:Fc,success:qc,loading:Uc,error:zc,noProduct:Mc,accordion:Dc,accordionBtn:Wc,accordionContent:Gc,mainImageContainer:Vc,thumbnailContainer:Hc,thumbnail:Jc,activeThumbnail:Kc,thumbnailImage:Xc,buyNowBtn:Yc},Qc=({productId:s})=>{const[t,a]=u.useState(null),[r,n]=u.useState({variantId:null,size:null,quantity:1}),[o,c]=u.useState(!0),[m,i]=u.useState(null),[l,h]=u.useState(!1),[f,g]=u.useState(!1),[d,p]=u.useState(!1),[y,w]=u.useState(0),{t:P}=he(),k=Oe(j=>j.lang),O=j=>{if(!j||j.length===0)return null;const M={uk:1,en:2}[k];return j.find(W=>W.languageId===M)||j[0]};u.useEffect(()=>{(async()=>{c(!0),i(null);try{const N=Number(s);if(isNaN(N))throw new Error("Невірний ID продукту");const M=await de.getById(N);if(a(M),M?.variants?.length){const W=[...M.variants].sort((Ds,Ws)=>Ds.stock-Ws.stock);n({variantId:W[0].id||null,size:W[0].sizes?.[0]||null,quantity:1})}}catch(N){i(N instanceof Error?N.message:"Помилка завантаження продукту")}finally{c(!1)}})()},[s]);const S=()=>t?.variants?[...t.variants].sort((j,N)=>j.stock>0&&N.stock===0?-1:j.stock===0&&N.stock>0?1:j.stock-N.stock):[],A=t?.variants?S().flatMap(N=>(N.images||[]).sort((M,W)=>(M.order??0)-(W.order??0)).map(M=>({...M,variantId:N.id,variantColor:N.color,variantSizes:N.sizes}))):[],v=j=>{const N=A[j];N&&(w(j),n(M=>({...M,variantId:N.variantId||null,size:N.variantSizes?.[0]||null})))},E=j=>{const N=t?.variants.find(W=>W.id===j);n(W=>({...W,variantId:j,size:N?.sizes?.[0]||null}));const M=A.findIndex(W=>W.variantId===j);M!==-1&&w(M)},z=j=>n(N=>({...N,size:j})),b=j=>{const N=Math.max(1,Math.min(99,Number(j.target.value)));n(M=>({...M,quantity:N}))},F=()=>n(j=>({...j,quantity:Math.min(j.quantity+1,99)})),G=()=>n(j=>({...j,quantity:Math.max(j.quantity-1,1)})),R=async()=>{if(!t)return;if(!r.variantId){i(k==="uk"?"Будь ласка, оберіть варіант":"Please select a variant");return}if(!r.size){i(k==="uk"?"Будь ласка, оберіть розмір.":"Please select a size.");return}const j=t.variants.find(N=>N.id===r.variantId&&N.sizes.includes(r.size));if(!j){i(k==="uk"?"Обраний варіант недоступний":"Selected variant is not available");return}h(!0),i(null);try{const N=O(t.translations),M=j.priceSale&&j.priceSale<j.price?j.priceSale:j.price||t.priceSale||t.price,W={productId:t.id,name:N?.name||(k==="uk"?"Без назви":"No name"),price:M,color:j.color,size:r.size,quantity:r.quantity,image:j.images?.[0]?.url};await je.getState().addCartItem(W),g(!0),setTimeout(()=>g(!1),2e3)}catch(N){i(N instanceof Error?N.message:k==="uk"?"Помилка додавання в кошик":"Error adding to cart")}finally{h(!1)}},Z=async()=>{if(!t)return;if(!r.variantId){i(k==="uk"?"Будь ласка, оберіть варіант":"Please select a variant");return}if(!r.size){i(k==="uk"?"Будь ласка, оберіть розмір.":"Please select a size.");return}const j=t.variants.find(N=>N.id===r.variantId&&N.sizes.includes(r.size));if(!j){i(k==="uk"?"Обраний варіант недоступний":"Selected variant is not available");return}h(!0),i(null);try{const N=O(t.translations),M=j.priceSale&&j.priceSale<j.price?j.priceSale:j.price||t.priceSale||t.price,W={productId:t.id,name:N?.name||(k==="uk"?"Без назви":"No name"),price:M,color:j.color,size:r.size,quantity:r.quantity,image:j.images?.[0]?.url};await je.getState().addCartItem(W),window.location.href="/checkout"}catch(N){i(N instanceof Error?N.message:k==="uk"?"Помилка додавання в кошик":"Error adding to cart")}finally{h(!1)}};if(o)return e.jsx("div",{className:C.loading,children:k==="uk"?"Завантаження...":"Loading..."});if(m)return e.jsxs("div",{className:C.error,children:[k==="uk"?"Помилка":"Error",": ",m]});if(!t)return e.jsx("div",{className:C.noProduct,children:k==="uk"?"Продукт не знайдено":"Product not found"});const ne=O(t.translations),te=S(),B=t.variants.find(j=>j.id===r.variantId),Re=B?.sizes||[],He=A[y],Fe=B?.priceSale&&B.priceSale<B.price?B.priceSale:B?.price||t.priceSale||t.price,Us=Fe*r.quantity;function zs(j){return Object.values(es).includes(j)}const Ms=j=>({key:j.id,displayName:j.description||j.color,color:zs(j.color)?Ls[j.color]:"#cccccc",isOutOfStock:j.stock===0});return e.jsxs("div",{className:C.product,children:[e.jsxs("div",{className:C.images,children:[e.jsx("div",{className:C.mainImageContainer,children:He?e.jsx("img",{src:He.url,alt:He.altText||ne?.name||"Product image",className:C.mainImage}):e.jsx("div",{className:C.noImage,children:P("noImage")})}),A.length>0&&e.jsx("div",{className:C.thumbnailContainer,children:A.map((j,N)=>e.jsx("div",{className:`${C.thumbnail} ${N===y?C.activeThumbnail:""}`,onClick:()=>v(N),children:e.jsx("img",{src:j.url,alt:j.altText||`Image ${N+1}`,className:C.thumbnailImage})},`${j.variantId}-${j.url}-${N}`))})]}),e.jsxs("div",{className:C.info,children:[e.jsx($,{onClick:Z,className:C.buyNowBtn,children:P("buyNow")}),e.jsx("h1",{className:C.title,children:ne?.name||(k==="uk"?"Без назви":"No name")}),ne?.description&&e.jsx("p",{className:C.description,children:ne.description}),e.jsx("div",{className:C.nameBlock,children:e.jsx("div",{className:C.priceWrapper,children:B?.description})}),e.jsx("div",{className:C.priceWrapper,children:e.jsx("span",{className:+t.price>+Fe.toFixed(2)?C.priceOriginal:C.price,children:B&&B.price?"₴ "+B.price.toFixed(2):"₴ "+t.price})}),+t.price>+Fe.toFixed(2)&&e.jsx("div",{className:C.priceWrapper,children:e.jsxs("span",{className:C.priceSale,children:["₴",Fe.toFixed(2)]})}),e.jsxs("div",{className:C.productForm,children:[te.length>0&&e.jsxs("div",{className:C.formGroup,children:[e.jsx("h4",{children:P("variant")}),e.jsx("div",{className:C.colorOptions,children:te.map(j=>{const N=Ms(j);return e.jsxs("div",{className:C.colorOptionWrapper,children:[e.jsx($,{className:`${C.colorOption} ${r.variantId===j.id?C.selected:""} ${N.isOutOfStock?C.outOfStock:""}`,onClick:()=>{j.id&&!N.isOutOfStock&&E(j.id)},disabled:N.isOutOfStock,style:{backgroundColor:N.color.toLowerCase(),width:"40px",height:"40px",minWidth:"40px",padding:"0",border:r.variantId===j.id?"3px solid #000":"1px solid #ccc",opacity:N.isOutOfStock?.5:1,cursor:N.isOutOfStock?"not-allowed":"pointer"}}),N.isOutOfStock&&e.jsx("span",{className:C.outOfStockLabel,children:P("outOfStock")})]},N.key)})})]}),Re.length>0&&e.jsxs("div",{className:C.formGroup,children:[e.jsx("h4",{children:P("size")}),e.jsx("div",{className:C.sizeOptions,children:Re.map(j=>e.jsx($,{className:`${C.sizeOption} ${r.size===j?C.selected:""}`,onClick:()=>z(j),children:Ve[j]||j},j))})]}),t.features&&t.features.length>0&&e.jsxs("div",{className:C.featuresSection,children:[e.jsx("h3",{children:P("features")}),e.jsx("ul",{className:C.featuresList,children:t.features.sort((j,N)=>j.order-N.order).map(j=>e.jsxs("li",{children:[e.jsx("strong",{children:(k==="uk"?j.text:j.textEn||"").split(" ")[0]})," ",(k==="uk"?j.text:j.textEn||"").split(" ").slice(1).join(" ")]},j.order+(k==="uk"?j.text:j.textEn||"")))})]}),e.jsxs("div",{className:C.formGroup,children:[e.jsx("h4",{children:P("quantity")}),e.jsxs("div",{className:C.quantityWrapper,children:[e.jsx($,{type:"button",className:C.quantityBtn,onClick:G,disabled:r.quantity<=1,children:"−"}),e.jsx(_,{type:"number",min:"1",max:"99",value:r.quantity,onChange:b,className:C.quantityInput}),e.jsx($,{type:"button",className:C.quantityBtn,onClick:F,disabled:r.quantity>=99,children:"+"})]})]}),e.jsx("div",{className:C.totalPrice,children:e.jsxs("strong",{children:[P("totalPrice")," ₴",Us.toFixed(2)]})}),e.jsx($,{className:`${C.addToCartBtn} ${f?C.success:""}`,onClick:R,disabled:l||B?.stock===0,children:B?.stock===0?P("outOfStock"):P(l?"adding":f?"added":"addToCart")})]}),e.jsxs("div",{className:C.accordion,children:[e.jsxs("button",{className:C.accordionBtn,onClick:()=>p(!d),children:[P("delivery")," ",d?"▲":"▼"]}),d&&e.jsxs("div",{className:C.accordionContent,children:[e.jsx("ul",{children:P("deliveryInfo",{returnObjects:!0}).map((j,N)=>e.jsx("li",{children:j},N))}),e.jsxs("p",{children:[P("deliveryNote")," ",e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:"Instagram"})]})]})]})]})]})};function Zc(){const s=We(),[t,a]=u.useState(null),[r,n]=u.useState(null);if(u.useEffect(()=>{a(s.id||null)},[s.id]),u.useEffect(()=>{if(!t)return;const i=setInterval(()=>{const l=document.querySelector('link[rel="canonical"]');l&&l.setAttribute("href",`https://fbe.pp.ua/product/${t}/`)},200);return setTimeout(()=>clearInterval(i),2e3),()=>clearInterval(i)},[t]),u.useEffect(()=>{t&&fetch(`https://fbe.onrender.com/products/${t}/`).then(m=>m.json()).then(m=>n(m)).catch(console.error)},[t]),u.useEffect(()=>{if(!r)return;const i=setInterval(()=>{document.title=`${r.translations[0].name} - FULL BODY ERA - FBE`},200);return setTimeout(()=>clearInterval(i),2e3),()=>clearInterval(i)},[r]),!t)return e.jsx("div",{children:"Продукт не знайдено"});if(!r)return e.jsx("div",{children:"Завантаження продукту..."});const o=()=>{const m=r.variants?.[0]?.images||[],i=m.find(l=>l.order==1);return i?i.url:m[0]?.url||"https://res.cloudinary.com/divhalkcr/image/upload/v1757010788/3_r61yy0.jpg"},c={"@context":"https://schema.org/","@type":"Product",name:r.translations[0].name,image:[o()],description:r.translations[0].description||"",sku:`${r.id}`,offers:{"@type":"Offer",url:`https://fbe.pp.ua/product/${r.id}`,priceCurrency:"UAH",price:r.price?String(r.price):"0",availability:"https://schema.org/InStock"},brand:{"@type":"Brand",name:" FBE - FULL BODY ERA"}};return e.jsxs(e.Fragment,{children:[e.jsxs(Js,{children:[e.jsx("meta",{name:"description",content:r.translations[0].description?.slice(0,150)}),e.jsx("link",{rel:"canonical",href:`https://fbe.pp.ua/product/${t}/`}),e.jsx("meta",{property:"og:type",content:"product"}),e.jsx("meta",{property:"og:title",content:`${r.translations[0].name} - FULL BODY ERA`}),e.jsx("meta",{property:"og:description",content:r.translations[0].description?.slice(0,150)}),e.jsx("meta",{property:"og:image",content:o()}),e.jsx("meta",{property:"og:url",content:`https://fbe.pp.ua/product/${t}`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:`${r.translations[0].name} - FULL BODY ERA`}),e.jsx("meta",{name:"twitter:description",content:r.translations[0].description?.slice(0,150)}),e.jsx("meta",{name:"twitter:image",content:o()}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(c)})]}),e.jsx("div",{className:D.page,children:e.jsx(Qc,{productId:t})})]})}const ei="_form_ri903_1",si="_title_ri903_13",ti="_field_ri903_20",ai="_error_ri903_41",ie={form:ei,title:si,field:ti,error:ai},ri={async getAll(){try{const{data:s}=await I.get("users?limit=10&skip=0");return Je.getState().setUsers(s.users),s.users}catch(s){throw new Error("Не вдалося отримати список користувачів: "+s.message)}},async getById(s){try{const{data:t}=await I.get(`users/${s}`);return t}catch(t){throw new Error("Не вдалося отримати користувача: "+t.message)}},async updateUser(s,t){try{const{data:a}=await I.patch(`users/${s}`,t);return Je.getState().updateUserInStore(a),a}catch(a){throw new Error("Не вдалося оновити користувача: "+a.message)}},async sendMessageFromContact(s){try{await I.post("telegram/message",s)}catch(t){throw new Error("Не вдалося відправити повідомлення: "+t.message)}},async deleteUser(s){try{await I.delete(`users/${s}`),Je.getState().removeUser(s)}catch(t){throw new Error("Не вдалося видалити користувача: "+t.message)}}},ni=()=>{const{register:s,handleSubmit:t,reset:a,formState:{errors:r,isSubmitting:n}}=me(),{t:o}=he(),c=async m=>{try{await ri.sendMessageFromContact(m),alert("Повідомлення успішно відправлено!"),a()}catch(i){console.error("❌ Помилка відправки",i),alert("Сталася помилка. Спробуйте пізніше.")}};return e.jsxs("form",{className:ie.form,onSubmit:t(c),children:[e.jsx("h2",{className:ie.title,children:o("contact-to-me")}),e.jsxs("div",{className:ie.field,children:[e.jsx(_,{type:"text",label:o("name"),...s("name",{required:"Ім’я обов’язкове"})}),r.name&&e.jsx("span",{className:ie.error,children:r.name.message})]}),e.jsxs("div",{className:ie.field,children:[e.jsx(_,{type:"email",label:"Email",...s("email",{required:"Email обов’язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),r.email&&e.jsx("span",{className:ie.error,children:r.email.message})]}),e.jsxs("div",{className:ie.field,children:[e.jsx("label",{children:o("message")}),e.jsx("textarea",{rows:4,...s("message",{required:"Повідомлення обов’язкове"})}),r.message&&e.jsx("span",{className:ie.error,children:r.message.message})]}),e.jsx($,{type:"submit",disabled:n,children:o(n?"sending":"send")})]})},oi=()=>e.jsx("div",{className:"page",children:e.jsx(ni,{})}),ci=()=>{const{register:s,handleSubmit:t,formState:{errors:a}}=me(),[r,n]=u.useState(null),[o,c]=u.useState(null),m=async i=>{if(i.newPassword!==i.confirmPassword){n("Новий пароль і підтвердження не збігаються");return}try{await pe.changePassword(i.currentPassword,i.newPassword),c("Пароль успішно змінено "),n(null)}catch(l){n(l.message||"Помилка при зміні пароля"),c(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Зміна пароля"}),e.jsxs("form",{onSubmit:t(m),className:"form",children:[e.jsx(_,{type:"password",placeholder:"Поточний пароль",...s("currentPassword",{required:"Поточний пароль обов'язковий"})}),a.currentPassword&&e.jsx("p",{className:"error",children:a.currentPassword.message}),e.jsx(_,{type:"password",placeholder:"Новий пароль",...s("newPassword",{required:"Новий пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),a.newPassword&&e.jsx("p",{className:"error",children:a.newPassword.message}),e.jsx(_,{type:"password",placeholder:"Підтвердження нового пароля",...s("confirmPassword",{required:"Підтвердження пароля обов'язкове"})}),a.confirmPassword&&e.jsx("p",{className:"text-error-600",children:a.confirmPassword.message}),r&&e.jsx("p",{className:"error",children:r}),o&&e.jsx("p",{className:"green",children:o}),e.jsx($,{type:"submit",children:"Змінити пароль"})]})]})},ii=ce((s,t)=>({orders:[],loading:!1,error:null,setOrders:a=>s({orders:a}),fetchOrders:async(a=!1,r,n=1,o=10)=>{s({loading:!0,error:null});try{const c=await De.getOrders(a,r,n,o);s({orders:c,loading:!1})}catch(c){s({error:c.message||"Помилка завантаження замовлень",loading:!1})}},updateOrderStatus:async(a,r)=>{s({loading:!0,error:null});try{const n=await De.updateOrderStatus(a,r),o=t().orders.map(c=>c.id===a?{...c,status:n.status}:c);s({orders:o,loading:!1})}catch(n){s({error:n.message||"Помилка оновлення статусу замовлення",loading:!1})}}}));var rs=(s=>(s.ADMIN="ADMIN",s.USER="USER",s.CUSTOMER="CUSTOMER",s))(rs||{}),Ne=(s=>(s.PENDING="PENDING",s.PROCESSING="PROCESSING",s.COMPLETED="COMPLETED",s.CANCELED="CANCELED",s))(Ne||{});const li=({trackingNumber:s,full:t=!1})=>{const[a,r]=u.useState(null),[n,o]=u.useState(!1),[c,m]=u.useState(null);return u.useEffect(()=>{if(!s)return;(async()=>{try{o(!0),m(null);const l=await ze.getTracking(s);r(l)}catch(l){m(l.message||"Не вдалося завантажити інформацію")}finally{o(!1)}})()},[s]),s?n?e.jsx("p",{children:"Завантаження інформації..."}):c?e.jsxs("p",{className:"error",children:["Помилка: ",c]}):a?e.jsxs("div",{className:"tracking-info",children:[e.jsx("h4",{children:"Інформація про відправлення"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Номер ТТН:"})," ",a.Number]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Статус:"})," ",a.Status]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Дата створення:"})," ",a.DateCreated]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Місто отримувача:"})," ",a.CityRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Відділення отримувача:"})," ",a.WarehouseRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Оголошена вартість:"})," ",a.DocumentCost," ₴"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Вага:"})," ",a.FactualWeight," кг"]}),a.ScheduledDeliveryDate&&e.jsxs("li",{children:[e.jsx("strong",{children:"Планова дата доставки:"})," ",a.ScheduledDeliveryDate]})]}),t&&e.jsxs("div",{className:"tracking-details",children:[e.jsx("h5",{children:"Детальна інформація:"}),e.jsx("table",{children:e.jsx("tbody",{children:Object.entries(a).map(([i,l])=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:i})}),e.jsx("td",{children:String(l)})]},i))})})]})]}):e.jsx("p",{children:"Інформація відсутня"}):e.jsx("p",{children:"Номер посилки відсутній"})},ps={[Ne.PENDING]:"Очікує обробки",[Ne.PROCESSING]:"В обробці",[Ne.COMPLETED]:"Виконано",[Ne.CANCELED]:"Скасовано"},di=({order:s,isAdmin:t,updatingOrderId:a,onStatusChange:r})=>{const n=Object.values(Ne).map(i=>({value:i,label:ps[i]})),[o,c]=u.useState(s.trackingNumber||""),m=()=>{o&&De.updateOrderItemTracking(s.id,o)};return e.jsxs("li",{className:"order-item",children:[e.jsxs("div",{className:"order-header-section",children:[e.jsxs("h3",{children:["Замовлення #",s.id," —"," ",new Date(s.createdAt).toLocaleDateString("uk-UA")]}),e.jsxs("div",{className:"order-status-section",children:[t?e.jsx(Me,{options:n,value:s.status,onChange:i=>r(s.id,i),disabled:a===s.id}):e.jsx("span",{className:`status-badge status-${s.status.toLowerCase()}`,children:ps[s.status]}),a===s.id&&e.jsx("span",{className:"updating-status",children:"Оновлюється..."})]})]}),e.jsxs("p",{className:"order-details",children:[s.guestName&&e.jsxs(e.Fragment,{children:["Ім'я: ",s.guestName]}),s.guestPhone&&e.jsxs(e.Fragment,{children:[", Телефон: ",s.guestPhone]}),s.guestEmail&&e.jsxs(e.Fragment,{children:[", Email: ",s.guestEmail]})]}),s.novaPostCity&&s.novaPostBranch&&e.jsxs("p",{children:["Доставка: Нова Пошта, ",s.novaPostCity,", Відділення №",s.novaPostBranch]}),e.jsxs("p",{children:["Оплата:"," ",s.paymentMethod==="COD"?"Накладений платіж":s.paymentMethod]}),e.jsxs("div",{className:"order-tracking-section",children:[t?e.jsxs("div",{className:"tracking-field",children:[e.jsx("input",{type:"text",placeholder:"Номер посилки",value:o,onChange:i=>c(i.target.value)}),e.jsx("button",{type:"button",onClick:m,children:"Зберегти"})]}):s.trackingNumber&&e.jsxs("p",{children:["Номер посилки: ",s.trackingNumber]}),s.trackingNumber&&e.jsxs("div",{className:"tracking-popover-wrapper",children:[e.jsxs("div",{className:"tracking-trigger",children:["Номер посилки: ",s.trackingNumber]}),e.jsx("div",{className:"tracking-popover",children:e.jsx(li,{trackingNumber:s.trackingNumber})})]})]}),e.jsx("ul",{className:"order-items",children:s.items.map(i=>e.jsxs("li",{className:"order-item-row",children:[e.jsx("img",{src:i.image||"",alt:i.name,className:"item-image"}),e.jsxs("div",{children:[e.jsx("span",{children:i.name}),i.color&&e.jsxs("span",{children:[", Колір: ",i.color]}),i.size&&e.jsxs("span",{children:[", Розмір: ",i.size]}),e.jsxs("span",{children:[", Кількість: ",i.quantity]}),e.jsxs("span",{children:[", Ціна:"," ",i.priceSale?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"price-old",children:[i.price,"₴"]})," ",e.jsxs("span",{className:"price-sale",children:[i.priceSale,"₴"]})]}):e.jsxs(e.Fragment,{children:[i.finalPrice,"₴"]})]})]})]},i.id))}),e.jsxs("p",{children:["Загальна сума:"," ",s.items.reduce((i,l)=>i+l.finalPrice*l.quantity,0),"₴"]})]})},ui=(s,t)=>{const[a,r]=u.useState(s);return u.useEffect(()=>{const n=setTimeout(()=>r(s),t);return()=>clearTimeout(n)},[s,t]),a},mi=()=>{const{user:s}=U(),{orders:t,loading:a,fetchOrders:r,updateOrderStatus:n,error:o}=ii(),[c,m]=u.useState(""),[i,l]=u.useState(""),[h,f]=u.useState(""),[g,d]=u.useState(1),p=10,[y,w]=u.useState(null),P=u.useRef(null),k=u.useRef(null),O=u.useRef(null),S=u.useRef(null),L=u.useRef(null),[A,v]=u.useState(null),[E,z]=u.useState(0),b=s?.role===rs.ADMIN,F=ui(c,1e3),G=()=>{const B=document.activeElement;B===P.current?v("orderId"):B===k.current?v("dateFrom"):B===O.current?v("dateTo"):B===S.current?v("filterButton"):B===L.current?v("clearButton"):v(null)},R=u.useCallback(()=>{A&&setTimeout(()=>{switch(A){case"orderId":P.current?.focus(),P.current?.setSelectionRange(E,E);break;case"dateFrom":k.current?.focus();break;case"dateTo":O.current?.focus();break;case"filterButton":S.current?.focus();break;case"clearButton":L.current?.focus();break}v(null)},50)},[A,E]),Z=u.useCallback(()=>{if(!s)return;G();const B={orderId:F?+F:void 0,dateFrom:i||void 0,dateTo:h||void 0};r(b,B,g,p)},[s,F,i,h,g,p,r,b]);u.useEffect(()=>Z(),[Z]),u.useEffect(()=>{a||R()},[a,R]);const ne=async(B,Re)=>{try{w(B),await n(B,Re)}finally{w(null)}},te=()=>{v("clearButton"),m(""),l(""),f(""),d(1)};return e.jsxs("div",{className:"orders-container",children:[e.jsx("h1",{children:b?"Всі замовлення":"Мої замовлення"}),o&&e.jsx("div",{className:"error-message",children:o}),e.jsxs("div",{className:"filters  boxLine",children:[e.jsx(_,{ref:P,type:"number",label:"Номер замовлення",placeholder:"Номер замовлення",value:c,onChange:B=>{z(B.target.selectionStart||0),m(B.target.value)},onFocus:()=>v("orderId")}),e.jsx(_,{ref:k,type:"date",label:"Дата від",value:i,onChange:B=>l(B.target.value),onFocus:()=>v("dateFrom")}),e.jsx(_,{ref:O,type:"date",label:"Дата до",value:h,onChange:B=>f(B.target.value),onFocus:()=>v("dateTo")}),e.jsxs("div",{className:"boxLine",children:[e.jsx($,{ref:S,onClick:Z,variant:"link",children:"Фільтрувати"}),e.jsx($,{ref:L,onClick:te,variant:"secondary",children:"Очистити"})]})]}),F!==c&&e.jsxs("div",{className:"search-indicator",children:["Пошук замовлення #",c,"..."]}),e.jsx("ul",{className:"orders-list",children:t.length?t.map(B=>e.jsx(di,{order:B,isAdmin:b,updatingOrderId:y,onStatusChange:ne},B.id)):e.jsx("li",{children:"Немає замовлень"})}),e.jsxs("div",{className:"pagination",children:[e.jsx($,{onClick:()=>d(B=>Math.max(B-1,1)),disabled:g===1,variant:"link",children:"Попередня"}),e.jsxs("span",{children:["Сторінка ",g]}),e.jsx($,{onClick:()=>d(B=>B+1),disabled:t.length<p,variant:"link",children:"Наступна"})]}),a&&!y&&e.jsx("div",{className:"loading",children:"Завантаження..."})]})},hi=()=>e.jsx("div",{className:"page",children:e.jsx(mi,{})}),pi=[{path:"/login",element:e.jsx(fo,{})},{path:"/register",element:e.jsx(To,{})},{path:"/forgot-password",element:e.jsx(Nn,{})},{path:"/reset-password",element:e.jsx(In,{})},{path:"/change-password",element:e.jsx(ci,{})},{path:"/about",element:e.jsx($o,{})},{path:"/contact",element:e.jsx(oi,{})},{path:"/privacy",element:e.jsx(mc,{})},{path:"/product/:id",element:e.jsx(Zc,{})},{path:"/category/:categorySlug",element:e.jsx(oc,{})},{path:"/group/:collectionSlug",element:e.jsx(cc,{})},{path:"/cart",element:e.jsx(ac,{})},{path:"/checkout",element:e.jsx(Qn,{})},{path:"/delivery-terms",element:e.jsx(ls,{})},{path:"/return-policy",element:e.jsx(ls,{})}],gi=[{path:"/",element:e.jsx(us,{})},{path:"/home",element:e.jsx(us,{})}],xi=[{path:"/profile",element:e.jsx(xo,{})},{path:"/orders",element:e.jsx(hi,{})},{path:"/admin",element:e.jsx(Wo,{}),children:[{index:!0,element:e.jsx(cs,{})},{path:"createproduct",element:e.jsx(Fa,{})},{path:"edit-product/:id",element:e.jsx(bn,{})},{path:"create-category",element:e.jsx(na,{})},{path:"create-collection",element:e.jsx(oa,{})},{path:"dashboard",element:e.jsx(cs,{})}]}],gs={path:"*",element:e.jsx(jo,{})},fi="_footer_3cdk6_2",ji="_container_3cdk6_11",yi="_menu_3cdk6_18",_i="_social_3cdk6_48",vi="_copy_3cdk6_61",bi="_mail_3cdk6_67",ve={footer:fi,container:ji,menu:yi,social:_i,copy:vi,mail:bi},Ni=()=>(u.useEffect(()=>{const s=document.createElement("script");return s.src="https://apis.google.com/js/platform.js?onload=renderBadge",s.async=!0,s.defer=!0,document.body.appendChild(s),window.renderBadge=()=>{const t=document.createElement("div");t.id="google-rating-badge",document.body.appendChild(t),window.gapi&&window.gapi.load("ratingbadge",function(){window.gapi.ratingbadge.render(t,{merchant_id:5655937585})})},()=>{document.body.removeChild(s);const t=document.getElementById("google-rating-badge");t&&document.body.removeChild(t)}},[]),null),Si=[{title:"About",url:"/about"},{title:"Contact",url:"/contact"},{title:"Privacy",url:"/privacy"},{title:"ReturnPolicy",url:"/return-policy"}],Rs=()=>e.jsx("footer",{className:ve.footer,children:e.jsxs("div",{className:ve.container,children:[e.jsx("div",{className:ve.menu,children:e.jsx("ul",{children:Si.map(s=>e.jsx("li",{children:e.jsx(V,{to:s.url,children:s.title})},s.title))})}),e.jsx("div",{className:ve.social,children:e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:e.jsx(Ks,{})})}),e.jsxs("div",{className:ve.copy,children:["© ",new Date().getFullYear()," ",e.jsx("a",{href:"mailto:office.fly.app@gmail.com",className:ve.mail,children:"FlyApp"})," ","Всі права захищені."]}),e.jsx(Ni,{})]})}),ki="_headerMenu_10icq_3",wi="_menuList_10icq_25",Ci="_menuListOpen_10icq_51",$i="_menuItem_10icq_67",Ii="_menuLink_10icq_92",Pi="_submenu_10icq_117",Ei="_submenuItem_10icq_145",Li="_arrow_10icq_168",Bi="_open_10icq_177",Ti="_burger_10icq_187",Oi="_block_10icq_224",H={headerMenu:ki,menuList:wi,menuListOpen:Ci,menuItem:$i,menuLink:Ii,submenu:Pi,submenuItem:Ei,arrow:Li,open:Bi,burger:Ti,block:Oi},Ai="_subsubmenu_q82db_1",Ri="_open_q82db_15",Fi="_submenuItem_q82db_19",qi="_categoryContainer_q82db_25",Ui="_categoryLink_q82db_39",zi="_spacer_q82db_54",le={subsubmenu:Ai,open:Ri,submenuItem:Fi,categoryContainer:qi,categoryLink:Ui,spacer:zi},Mi=({categories:s})=>{const[t,a]=u.useState(new Set),r=typeof window<"u"&&window.innerWidth<768,n=i=>{a(l=>{const h=new Set(l);return h.has(i)?h.delete(i):h.add(i),h})},o=i=>{r||a(l=>new Set(l).add(i))},c=i=>{r||a(l=>{const h=new Set(l);return h.delete(i),h})},m=(i=null)=>{const l=s.filter(h=>i===null?!h.parentId:h.parentId===i);return l.length?e.jsx("ul",{className:`${i===null?le.submenu:le.subsubmenu} ${i!==null&&t.has(i)?le.open:""}`,children:l.map(h=>{const f=s.some(d=>d.parentId===h.id),g=t.has(h.id);return e.jsxs("li",{className:le.submenuItem,onMouseEnter:f?()=>o(h.id):void 0,onMouseLeave:f?()=>c(h.id):void 0,children:[e.jsxs("div",{className:le.categoryContainer,onClick:r&&f?()=>n(h.id):void 0,children:[e.jsx("a",{href:`/category/${h.slug}`,className:le.categoryLink,children:h.name}),f?e.jsx("span",{className:le.iconContainer,children:g?e.jsx(vs,{size:16}):e.jsx(bs,{size:16})}):e.jsx("span",{className:le.spacer})]}),f&&g&&m(h.id)]},h.id)})}):null};return e.jsx(e.Fragment,{children:m()})},Di=({collections:s})=>e.jsx(e.Fragment,{children:s.map(t=>e.jsx("li",{className:H.submenuItem,children:e.jsx("a",{href:`/group/${t.slug||t.id}`,className:H.submenuLink,children:t.name})},t.id))});function Fs(s){const[t,a]=u.useState(()=>typeof window<"u"?window.matchMedia(s).matches:!1);return u.useEffect(()=>{const r=window.matchMedia(s),n=o=>a(o.matches);return r.addEventListener("change",n),()=>r.removeEventListener("change",n)},[s]),t}const Wi="_switcher_2c75z_1",Gi="_uk_2c75z_21",Vi="_en_2c75z_24",Hi="_hidden_2c75z_27",Ee={switcher:Wi,"lang-btn":"_lang-btn_2c75z_6",uk:Gi,en:Vi,hidden:Hi},Ji=()=>{const s=Oe(c=>c.lang),t=Oe(c=>c.setLang),[a,r]=u.useState(!1),n=s==="uk"?"en":"uk",o=()=>{t(n),r(!1)};return e.jsxs("div",{className:Ee.switcher,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e.jsx("button",{className:`${Ee["lang-btn"]} ${Ee[s]}`,children:s.toUpperCase()}),e.jsx("button",{className:`${Ee["lang-btn"]} ${Ee[n]}`,onClick:o,style:{opacity:a?1:0,pointerEvents:a?"auto":"none",transform:a?"translateX(0)":"translateX(-10px)"},children:n.toUpperCase()})]})},Ki=({textColor:s})=>{const[t,a]=u.useState(null),[r,n]=u.useState(!1),[o,c]=u.useState(null),{categories:m,fetchCategories:i}=Ae(),{collections:l,fetchCollections:h}=Ze(),{user:f}=U(),{t:g}=he(),d=Oe(L=>L.lang);u.useEffect(()=>{i(),h()},[i,h]);const p=u.useMemo(()=>[{label:g("home"),link:"/"},{label:g("shop"),submenu:!0},{label:g("about"),link:"/about"},{label:g("contact"),link:"/contact"},...f?.role===rs.ADMIN?[{label:"Адмінка",link:"/admin"}]:[]],[f,d,g]),y=()=>{n(!r),c(null)},w=L=>{c(o===L?null:L)},P={color:s,transition:"color 0.3s ease",backgroundColor:"transparent"},k={borderColor:`transparent ${s} ${s} transparent`,transition:"border-color 0.3s ease"},O={backgroundColor:s,transition:"background-color 0.3s ease"},S=Fs("(max-width: 950px)");return e.jsxs("nav",{className:H.headerMenu,children:[e.jsx(Ji,{}),S&&e.jsxs($,{className:`${H.burger} ${r?H.open:""}`,onClick:y,"aria-label":"Toggle menu",style:P,children:[e.jsx("span",{style:O}),e.jsx("span",{style:O}),e.jsx("span",{style:O})]}),e.jsx("ul",{className:`${H.menuList} ${r?H.menuListOpen:""}`,children:p.map((L,A)=>e.jsx("li",{className:H.menuItem,onMouseEnter:()=>!r&&a(A),onMouseLeave:()=>!r&&a(null),children:L.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>w(A),"aria-expanded":o===A,style:P,children:[L.label,e.jsx("span",{className:`${H.arrow} ${o===A?H.open:""}`,style:k})]}),(t===A||o===A)&&e.jsxs("ul",{className:H.submenu,children:[e.jsxs("div",{className:H.block,children:[e.jsx("li",{className:"submenuTitle",children:g("categories")}),e.jsx(Mi,{categories:m})]}),e.jsxs("div",{className:H.block,children:[e.jsx("li",{className:"submenuTitle",children:g("collections")}),e.jsx(Di,{collections:l})]})]})]}):e.jsx("a",{href:L.link,className:H.menuLink,style:P,children:L.label})},A))})]})},Xi="_header_1vrs6_3",Yi="_logo_1vrs6_38",Qi="_main_1vrs6_65",Zi="_sub_1vrs6_77",el="_authBlock_1vrs6_107",sl="_authBlockUser_1vrs6_137",tl="_userName_1vrs6_147",al="_shoppingCart_1vrs6_274",rl="_profileMenu_1vrs6_285",nl="_dropdown_1vrs6_290",ol="_logoutBtn_1vrs6_305",se={header:Xi,logo:Yi,main:Qi,sub:Zi,authBlock:el,authBlockUser:sl,userName:tl,shoppingCart:al,profileMenu:rl,dropdown:nl,logoutBtn:ol},qs=()=>{const{logout:s,accessToken:t,user:a}=U(),{theme:r}=Is(),[n,o]=u.useState("#333333"),c=u.useRef(null),[m,i]=u.useState(!1),{cart:l,fetchCart:h}=je(),f=Fs("(max-width: 950px)");return u.useEffect(()=>{(!m||a&&!l.length)&&(h(),i(!0))},[a?.id]),u.useEffect(()=>{t||i(!1)},[t]),u.useEffect(()=>{const g=()=>{const P=document.querySelectorAll("[data-bg]"),k=c.current?.getBoundingClientRect();if(!k)return;let O=r==="dark";P.forEach(S=>{const L=S.getBoundingClientRect();if(L.top<k.bottom&&L.bottom>k.top){const A=S.getAttribute("data-bg");A==="dark"?O=!0:A==="light"&&(O=!1)}}),o(O?"#ffffff":"#333333")},d=new IntersectionObserver(P=>{P.forEach(k=>{k.isIntersecting&&g()})},{rootMargin:"0px 0px -80% 0px"});document.querySelectorAll("section, .hero, .section, main > div, [data-section]").forEach(P=>d.observe(P)),g();let y;const w=()=>{clearTimeout(y),y=window.setTimeout(g,100)};return window.addEventListener("scroll",w),()=>{d.disconnect(),clearTimeout(y),window.removeEventListener("scroll",w)}},[r]),e.jsxs("div",{ref:c,className:se.header,style:{color:n,transition:"color 0.3s ease"},children:[e.jsx(V,{to:"/home",children:e.jsxs("div",{className:se.logo,children:[e.jsx("span",{className:se.main,children:"fbe"}),e.jsx("span",{className:se.sub,children:"full body era"})]})}),e.jsx(Ki,{textColor:n}),e.jsxs("div",{className:`${se.authBlock} ${a?se.authBlockUser:""}`,children:[t?e.jsxs("div",{className:se.profileMenu,children:[e.jsx("span",{className:se.userName,style:{color:n,transition:"color 0.3s ease"},children:e.jsxs(V,{to:"/profile",className:"grey boxLine",children:[!f&&e.jsx(ns,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.3rem",transition:"color 0.3s ease"}}),(a?.first_name?.[0]??"").toUpperCase(),(a?.last_name?.[0]??"").toUpperCase()]})}),e.jsx("div",{className:se.dropdown,children:e.jsx("button",{className:se.logoutBtn,onClick:s,style:{color:n,border:"none",cursor:"pointer"},children:"Logout"})})]}):e.jsx(V,{to:"/login",children:e.jsx(ns,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease"}})}),e.jsxs(V,{to:"/cart",className:se.shoppingCart,children:[e.jsx(Xs,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease",marginLeft:"10px"}}),e.jsx("span",{children:l&&l.length>0?l.length:""})]})]})]})},cl="_dark_1eti1_1",il="_darkContent_1eti1_11",ll="_title_1eti1_20",dl="_description_1eti1_25",ul="_headerTop_1eti1_46",ml="_layout_1eti1_68",hl="_content_1eti1_106",pl="_contentSection_1eti1_115",Y={dark:cl,darkContent:il,title:ll,description:dl,headerTop:ul,layout:ml,content:hl,contentSection:pl};function gl({children:s}){const{t}=he();return e.jsxs("div",{className:Y.layout,children:[e.jsx(qs,{}),e.jsxs("main",{className:Y.content,children:[e.jsx("section",{"data-bg":"dark",className:`hero-section ${Y.headerSection}`,children:e.jsx("div",{className:Y.dark,children:e.jsxs("div",{className:Y.darkContent,children:[e.jsx("h1",{className:Y.title,children:"FULL BODY ERA"}),e.jsx("p",{className:Y.description,children:t("whoplay")})]})})}),e.jsx("section",{"data-bg":"light",className:`content-section ${Y.contentSection}`,children:s})]}),e.jsx(Rs,{})]})}function xs({children:s}){const{t}=he();return e.jsxs("div",{className:Y.layout,children:[e.jsxs("section",{"data-bg":"light",className:`content-section ${Y.contentSection} `,children:[e.jsxs("ul",{className:Y.headerTop,children:[e.jsx("li",{children:t("fast-delivery")}),e.jsx("li",{children:t("free-delivery")}),e.jsx("li",{children:t("change-return")})]}),e.jsx(qs,{})]}),e.jsx("section",{"data-bg":"light",className:`content-section ${Y.contentSection}`,children:e.jsx("main",{className:Y.content,children:s})}),e.jsx(Rs,{})]})}function xl(){const{theme:s}=Is(),{accessToken:t}=U();return e.jsx("div",{className:`${s}`,children:e.jsxs(Ys,{children:[gi.map(({path:a,element:r})=>e.jsx(ke,{path:a,element:e.jsx(gl,{children:r})},a)),pi.map(({path:a,element:r})=>e.jsx(ke,{path:a,element:e.jsx(xs,{children:r})},a)),xi.map(({path:a,element:r,children:n})=>e.jsx(ke,{path:a,element:t?e.jsx(xs,{children:r}):e.jsx(Qs,{to:"/login",replace:!0}),children:n&&n.map(o=>e.jsx(ke,{index:o.index,path:o.path,element:o.element},o.path||"index"))},a)),e.jsx(ke,{path:gs.path,element:gs.element})]})})}Zs.createRoot(document.getElementById("root")).render(e.jsx(Se.StrictMode,{children:e.jsx(et,{basename:"/",children:e.jsx(xl,{})})}));
