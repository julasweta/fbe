import{c as ce,R as Ne,j as e,r as m,P as fs,F as js,S as _s,X as ys,C as bs,a as vs,b as Xe,d as Ns,T as Ss,u as ue,e as me,i as Gs,L as H,f as Se,h as Ge,k as Vs,l as ke,m as ks,n as ws,O as Hs,H as Js,o as Ks,p as os,q as Xs,s as Ys,t as Ce,N as Qs,v as Zs,B as et}from"./react-vendor-CzngjZU8.js";import{i as st,j as Cs,k as Qe,N as $s,E as tt}from"./vendor-DdMLshvE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const Is=ce(s=>({theme:localStorage.getItem("theme")||"light",toggleTheme:()=>s(t=>{const r=t.theme==="light"?"dark":"light";return localStorage.setItem("theme",r),{theme:r}}),setTheme:t=>s(()=>(localStorage.setItem("theme",t),{theme:t}))})),cs=localStorage.getItem("user"),rt=cs?JSON.parse(cs):null,U=ce(s=>({accessToken:localStorage.getItem("accessToken")||null,refreshToken:localStorage.getItem("refreshToken")||null,user:rt,login:(t,r,a)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),localStorage.setItem("user",JSON.stringify(a)),s({accessToken:t,refreshToken:r,user:a})},setUser:t=>{t?localStorage.setItem("user",JSON.stringify(t)):localStorage.removeItem("user"),s({user:t})},setTokens:(t,r)=>{localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),s({accessToken:t,refreshToken:r})},logout:()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("cart"),s({accessToken:null,refreshToken:null,user:null})},forgotPassword:t=>{he.forgotPassword(t)}})),Je=ce(s=>({users:[],setUsers:t=>s({users:t}),updateUserInStore:t=>s(r=>({users:r.users.map(a=>a.id===t.id?t:a)})),removeUser:t=>s(r=>({users:r.users.filter(a=>a.id!==t)}))})),de={async getAll(s){const{data:t}=await P.get(`products?limit=${s?.limit}&skip=${s?.skip}&category=${s?.categorySlug}&collection=${s?.collectionSlug}`);return t.data},async getById(s){const{data:t}=await P.get(`products/${s}`);return t},async getProductById(s){return this.getById(s)},async addProduct(s){const{data:t}=await P.post("products",s);return t},async updateProduct(s,t){console.log("ProductService: Updating product:",s,t);const{data:r}=await P.patch(`products/${s}`,t);return r},async deleteProduct(s){console.log("ProductService: Deleting product:",s),await P.delete(`products/${s}`)}},Ve=ce(s=>({products:[],isLoading:!1,error:null,setProducts:t=>s({products:t,error:null}),addProduct:t=>s(r=>({products:[...r.products,t],error:null})),updateProduct:t=>s(r=>({products:r.products.map(a=>a.id===t.id?t:a),error:null})),removeProduct:t=>s(r=>({products:r.products.filter(a=>a.id!==t),error:null})),setLoading:t=>s({isLoading:t}),setError:t=>s({error:t,isLoading:!1}),fetchProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping fetchProducts on server"),s({isLoading:!1,error:null,products:[]});return}s({isLoading:!0,error:null});try{const r=await de.getAll(t);s({products:r,isLoading:!1})}catch(r){console.error("❌ Error fetching products:",r),s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1})}},appendProducts:async t=>{if(typeof window>"u"){console.log("SSR: Skipping appendProducts on server");return}s({isLoading:!0,error:null});try{const r=await de.getAll(t);s(a=>({products:[...a.products,...r],isLoading:!1}))}catch(r){s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1})}},createProduct:async t=>{if(typeof window>"u")throw new Error("createProduct can only be called on client side");s({isLoading:!0,error:null});try{const r=await de.addProduct(t);s(a=>({products:[...a.products,r],isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}},editProduct:async(t,r)=>{if(typeof window>"u")throw new Error("editProduct can only be called on client side");s({isLoading:!0,error:null});try{const a=await de.updateProduct(t,r);s(n=>({products:n.products.map(o=>o.id===t?a:o),isLoading:!1}))}catch(a){throw s({error:a instanceof Error?a.message:"Unknown error",isLoading:!1}),a}},deleteProduct:async t=>{if(typeof window>"u")throw new Error("deleteProduct can only be called on client side");s({isLoading:!0,error:null});try{await de.deleteProduct(t),s(r=>({products:r.products.filter(a=>a.id!==t),isLoading:!1}))}catch(r){throw s({error:r instanceof Error?r.message:"Unknown error",isLoading:!1}),r}}})),he={register:s=>P.post("auth/register",s),async login(s){console.log("[AuthService] login() called with:",s.email);let t;try{console.log("[AuthService] Sending login request to /auth/login");const r=await P.post("auth/login",s);console.log("[AuthService] /auth/login response:",r),t=r.data}catch(r){if(console.error("[AuthService] Error during /auth/login request:",r),console.error("[AuthService] Error response:",r?.response?.data),console.error("[AuthService] Error status:",r?.response?.status),r?.response){const a=r.response.status,n=r.response.data||{};if(console.log("[AuthService] Processing error - status:",a),console.log("[AuthService] Response data:",n),a===401){let o="Неправильний email або пароль";throw typeof n=="string"?o=n:n.message&&typeof n.message=="string"?o=n.message:n.error&&typeof n.error=="string"?o=n.error:n.detail&&typeof n.detail=="string"&&(o=n.detail),console.log("[AuthService] Throwing 401 error with message:",o),new Error(o)}if(a===400){let o="Некоректні дані входу";throw typeof n=="string"?o=n:n.message&&typeof n.message=="string"?o=n.message:n.error&&typeof n.error=="string"&&(o=n.error),new Error(o)}if(n.message&&typeof n.message=="string")throw new Error(n.message);if(n.error&&typeof n.error=="string")throw new Error(n.error)}throw r instanceof Error?r:new Error("Помилка під час входу")}if(!t.accessToken||!t.refreshToken)throw console.error("[AuthService] Missing tokens in response"),new Error("Сервер не повернув токени авторизації");U.getState().setTokens(t.accessToken,t.refreshToken);try{const{data:r}=await this.me();return U.getState().login(t.accessToken,t.refreshToken,r),r}catch(r){throw console.error("[AuthService] Failed to fetch user after login:",r),U.getState().logout(),new Error("Не вдалося отримати дані користувача")}},async refresh(){const s=U.getState().refreshToken;if(!s)throw new Error("Токен оновлення відсутній");try{const{data:t}=await P.post("auth/refresh",{refresh:s});if(!t.accessToken||!t.refreshToken)throw new Error("Сервер не повернув нові токени");U.getState().setTokens(t.accessToken,t.refreshToken)}catch{throw U.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}},async me(){try{return await P.get("users/me")}catch(s){if(s?.response?.status===401)try{return await this.refresh(),await P.get("users/me")}catch{throw U.getState().logout(),new Error("Сесія закінчилася. Увійдіть знову")}throw s}},async updateUser(s,t){try{const{data:r}=await P.patch(`users/update/${t}`,s),a=U.getState();return a.accessToken&&a.refreshToken&&U.getState().login(a.accessToken,a.refreshToken,r),r}catch(r){throw new Error(r?r.response.data.error.message:"Помилка оновлення профілю")}},async logout(){const s=U.getState().refreshToken;if(s)try{await P.post("auth/logout",{refresh:s})}catch{}U.getState().logout()},async forgotPassword(s){try{await P.post("auth/forgot-password",{email:s})}catch(t){throw new Error(t instanceof Error?t.message:"Помилка оновлення")}},async resetPassword(s,t,r){const a={email:s,resetCode:t,newPassword:r};try{await P.post("auth/reset-password",a)}catch(n){throw new Error(n instanceof Error?n.message:"Помилка оновлення")}},async changePassword(s,t){const r={currentPassword:s,newPassword:t};try{await P.post("auth/change-password",r)}catch(a){throw new Error(a?a.response.data.error.message:"Помилка оновлення")}}},at="https://fbe.onrender.com",P=st.create({baseURL:at});P.interceptors.request.use(s=>{if(s.data instanceof FormData?delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json",s.headers.Accept="*/*",s.url&&!s.url.includes("auth/login")&&!s.url.includes("auth/register")&&!s.url.includes("auth/refresh")){const t=localStorage.getItem("accessToken");t&&(s.headers.Authorization=`Bearer ${t}`)}return s},s=>Promise.reject(s));let $e=!1;const Ye=[];P.interceptors.response.use(s=>s,async s=>{const t=s.config;if(s.response?.status===401&&t?.url&&!t.url.includes("auth/login")&&!t.url.includes("auth/register")&&!t.url.includes("auth/refresh")){if(!$e)if($e=!0,localStorage.getItem("refreshToken"))try{if(await he.refresh(),$e=!1,ot(),t.headers){const a=localStorage.getItem("accessToken");a&&(t.headers.Authorization=`Bearer ${a}`)}return P(t)}catch(a){return console.error("Помилка при оновленні токена:",a),U.getState().logout(),$e=!1,Promise.reject(s)}else return $e=!1,U.getState().logout(),Promise.reject(s);return new Promise((r,a)=>{nt(()=>{if(t){const n=localStorage.getItem("accessToken");n&&t.headers&&(t.headers.Authorization=`Bearer ${n}`),r(P(t))}else a(new Error("Original request is undefined"))})})}return Promise.reject(s)});const nt=s=>{Ye.push(s)},ot=()=>{for(console.log("✅ Токени успішно оновлені");Ye.length;){const s=Ye.pop();s&&s()}},Ie="/categories",Oe={async getAll(){return(await P.get(Ie)).data},async getOne(s){return(await P.get(`${Ie}/${s}`)).data},async create(s){return(await P.post(Ie,s)).data},async remove(s){await P.delete(`${Ie}/${s}`)},async update(s,t){return(await P.patch(`${Ie}/${s}`,t)).data}},Re=ce(s=>({categories:[],loading:!1,error:null,fetchCategories:async()=>{s({loading:!0,error:null});try{const t=await Oe.getAll();s({categories:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження категорій",loading:!1})}},addCategory:async t=>{try{const r=await Oe.create(t);if(!r)throw new Error("Категорія не була оновлена");return s(a=>({categories:[...a.categories,r]})),r}catch(r){throw s({error:r.message||"Помилка оновлення категорії",loading:!1}),r}},updateCategory:async(t,r)=>{try{const a=await Oe.update(t,r);if(!a)throw new Error("Категорія не була оновлена");return s(n=>({categories:n.categories.map(o=>o.id===t?a:o)})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},removeCategory:t=>s(r=>({categories:r.categories.filter(a=>a.id!==t)}))})),ct="_inputWrapper_18ahu_1",it="_radioCheckboxWrapper_18ahu_8",lt="_label_18ahu_14",dt="_required_18ahu_22",ut="_input_18ahu_1",mt="_radioCheckboxLabel_18ahu_43",ht="_disabled_18ahu_57",pt="_radioCheckboxText_18ahu_77",gt="_errorBorder_18ahu_99",xt="_errorText_18ahu_103",Y={inputWrapper:ct,radioCheckboxWrapper:it,label:lt,required:dt,input:ut,radioCheckboxLabel:mt,disabled:ht,radioCheckboxText:pt,errorBorder:gt,errorText:xt},y=Ne.forwardRef(({label:s,error:t,type:r="text",placeholder:a,disabled:n=!1,required:o=!1,id:i,name:h,...c},l)=>{const p=r==="radio",f=r==="checkbox";return e.jsxs("div",{className:`${Y.inputWrapper} ${p||f?Y.radioCheckboxWrapper:""}`,children:[p||f?e.jsxs("label",{className:`${Y.radioCheckboxLabel} ${n?Y.disabled:""}`,children:[e.jsx("input",{ref:l,className:`${Y.input} ${t?Y.errorBorder:""}`,type:r,placeholder:a,disabled:n,required:o,id:i,name:h,...c}),e.jsxs("span",{className:Y.radioCheckboxText,children:[s," ",o&&e.jsx("span",{className:Y.required,children:"*"})]})]}):e.jsxs(e.Fragment,{children:[s&&e.jsxs("label",{className:Y.label,children:[s," ",o&&e.jsx("span",{className:Y.required,children:"*"})]}),e.jsx("input",{ref:l,type:r,placeholder:a,disabled:n,required:o,id:i,name:h,className:`${Y.input} ${t?Y.errorBorder:""}`,...c})]}),t&&e.jsx("p",{className:Y.errorText,children:t})]})});y.displayName="Input";const ft="_container_1riki_1",jt="_header_1riki_10",_t="_btn_1riki_33",yt="_btnPrimary_1riki_66",bt="_btnSuccess_1riki_75",vt="_btnSecondary_1riki_84",Nt="_btnEdit_1riki_95",St="_btnDelete_1riki_106",kt="_btnSave_1riki_117",wt="_btnCancel_1riki_127",Ct="_toggleBtn_1riki_137",$t="_createForm_1riki_151",It="_formInputs_1riki_167",Pt="_inputGroup_1riki_179",Lt="_formInput_1riki_167",Et="_formActions_1riki_211",Bt="_categoriesSection_1riki_217",Tt="_sectionHeader_1riki_217",Ot="_categoryItem_1riki_246",qt="_categoryDisplay_1riki_255",At="_categoryLeft_1riki_270",Rt="_expandButton_1riki_277",Ft="_spacer_1riki_284",Ut="_categoryInfo_1riki_289",zt="_categoryIcon_1riki_296",Mt="_categoryText_1riki_301",Dt="_categoryName_1riki_307",Wt="_categorySlug_1riki_313",Gt="_parentInfo_1riki_323",Vt="_categoryActions_1riki_329",Ht="_editForm_1riki_335",Jt="_editHeader_1riki_344",Kt="_editingLabel_1riki_347",Xt="_editInputs_1riki_356",Yt="_inputWrapper_1riki_368",Qt="_editInput_1riki_356",Zt="_editActions_1riki_394",er="_children_1riki_401",sr="_emptyState_1riki_408",tr="_emptyIcon_1riki_413",rr="_loading_1riki_428",ar="_error_1riki_429",x={container:ft,header:jt,btn:_t,btnPrimary:yt,btnSuccess:bt,btnSecondary:vt,btnEdit:Nt,btnDelete:St,btnSave:kt,btnCancel:wt,toggleBtn:Ct,createForm:$t,formInputs:It,inputGroup:Pt,formInput:Lt,formActions:Et,categoriesSection:Bt,sectionHeader:Tt,categoryItem:Ot,categoryDisplay:qt,categoryLeft:At,expandButton:Rt,spacer:Ft,categoryInfo:Ut,categoryIcon:zt,categoryText:Mt,categoryName:Dt,categorySlug:Wt,parentInfo:Gt,categoryActions:Vt,editForm:Ht,editHeader:Jt,editingLabel:Kt,editInputs:Xt,inputWrapper:Yt,editInput:Qt,editActions:Zt,children:er,emptyState:sr,emptyIcon:tr,loading:rr,error:ar},nr=()=>{const{categories:s,loading:t,error:r,fetchCategories:a,addCategory:n,removeCategory:o,updateCategory:i}=Re(),[h,c]=m.useState(null),[l,p]=m.useState({}),[f,u]=m.useState({name:"",slug:"",parentId:null,imageUrl:""}),[d,g]=m.useState(!1),[_,I]=m.useState(new Set);m.useEffect(()=>{a()},[a]),m.useEffect(()=>{if(s.length>0){const v=s.map(q=>q.id);I(new Set(v))}},[s]);const w=async()=>{if(!f.name?.trim()){alert("Введіть назву категорії");return}try{const v={...f,slug:f.slug||f.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")};await n(v),u({name:"",slug:"",parentId:null,imageUrl:""}),g(!1),alert("Категорія створена")}catch(v){alert(v.message||"Помилка при створенні категорії")}},E=async v=>{const V=s.some(O=>O.parentId===v)?"Ця категорія має підкатегорії. Видалити разом з усіма підкатегоріями?":"Ви дійсно хочете видалити категорію?";if(confirm(V))try{await Oe.remove(v),o(v),I(O=>{const J=new Set(O);return J.delete(v),J})}catch(O){alert(O.message||"Помилка при видаленні категорії")}},T=v=>{c(v.id),p({name:v.name,slug:v.slug,parentId:v.parentId,imageUrl:v.imageUrl||""})},S=async()=>{if(l.name?.trim())try{if(h){const v=await Oe.update(h,{name:l.name,parentId:l.parentId,slug:l.slug,imageUrl:l.imageUrl});l.id&&i(l.id,v)}else{const v={name:l.name,parentId:l.parentId||null,slug:l.slug||l.name.toLowerCase().replace(/\s+/g,"-"),imageUrl:l.imageUrl||""};n(v)}c(null),p({})}catch(v){alert(v.message||"Помилка при збереженні категорії")}},C=()=>{c(null),p({})},R=v=>{I(q=>{const V=new Set(q);return V.has(v)?V.delete(v):V.add(v),V})},b=v=>s.some(q=>q.parentId===v),L=v=>{if(!v)return"Коренева категорія";const q=s.find(V=>V.id===v);return q?q.name:"Невідома категорія"},z=(v=null,q=0)=>{const V=s.filter(O=>O.parentId===v);return V.length?V.map(O=>{const J=_.has(O.id),pe=b(O.id);return e.jsx("div",{className:x.categoryItem,style:{marginLeft:`${q*20}px`},children:h===O.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування категорії:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва категорії"}),e.jsx(y,{value:l.name||"",onChange:M=>p({...l,name:M.target.value})})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(y,{value:l.slug||"",onChange:M=>p({...l,slug:M.target.value}),required:!0,placeholder:"Введіть slug"})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(y,{value:l.imageUrl||"",onChange:M=>p({...l,imageUrl:M.target.value})})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:S,className:x.btn,children:[e.jsx(_s,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:C,className:x.btn,children:[e.jsx(ys,{size:16})," Скасувати"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x.categoryDisplay,children:[e.jsxs("div",{className:x.categoryLeft,children:[e.jsx("div",{className:x.expandButton,children:pe?e.jsx("button",{onClick:()=>R(O.id),className:x.toggleBtn,children:J?e.jsx(bs,{size:16}):e.jsx(vs,{size:16})}):e.jsx("div",{className:x.spacer})}),e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(Xe,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:O.name}),O.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",O.slug]}),O.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",O.imageUrl]}),O.parentId&&e.jsxs("span",{className:x.parentInfo,children:["в категорії: ",L(O.parentId)]})]})]})]}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>T(O),className:x.btn,children:e.jsx(Ns,{size:16})}),e.jsx("button",{onClick:()=>E(O.id),className:x.btn,children:e.jsx(Ss,{size:16})})]})]}),pe&&J&&e.jsx("div",{className:x.children,children:z(O.id,q+1)})]})},O.id)}):null};return t?e.jsx("div",{children:"Завантаження категорій..."}):r?e.jsxs("div",{children:["Помилка: ",r]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління категоріями"}),e.jsxs("button",{onClick:()=>g(!d),className:x.btn,children:[e.jsx(fs,{size:16})," Додати категорію"]})]}),d&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову категорію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва категорії *"}),e.jsx(y,{value:f.name||"",onChange:v=>u(q=>({...q,name:v.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug"}),e.jsx(y,{value:f.slug||"",onChange:v=>u(q=>({...q,slug:v.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(y,{value:f.imageUrl||"",onChange:v=>u(q=>({...q,imageUrl:v.target.value}))})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Батьківська категорія"}),e.jsxs("select",{value:f.parentId||"",onChange:v=>u(q=>({...q,parentId:v.target.value?Number(v.target.value):null})),children:[e.jsx("option",{value:"",children:"Коренева категорія"}),s.map(v=>e.jsxs("option",{value:v.id,children:[v.parentId?`${L(v.parentId)} → `:"",v.name]},v.id))]})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:w,className:x.btn,children:[e.jsx(js,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>g(!1),className:x.btn,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.categoriesSection,children:[e.jsx("h3",{children:"Список категорій"}),s.length===0?e.jsx("p",{children:"Категорії відсутні"}):z()]})]})},Pe="/collections",qe={async getAll(){return(await P.get(Pe)).data},async getOne(s){return(await P.get(`${Pe}/${s}`)).data},async create(s){return(await P.post(Pe,s)).data},async remove(s){await P.delete(`${Pe}/${s}`)},async update(s,t){return(await P.patch(`${Pe}/${s}`,t)).data}},Ze=ce(s=>({collections:[],loading:!1,error:null,fetchCollections:async()=>{s({loading:!0,error:null});try{const t=await qe.getAll();s({collections:t,loading:!1})}catch(t){s({error:t.message||"Помилка завантаження колекцій",loading:!1})}},addCollection:t=>s(r=>({collections:[...r.collections,t]})),updateCollection:async(t,r)=>{try{const a=await qe.update(t,r);if(!a)throw new Error("Категорія не була оновлена");return s(n=>({collections:n.collections.map(o=>(o.id===t,o))})),a}catch(a){throw s({error:a.message||"Помилка оновлення категорії",loading:!1}),a}},removeCollection:t=>s(r=>({collections:r.collections.filter(a=>a.id!==t)}))})),or=()=>{const{collections:s,loading:t,error:r,fetchCollections:a,addCollection:n,removeCollection:o}=Ze(),[i,h]=m.useState(null),[c,l]=m.useState({}),[p,f]=m.useState({name:"",slug:"",imageUrl:""}),[u,d]=m.useState(!1);m.useEffect(()=>{a()},[a]);const g=async()=>{if(!p.name?.trim()){alert("Введіть назву колекції");return}try{const S={...p,slug:p.slug||p.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"")},C=await qe.create(S);n(C),f({name:"",slug:"",imageUrl:""}),d(!1)}catch(S){alert(S.message||"Помилка при створенні колекції")}},_=async S=>{if(confirm("Ви дійсно хочете видалити колекцію?"))try{await qe.remove(S),o(S)}catch(C){alert(C.message||"Помилка при видаленні колекції")}},I=S=>{h(S.id),l({name:S.name,slug:S.slug,imageUrl:S.imageUrl||""})},w=async()=>{if(!(!i||!c.name?.trim()))try{const S=await qe.update(i,c);o(i),n(S),h(null),l({})}catch(S){alert(S.message||"Помилка при оновленні колекції")}},E=()=>{h(null),l({})},T=()=>s.length===0?null:s.map(S=>e.jsx("div",{className:x.collectionItem,children:i===S.id?e.jsxs("div",{className:x.editForm,children:[e.jsx("div",{className:x.editHeader,children:e.jsx("span",{className:x.editingLabel,children:"Редагування колекції:"})}),e.jsxs("div",{className:x.editInputs,children:[e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Назва колекції"}),e.jsx(y,{value:c.name||"",onChange:C=>l({...c,name:C.target.value}),placeholder:"Назва колекції",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"Slug"}),e.jsx(y,{value:c.slug||"",onChange:C=>l({...c,slug:C.target.value}),placeholder:"URL slug",className:x.editInput})]}),e.jsxs("div",{className:x.inputWrapper,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(y,{value:c.imageUrl||"",onChange:C=>l({...c,imageUrl:C.target.value}),placeholder:"URL зображення",className:x.editInput})]})]}),e.jsxs("div",{className:x.editActions,children:[e.jsxs("button",{onClick:w,className:`${x.btn} ${x.btnSave}`,children:[e.jsx(_s,{size:16})," Зберегти"]}),e.jsxs("button",{onClick:E,className:`${x.btn} ${x.btnCancel}`,children:[e.jsx(ys,{size:16})," Скасувати"]})]})]}):e.jsxs("div",{className:x.categoryDisplay,children:[e.jsx("div",{className:x.categoryLeft,children:e.jsxs("div",{className:x.categoryInfo,children:[e.jsx(Xe,{size:16,className:x.categoryIcon}),e.jsxs("div",{className:x.categoryText,children:[e.jsx("span",{className:x.categoryName,children:S.name}),S.slug&&e.jsxs("span",{className:x.categorySlug,children:["/",S.slug]}),S.imageUrl&&e.jsxs("span",{className:x.categoryImage,children:["Image: ",S.imageUrl]})]})]})}),e.jsxs("div",{className:x.categoryActions,children:[e.jsx("button",{onClick:()=>I(S),className:`${x.btn} ${x.btnEdit}`,title:"Редагувати",children:e.jsx(Ns,{size:16})}),e.jsx("button",{onClick:()=>_(S.id),className:`${x.btn} ${x.btnDelete}`,title:"Видалити",children:e.jsx(Ss,{size:16})})]})]})},S.id));return t?e.jsx("div",{className:x.loading,children:"Завантаження колекцій..."}):r?e.jsxs("div",{className:x.error,children:["Помилка: ",r]}):e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsx("h2",{children:"Управління колекціями"}),e.jsxs("button",{onClick:()=>d(!u),className:`${x.btn} ${x.btnPrimary}`,children:[e.jsx(fs,{size:16})," Додати колекцію"]})]}),u&&e.jsxs("div",{className:x.createForm,children:[e.jsx("h3",{children:"Створити нову колекцію"}),e.jsxs("div",{className:x.formInputs,children:[e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Назва колекції *"}),e.jsx(y,{value:p.name||"",onChange:S=>f(C=>({...C,name:S.target.value})),placeholder:"Введіть назву колекції",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"Slug (URL-адреса)"}),e.jsx(y,{value:p.slug||"",onChange:S=>f(C=>({...C,slug:S.target.value})),placeholder:"auto-generated або введіть власний",className:x.formInput})]}),e.jsxs("div",{className:x.inputGroup,children:[e.jsx("label",{children:"URL зображення"}),e.jsx(y,{value:p.imageUrl||"",onChange:S=>f(C=>({...C,imageUrl:S.target.value})),placeholder:"URL зображення",className:x.formInput})]})]}),e.jsxs("div",{className:x.formActions,children:[e.jsxs("button",{onClick:g,className:`${x.btn} ${x.btnSuccess}`,children:[e.jsx(js,{size:16})," Створити"]}),e.jsx("button",{onClick:()=>d(!1),className:`${x.btn} ${x.btnSecondary}`,children:"Скасувати"})]})]}),e.jsxs("div",{className:x.collectionsSection,children:[e.jsxs("div",{className:x.sectionHeader,children:[e.jsx("h3",{children:"Список колекцій"}),e.jsxs("div",{className:x.collectionCount,children:["Всього: ",s.length," колекцій"]})]}),s.length===0?e.jsxs("div",{className:x.emptyState,children:[e.jsx(Xe,{size:48,className:x.emptyIcon}),e.jsx("p",{children:"Колекції відсутні"}),e.jsx("p",{children:"Створіть першу колекцію для початку роботи"})]}):e.jsx("div",{className:x.collectionsList,children:T()})]})]})},cr="_createProduct_1sk0j_2",ir="_form_1sk0j_22",lr="_field_1sk0j_28",dr="_group_1sk0j_33",ur="_btn_1sk0j_51",mr="_submit_1sk0j_80",hr="_checkboxGroup_1sk0j_94",pr="_checkboxLabel_1sk0j_100",gr="_variantBlock_1sk0j_140",F={createProduct:cr,form:ir,field:lr,group:dr,btn:ur,submit:mr,checkboxGroup:hr,checkboxLabel:pr,variantBlock:gr,delete:"_delete_1sk0j_144"},Ps=["XS","S","M","L","XL","XXL"],es=["RED","GREEN","BLUE","BLACK","WHITE","YELLOW","ORANGE","PURPLE","PINK","GREY","BROWN"],He={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL"},Ls={RED:"Red",GREEN:"Green",BLUE:"Blue",BLACK:"Black",WHITE:"White",YELLOW:"Yellow",ORANGE:"Orange",PURPLE:"Purple",PINK:"Pink",GREY:"Grey",BROWN:"Brown"},Es={RED:"#b34a4a",GREEN:"#4a7c59",BLUE:"#527fb3",BLACK:"#1e1e1e",WHITE:"#f5f5f5",YELLOW:"#d4c35b",ORANGE:"#d87a4a",PURPLE:"#6a4a7c",PINK:"#ff99bb",GREY:"#808080",BROWN:"#8b5e3c"},xr="_select_18v07_35",fr="_caruselBox_18v07_55",jr="_wrapper_18v07_74",_r="_categoryBox_18v07_78",yr="_imgBox_18v07_99",Te={select:xr,caruselBox:fr,wrapper:jr,categoryBox:_r,imgBox:yr};function ss({value:s,onChange:t,includeEmpty:r=!0,valueKey:a="id"}){const{categories:n}=Re(),o=(i=null,h=0)=>n.filter(c=>c.parentId===i).map(c=>e.jsxs(Ne.Fragment,{children:[e.jsxs("option",{value:a==="slug"?c.slug:c.id,children:["— ".repeat(h),c.name]}),o(c.id,h+1)]},c.id));return e.jsxs("select",{value:s??"",onChange:i=>t(a==="id"?Number(i.target.value):i.target.value),className:Te.select,children:[r&&e.jsx("option",{value:"",children:"Виберіть категорію"}),o(null,0)]})}const br="_select_1ag6g_1",vr={select:br};function ts({value:s,onChange:t,multiple:r=!1,valueKey:a="id"}){const{collections:n,loading:o}=Ze();return o?e.jsx("p",{children:"Завантаження..."}):e.jsxs("select",{multiple:r,value:s??"",onChange:i=>{if(r){const h=Array.from(i.target.selectedOptions,c=>a==="id"?Number(c.value):c.value);t(h)}else{const h=a==="id"?Number(i.target.value):i.target.value;t(h)}},className:vr.select,children:[!r&&e.jsx("option",{value:"",children:"Виберіть колекцію"}),n.map(i=>e.jsx("option",{value:a==="slug"?i.slug:i.id,children:i.name},i.id))]})}const Bs=({onUpload:s})=>{const t=async r=>{const a=r.target.files?.[0];if(!a)return;const n=new FormData;n.append("file",a),n.append("upload_preset","FBEimg");try{const i=await(await fetch("https://api.cloudinary.com/v1_1/divhalkcr/image/upload",{method:"POST",body:n})).json();i.secure_url?s(i.secure_url):console.error("Upload failed:",i)}catch(o){console.error("Error uploading image:",o)}};return e.jsx(y,{type:"file",accept:"image/*",onChange:t})},Nr="_button_1452p_1",Sr="_primary_1452p_15",kr="_secondary_1452p_23",wr="_small_1452p_31",Cr="_danger_1452p_37",$r="_link_1452p_45",Ir="_full_1452p_53",Pr="_disabled_1452p_62",Lr="_loader_1452p_67",Er="_spin_1452p_1",Br="_categoriesContainer_1452p_84",Ue={button:Nr,primary:Sr,secondary:kr,small:wr,danger:Cr,link:$r,full:Ir,disabled:Pr,loader:Lr,spin:Er,categoriesContainer:Br},$=m.forwardRef(({type:s="button",onClick:t,disabled:r=!1,loading:a=!1,variant:n="primary",children:o,className:i,style:h,title:c,...l},p)=>e.jsxs("button",{ref:p,type:s,onClick:t,disabled:r||a,style:h,title:c,className:Cs(Ue.button,Ue[n],{[Ue.disabled]:r||a},i),...l,children:[a&&e.jsx("span",{className:Ue.loader}),c||o]}));$.displayName="Button";const Tr="_imagesBlock_1y6ls_2",Or="_newphoto_1y6ls_9",qr="_photoBox_1y6ls_15",ze={imagesBlock:Tr,newphoto:Or,photoBox:qr},Ar=({control:s,register:t,setValue:r,watch:a,variantIndex:n})=>{const{fields:o,append:i,remove:h}=ue({control:s,name:`variants.${n}.images`}),[c,l]=m.useState(""),p=f=>{h(f),(a(`variants.${n}.images`)||[]).forEach((d,g)=>{r(`variants.${n}.images.${g}.order`,g+1)})};return e.jsxs("div",{className:ze.imagesBlock,children:[e.jsx("h5",{children:"Images"}),o.map((f,u)=>{const d=a(`variants.${n}.images.${u}.url`);return e.jsxs("div",{style:{margin:"1rem"},children:[e.jsxs("div",{className:"column",children:[e.jsxs("div",{className:"padding",children:[e.jsx(y,{placeholder:"опис фото",style:{margin:"0.5rem"},...t(`variants.${n}.images.${u}.altText`)}),e.jsx(Bs,{onUpload:g=>r(`variants.${n}.images.${u}.url`,g)}),e.jsxs("div",{style:{display:"flex",marginTop:"0.5rem",gap:"0.5rem"},children:[e.jsx(y,{type:"text",placeholder:"Встав URL вручну",value:c,onChange:g=>l(g.target.value),id:"urlhandle"}),e.jsx($,{type:"button",onClick:()=>{c.trim()&&(r(`variants.${n}.images.${u}.url`,c.trim()),l(""))},children:"Завантажити фото"})]}),e.jsx(y,{type:"number",placeholder:"Order",min:1,...t(`variants.${n}.images.${u}.order`,{valueAsNumber:!0})})]}),d&&e.jsx("img",{src:d,alt:"preview",style:{width:100,height:"auto",marginTop:"0.5rem"}})]}),e.jsx("button",{type:"button",onClick:()=>p(u),children:"✕ Видалити фото"})]},f.id)}),e.jsx($,{type:"button",variant:"full",onClick:()=>i({url:"",altText:"",order:o.length+1}),children:"+ Add Image"})]})},Rr=()=>{const{register:s,control:t,handleSubmit:r,reset:a,setValue:n,watch:o}=me({defaultValues:{sku:"",price:0,priceSale:null,categoryId:void 0,collectionId:1,translations:[{name:"",description:"",languageId:1}],features:[{text:"",textEn:"",order:1}],variants:[]}}),i=ue({control:t,name:"translations"}),h=ue({control:t,name:"features"}),c=ue({control:t,name:"variants"}),l=o("price"),p=o("priceSale"),f=async d=>{try{const g={...d,collectionId:Number(d.collectionId),variants:d.variants.map(I=>({...I,productId:1}))},_=await de.addProduct(g);a(),alert(`Товар додано - ${_.translations[0].name}`)}catch(g){console.error("Помилка при створенні продукту:",g)}},u=()=>{c.append({color:"BLACK",sizes:[],price:l||0,priceSale:p||0,stock:0,images:[{url:"",altText:"",order:1}],description:""})};return e.jsxs("div",{className:F.createProduct,children:[e.jsx("h1",{children:"Create Product"}),e.jsxs("form",{onSubmit:r(f),className:F.form,children:[e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"SKU * номер товару, ідентифікатор "}),e.jsx("input",{...s("sku",{required:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Base Price *"}),e.jsx(y,{type:"number",step:"1",min:"1",...s("price",{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Base Sale Price"}),e.jsx("input",{type:"number",step:"1",min:"1",...s("priceSale",{valueAsNumber:!0})})]}),e.jsx("h3",{children:"Назва та опис  товару"}),i.fields.map((d,g)=>{const _=o(`translations.${g}.languageId`);return e.jsxs("div",{className:F.group,children:[e.jsx("input",{placeholder:"Name",...s(`translations.${g}.name`)}),e.jsx("input",{placeholder:"Description",...s(`translations.${g}.description`)}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:`Language: ${_===1?"Ukraine":"English"}`}),e.jsxs("select",{...s(`translations.${g}.languageId`,{valueAsNumber:!0,validate:I=>[1,2].includes(I)||"Тільки 1 або 2"}),children:[e.jsx("option",{value:"",children:"Оберіть мову"}),e.jsx("option",{value:1,children:"Ukraine"}),e.jsx("option",{value:2,children:"English"})]})]}),i.fields.length>1&&e.jsx("button",{type:"button",onClick:()=>i.remove(g),children:"✕"})]},d.id)}),e.jsx($,{type:"button",className:F.btn,onClick:()=>i.append({name:"",description:"",languageId:1}),children:"+ Add Translation"}),e.jsx("h3",{children:"Властивості товару"}),h.fields.map((d,g)=>e.jsxs("div",{className:F.group,children:[e.jsx(y,{placeholder:"приклад: Тканина: кашемір",...s(`features.${g}.text`)}),e.jsx(y,{placeholder:"Example EN",...s(`features.${g}.textEn`)}),e.jsx(y,{type:"number",placeholder:"Order",min:"1",...s(`features.${g}.order`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>h.remove(g),children:"✕"})]},d.id)),e.jsx($,{type:"button",onClick:()=>h.append({text:"",textEn:"",order:h.fields.length+1}),className:F.btn,children:"+ Додати властивість"}),e.jsx("h3",{children:"Variants"}),c.fields.map((d,g)=>e.jsxs("div",{className:`${F.variantBlock} form form2`,children:[e.jsxs("h4",{children:["Variant ",g+1]}),e.jsx("input",{type:"hidden",...s(`variants.${g}.productId`)}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...s(`variants.${g}.color`),children:Object.values(es).map(_=>e.jsx("option",{value:_,children:Ls[_]},_))})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:F.checkboxGroup,children:Object.values(Ps).map(_=>e.jsxs("label",{className:F.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:_,...s(`variants.${g}.sizes`)}),He[_]]},_))})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Price *"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${g}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx("input",{type:"number",step:"1",...s(`variants.${g}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Послідовність варіантів - введіть 1, якщо це головний варіант який буде відображатись всюди перший"}),e.jsx("input",{type:"number",...s(`variants.${g}.stock`,{valueAsNumber:!0})})]}),e.jsx("div",{className:F.field,children:e.jsx(y,{type:"text",...s(`variants.${g}.description`),label:"Description"})}),e.jsx(Ar,{control:t,register:s,setValue:n,watch:o,variantIndex:g}),e.jsx($,{type:"button",onClick:()=>c.remove(g),className:F.delete,children:"✕ Remove Variant"})]},d.id)),e.jsx($,{type:"button",onClick:u,className:F.btn,children:"+ Add Variant"}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Category"}),e.jsx(ss,{value:o("categoryId"),onChange:d=>n("categoryId",d),valueKey:"id"})]}),e.jsxs("div",{className:F.field,children:[e.jsx("label",{children:"Collections"}),e.jsx(ts,{value:o("collectionId"),onChange:d=>n("collectionId",Number(d)),valueKey:"id"})]}),e.jsx("button",{type:"submit",className:`${F.submit} ${F.btn}`,children:"Create Product"})]})]})},Fr="_card_190q6_2",Ur="_imageWrapper_190q6_11",zr="_name_190q6_28",Mr="_price_190q6_35",Dr="_priceSale_190q6_40",Wr="_priceOriginal_190q6_44",Gr="_features_190q6_49",Vr="_colorDots_190q6_59",Hr="_colorDot_190q6_59",Jr="_mainFont_190q6_146",se={card:Fr,imageWrapper:Ur,name:zr,price:Mr,priceSale:Dr,priceOriginal:Wr,features:Gr,colorDots:Vr,colorDot:Hr,mainFont:Jr},Kr="About",Xr="Contact",Yr="Shop",Qr="Home",Zr="Categories",ea="Collections",sa="FirstName",ta="Message",ra="For those who play beautifully",aa="Choose by category",na="Send",oa="Sending...",ca="FBE is a Ukrainian brand of modern clothing that combines quality, style and affordability. We create things for those who value comfort and individuality in everyday life, as well as for enjoyable sports and active recreation that brings pleasure.",ia="To provide quality clothing that enhances each client's personality and makes them feel confident. We believe that stylish and functional clothing should be accessible to everyone.",la={about:Kr,contact:Xr,shop:Yr,home:Qr,categories:Zr,collections:ea,"fast-delivery":"Fast delivery","change-return":"Exchanges and Returns","free-delivery":"Free delivery within Ukraine for orders over 5000 UAH","contact-to-me":"Contact us",name:sa,message:ta,whoplay:ra,choosecategory:aa,send:na,sending:oa,"about-h":"About FBE","about-h1":"Our mission","about-h2":"What sets us apart","about-h3":"Our values","about-h4":"Delivery",about1:ca,about2:ia,"about3-1":"Quality of materials — we use only proven fabrics and accessories","about3-2":"Contemporary design — we follow global trends and create our own","about3-3":"Affordable prices — a price-quality ratio that will pleasantly surprise you","about3-4":"Fast delivery — we operate throughout Ukraine, Poland, the USA, and Canada","about4-1":"Quality — each item undergoes thorough quality control","about4-2":"Style — we create clothing for modern and active people","about4-3":"Service — individual approach to each client","about4-4":"Innovation — we constantly improve our processes and products","about5-1":"Ukraine: Nova Poshta (2-3 business days)","about5-2":"Poland: Nova Poshta (3-5 business days)","about5-3":"USA & Canada: Canada Post (1-3 business days)"},da="Про нас",ua="Контакти",ma="Maгазин",ha="Головна",pa="Категорії",ga="Колекції",xa="Ім’я",fa="Повідомлення",ja="Відправити",_a="Відправка...",ya="Для тих, хто грає красиво",ba="Обирайте за категорією",va="FBE — український бренд сучасного одягу, який поєднує якість, стиль та доступність. Ми створюємо речі для тих, хто цінує комфорт та індивідуальність у щоденному житті, а також для приємного спорту й активного відпочинку, що приносить задоволення.",Na="Надавати якісний одяг, який підкреслює особистість кожного клієнта та робить їх впевненими в собі. Ми віримо, що стильний та функціональний одяг має бути доступним для кожного.",Sa={about:da,contact:ua,shop:ma,home:ha,categories:pa,collections:ga,"fast-delivery":"Швидка доставка","change-return":"Обмін і Повернення","free-delivery":"Доставка від 5000 грн по Україні безкоштовна","contact-to-me":"Зв'яжіться з нами",name:xa,message:fa,send:ja,sending:_a,whoplay:ya,choosecategory:ba,"about-h":"Про FBE","about-h1":"Наша місія","about-h2":"Що нас відрізняє","about-h3":"Наші цінності","about-h4":"Доставка",about1:va,about2:Na,"about3-1":"Якість матеріалів — використовуємо тільки перевірені тканини та фурнітуру","about3-2":"Актуальний дизайн — слідкуємо за світовими трендами та створюємо власні","about3-3":"Доступні ціни — співвідношення ціна-якість, яке вас приємно здивує","about3-4":"Швидка доставка — працюємо по всій Україні, Польщі, США та Канаді","about4-1":"Якість — кожна річ проходить ретельний контроль якості","about4-2":"Стиль — створюємо одяг для сучасних та активних людей","about4-3":"Сервіс — індивідуальний підхід до кожного клієнта","about4-4":"Інновації — постійно вдосконалюємо наші процеси та продукти","about5-1":"Україна: Нова пошта (2-3 робочих дні)","about5-2":"Польща: Нова пошта (3-5 робочих днів)","about5-3":"США та Канада: Canada Post (1-3 робочих дні)"},ka={en:{translation:la},uk:{translation:Sa}},wa=localStorage.getItem("language")||"uk";Qe.use(Gs).init({resources:ka,lng:wa,fallbackLng:"uk",interpolation:{escapeValue:!1}});const Ca=localStorage.getItem("language")||Qe.language,Ae=ce(s=>({lang:Ca,setLang:t=>{Qe.changeLanguage(t),localStorage.setItem("language",t),s({lang:t})}})),rs=({product:s,isMainPage:t})=>{const{id:r,translations:a,variants:n,price:o,priceSale:i}=s,h=Ae(b=>b.lang),p=(b=>{if(!b||b.length===0)return null;const z={uk:1,en:2}[h];return b.find(v=>v.languageId===z)||b[0]})(a)?.name||(h==="uk"?"Назва відсутня":"Name not available"),f=n?.find(b=>b.stock===1)||n?.[0],u=f?.images?.find(b=>b.order===1)||f?.images?.[0],d=Array.from(new Set(n?.flatMap(b=>b.sizes)||[])),g=Array.from(new Set(n?.map(b=>b.color)||[])),_=n?.map(b=>b.price).filter(b=>b!=null)||[],I=n?.map(b=>b.priceSale).filter(b=>b!=null)||[],w=_.length>0?Math.min(..._):void 0,E=I.length>0?Math.min(...I):void 0,T=o??w,S=i??E,C={uk:{noImage:"Фото відсутнє",noPrice:"Ціна відсутня",noSizes:"Немає",noColors:"Немає"},en:{noImage:"Photo not available",noPrice:"Price not available",noSizes:"None",noColors:"None"}},R=C[h]||C.uk;return e.jsxs("div",{className:se.card,children:[e.jsx(H,{to:`/product/${r}/`,className:se.imageWrapper,children:u?e.jsx("img",{src:u.url,alt:u.altText||p}):e.jsx("div",{className:se.noImage,children:R.noImage})}),e.jsx("p",{className:`${se.name} ${t?se.mainFont:""}`,children:e.jsx(H,{to:`/product/${r}`,children:p})}),e.jsx("p",{className:`${se.price} ${t?se.mainFont:""}`,children:T?S&&S<T?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:t?"":se.priceSale,children:["₴",S.toFixed(2)," "]}),e.jsxs("span",{className:se.priceOriginal,children:["₴",T.toFixed(2)]})]}):e.jsxs("span",{children:["₴",T.toFixed(2)]}):R.noPrice}),e.jsxs("div",{className:se.features,children:[t?"":d.length>0?d.map(b=>He[b]).join(", "):R.noSizes,!t&&e.jsx("br",{}),g.length>0?e.jsx("div",{className:se.colorDots,children:g.map(b=>e.jsx("span",{className:se.colorDot,style:{backgroundColor:Es[b]||"#ccc"},title:b},b))}):!t&&R.noColors]})]})},$a="_dashboard_12snk_3",Ia="_filters_12snk_9",Pa="_cardsList_12snk_22",La="_cardWrapper_12snk_31",Ea="_loadMore_12snk_59",Ba="_deleteButton_12snk_89",Ta="_loadMoreButton_12snk_98",re={dashboard:$a,filters:Ia,cardsList:Pa,cardWrapper:La,loadMore:Ea,deleteButton:Ba,loadMoreButton:Ta},is=()=>{const s=Se(),{products:t,fetchProducts:r,appendProducts:a,deleteProduct:n}=Ve(),[o,i]=m.useState(""),[h,c]=m.useState(""),[l,p]=m.useState(0),[f,u]=m.useState(!1);m.useEffect(()=>{(async()=>{u(!0);const I={limit:10,skip:l*10,categorySlug:o||void 0,collectionSlug:h||void 0};l===0?await r(I):await a(I),u(!1)})()},[l,o,h,r,a]);const d=_=>{window.confirm(`Видалити продукт ${_.translations?.[0]?.name}?`)&&n(_.id)},g=()=>{p(0)};return e.jsxs("div",{className:re.dashboard,children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("div",{className:re.filters,children:[e.jsx(ss,{value:o,onChange:_=>{i(_),g()},valueKey:"slug"}),e.jsx(ts,{value:h,onChange:_=>{c(_),g()},valueKey:"slug",multiple:!1})]}),e.jsxs("p",{children:["Всього продуктів: ",t.length]}),f&&e.jsx("p",{children:"Завантаження..."}),e.jsx("ul",{className:re.cardsList,children:t.map(_=>e.jsxs("div",{className:re.cardWrapper,children:[e.jsx(rs,{product:_}),e.jsx($,{className:`${re.deleteButton} ${re.button}`,onClick:()=>d(_),children:"Видалити"}),e.jsx($,{className:` ${re.button}`,onClick:()=>s(`/admin/edit-product/${_.id}`),children:"Редагувати"})]},_.id))}),e.jsx("div",{className:re.loadMore,children:e.jsx($,{className:`${re.loadMoreButton} ${re.button}`,onClick:()=>p(_=>_+1),disabled:f,children:"Завантажити ще"})})]})},Oa="_editProduct_1f234_1",qa="_form_1f234_13",Aa="_field_1f234_35",Ra="_group_1f234_65",Fa="_inputText_1f234_73",Ua="_variantBlock_1f234_90",za="_checkboxGroup_1f234_107",Ma="_checkboxLabel_1f234_114",Da="_btn_1f234_130",Wa="_submit_1f234_156",Ga="_loading_1f234_188",Va="_error_1f234_197",Ha="_changesIndicator_1f234_249",Ja="_chooseBox_1f234_253",B={editProduct:Oa,form:qa,field:Aa,group:Ra,inputText:Fa,variantBlock:Ua,checkboxGroup:za,checkboxLabel:Ma,btn:Da,submit:Wa,delete:"_delete_1f234_179",loading:Ga,error:Va,changesIndicator:Ha,chooseBox:Ja},Ka=({control:s,register:t,setValue:r,watch:a,variantIndex:n})=>{const{fields:o,append:i,remove:h}=ue({control:s,name:`variants.${n}.images`}),[c,l]=m.useState(""),p=f=>{h(f),(a(`variants.${n}.images`)||[]).forEach((d,g)=>{r(`variants.${n}.images.${g}.order`,g+1)})};return e.jsxs("div",{className:ze.imagesBlock,children:[e.jsx("h5",{children:"Images"}),o.map((f,u)=>{const d=a(`variants.${n}.images.${u}.url`);return e.jsx("div",{style:{margin:"1rem"},children:d?e.jsxs("div",{className:ze.photoBox,children:[e.jsx("img",{src:d,alt:a(`variants.${n}.images.${u}.altText`)||"preview"}),e.jsx(y,{type:"number",placeholder:"Order",min:1,...t(`variants.${n}.images.${u}.order`,{valueAsNumber:!0})}),e.jsx($,{type:"button",onClick:()=>p(u),variant:"small",children:"✕ Видалити фото"})]}):e.jsxs("div",{className:ze.newphoto,children:[e.jsx(y,{placeholder:"опис фото",style:{marginBottom:"0.5rem"},...t(`variants.${n}.images.${u}.altText`)}),e.jsx(Bs,{onUpload:g=>r(`variants.${n}.images.${u}.url`,g)}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx(y,{type:"text",placeholder:"Встав URL вручну",value:c,onChange:g=>l(g.target.value)}),e.jsx($,{type:"button",onClick:()=>{c.trim()&&(r(`variants.${n}.images.${u}.url`,c.trim()),l(""))},children:"Завантажити фото"})]}),e.jsx(y,{type:"number",placeholder:"Order",min:1,...t(`variants.${n}.images.${u}.order`,{valueAsNumber:!0}),style:{marginTop:"0.5rem"}}),e.jsx($,{type:"button",onClick:()=>p(u),style:{marginTop:"0.5rem"},variant:"small",children:"✕ Видалити фото"})]})},f.id)}),e.jsx($,{type:"button",variant:"full",onClick:()=>i({url:"",altText:"",order:o.length+1}),children:"+ Add Image"})]})};function be(s,t){if(s===t)return!0;if(s==null||t==null)return!1;if(Array.isArray(s)&&Array.isArray(t))return s.length===t.length&&s.every((r,a)=>be(r,t[a]));if(typeof s=="object"&&typeof t=="object"){const r=Object.keys(s),a=Object.keys(t);return r.length===a.length&&r.every(n=>a.includes(n)&&be(s[n],t[n]))}return!1}function ls(s,t){const r={};return["sku","price","priceSale","categoryId","collectionId"].forEach(n=>{const o=t[n];be(s[n],o)||(r[n]=o??void 0)}),be(s.translations,t.translations)||(r.translations=t.translations?.map(n=>({name:n.name,description:n.description??void 0,languageId:n.languageId}))),be(s.features,t.features)||(r.features=t.features?.map(n=>({text:n.text,textEn:n.textEn??void 0,order:n.order}))),be(s.variants,t.variants)||(r.variants=t.variants?.map(n=>({color:n.color,sizes:n.sizes,price:n.price,priceSale:n.priceSale??void 0,stock:n.stock,description:n.description??void 0,images:n.images?.map((o,i)=>({url:o.url,altText:o.altText??void 0,order:o.order??i+1}))}))),r}const Xa=()=>{const{id:s}=Ge(),[t,r]=m.useState(!0),[a,n]=m.useState(null),[o,i]=m.useState(!1),h=m.useRef(null),{editProduct:c,isLoading:l}=Ve(),{register:p,control:f,handleSubmit:u,reset:d,setValue:g,watch:_}=me({defaultValues:{id:0,sku:"",price:0,priceSale:void 0,categoryId:void 0,collectionId:void 0,translations:[{name:"",description:void 0,languageId:1}],features:[],variants:[]}}),I=ue({control:f,name:"translations"}),w=ue({control:f,name:"features"}),E=ue({control:f,name:"variants"}),T=_();m.useEffect(()=>{if(h.current&&T){const b=ls(h.current,T);i(Object.keys(b).length>0)}},[T]),m.useEffect(()=>{async function b(){if(!s){n("ID продукту не знайдено"),r(!1);return}try{r(!0);const L=await de.getById(Number(s));h.current=JSON.parse(JSON.stringify(L)),d(L)}catch(L){console.error(L),n("Не вдалося завантажити продукт")}finally{r(!1)}}b()},[s,d]);const S=async b=>{if(!s||!h.current)return;const L=ls(h.current,b);if(Object.keys(L).length===0){alert("Немає змін для збереження");return}try{await c(Number(s),L),h.current=JSON.parse(JSON.stringify(b)),i(!1),alert(`Продукт оновлено: ${Object.keys(L).join(", ")}`)}catch(z){console.error(z),alert("Помилка при оновленні продукту")}},C=()=>{E.append({color:"BLACK",sizes:[],price:T.price??0,priceSale:T.priceSale??void 0,stock:0,description:"",images:[{url:"",altText:"",order:1}]})},R=()=>{h.current&&(d(h.current),i(!1))};return t||l?e.jsx("div",{className:B.loading,children:"Завантаження..."}):a?e.jsx("div",{className:B.error,children:a}):e.jsxs("div",{className:B.editProduct,children:[e.jsxs("div",{className:B.header,children:[e.jsxs("h1",{children:["Edit Product #",s]}),o&&e.jsxs("div",{className:B.changesIndicator,children:[e.jsx("span",{children:"• Є незбережені зміни"}),e.jsx($,{type:"button",onClick:R,className:B.resetBtn,children:"Скинути зміни"})]})]}),e.jsxs("form",{onSubmit:u(S),className:B.form,children:[e.jsx("div",{className:B.field,children:e.jsx(y,{...p("sku",{required:!0}),placeholder:"SKU"})}),e.jsx("div",{className:B.field,children:e.jsx(y,{type:"number",...p("price",{required:!0,valueAsNumber:!0}),placeholder:"Price"})}),e.jsx("div",{className:B.field,children:e.jsx(y,{type:"number",...p("priceSale",{valueAsNumber:!0}),placeholder:"Sale Price"})}),e.jsxs("div",{className:B.chooseBox,children:[e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Category"}),e.jsx(ss,{value:_("categoryId"),onChange:b=>g("categoryId",b),valueKey:"id"})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Collection"}),e.jsx(ts,{value:_("collectionId"),onChange:b=>g("collectionId",Number(b)),valueKey:"id"})]})]}),e.jsx("h3",{children:"Назва і опис товару"}),I.fields.map((b,L)=>{const z=_(`translations.${L}.languageId`);return e.jsxs("div",{className:B.group,children:[e.jsx(y,{placeholder:"Name",...p(`translations.${L}.name`)}),e.jsx(y,{placeholder:"Description",...p(`translations.${L}.description`)}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:`Language: ${z===1?"Ukraine":z===2?"English":"Unknown"}`}),e.jsxs("select",{...p(`translations.${L}.languageId`,{valueAsNumber:!0}),children:[e.jsx("option",{value:1,children:"Ukraine"}),e.jsx("option",{value:2,children:"English"})]})]}),I.fields.length>1&&e.jsx("button",{type:"button",onClick:()=>I.remove(L),children:"✕"})]},b.id)}),I.fields.length<2&&e.jsx($,{type:"button",className:B.btn,onClick:()=>{const L=I.fields.map((z,v)=>_(`translations.${v}.languageId`)).includes(1)?2:1;I.append({name:"",description:"",languageId:L})},children:"+ Add Translation"}),e.jsx("h3",{children:"Властивості товару"}),w.fields.map((b,L)=>e.jsxs("div",{className:B.group,children:[e.jsxs("div",{className:B.featureInputs,children:[e.jsx(y,{placeholder:"Text (українська)",...p(`features.${L}.text`),className:B.inputText,title:_(`features.${L}.text`)||"",label:"Українська"}),e.jsx(y,{placeholder:"Text (English)",...p(`features.${L}.textEn`),className:B.inputText,title:_(`features.${L}.textEn`)||"",label:"English"})]}),e.jsx(y,{type:"number",placeholder:"Order",...p(`features.${L}.order`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",onClick:()=>w.remove(L),className:B.removeBtn,children:"✕"})]},b.id)),e.jsx($,{type:"button",onClick:()=>w.append({text:"",textEn:"",order:w.fields.length+1}),className:B.btn,children:"+ Add Feature"}),e.jsx("h3",{children:"Variants"}),E.fields.map((b,L)=>e.jsxs("div",{className:`${B.variantBlock} form form2`,children:[e.jsxs("h4",{children:["Variant ",L+1]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Color"}),e.jsx("select",{...p(`variants.${L}.color`),children:Object.values(es).map(z=>e.jsx("option",{value:z,children:Ls[z]},z))})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Sizes"}),e.jsx("div",{className:B.checkboxGroup,children:Object.values(Ps).map(z=>e.jsxs("label",{className:B.checkboxLabel,children:[e.jsx("input",{type:"checkbox",value:z,...p(`variants.${L}.sizes`)}),He[z]]},z))})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Price *"}),e.jsx(y,{type:"number",...p(`variants.${L}.price`,{required:!0,valueAsNumber:!0})})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Sale Price"}),e.jsx(y,{type:"number",...p(`variants.${L}.priceSale`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{className:"label",children:"Послідовність варіантів - введіть 1, якщо це головний варіант який буде відображатись всюди перший"}),e.jsx(y,{type:"number",...p(`variants.${L}.stock`,{valueAsNumber:!0})})]}),e.jsxs("div",{className:B.field,children:[e.jsx("label",{children:"Description"}),e.jsx(y,{placeholder:"Variant description",...p(`variants.${L}.description`)})]}),e.jsx(Ka,{control:f,register:p,setValue:g,watch:_,variantIndex:L}),e.jsx($,{type:"button",onClick:()=>E.remove(L),className:B.delete,children:"✕ Remove Variant"})]},b.id)),e.jsx($,{type:"button",onClick:C,children:" Variant"}),e.jsxs("div",{className:B.formActions,children:[e.jsx("button",{type:"submit",className:`${B.submit} ${B.btn}`,disabled:!o,children:o?"Зберегти зміни":"Немає змін"}),o&&e.jsx($,{type:"button",onClick:R,className:B.cancelBtn,children:"Скинути"})]})]})]})},Ya=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=me(),a=Se(),n=async i=>{try{await he.forgotPassword(i),alert("Для відновлення паролю перейдіть у поштову скриньку"),a("/")}catch(h){alert(h.response?.data?.message||"Не вдалося відправити лист")}},o=i=>{n(i.email)};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h2",{className:"title",children:"Відновлення пароля"}),e.jsxs("form",{onSubmit:t(o),className:"form",children:[e.jsx(y,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),r.email&&e.jsx("p",{className:"error",children:r.email.message}),e.jsx($,{type:"submit",children:"Надіслати посилання"})]})]})},Qa="_loginContainer_1bxwe_1",Za="_title_1bxwe_12",en="_form_1bxwe_18",sn="_registerPrompt_1bxwe_54",ge={loginContainer:Qa,title:Za,form:en,registerPrompt:sn},tn=()=>{const{user:s}=U(),[t,r]=m.useState({email:"",password:""}),[a,n]=m.useState(null),o=Se();m.useEffect(()=>{s&&o("/")},[s,o]);const i=c=>{const{name:l,value:p}=c.target;r(f=>({...f,[l]:p})),a&&n(null)},h=async c=>{if(c.preventDefault(),!t.email||!t.password){n("Будь ласка, заповніть всі поля");return}if(!t.email.includes("@")){n("Введіть коректний email");return}n(null);try{console.log("LoginForm: Starting login process for:",t.email),await he.login(t),console.log("LoginForm: Login successful, redirecting..."),o("/")}catch(l){console.error("LoginForm: Login failed:",l),console.error("LoginForm: Error details:",{type:typeof l,constructor:l?.constructor?.name,message:l instanceof Error?l.message:l,string:String(l)});let p="Помилка входу. Спробуйте ще раз.";if(l instanceof Error)p=l.message;else if(typeof l=="string")p=l;else if(l&&typeof l=="object")if("message"in l&&typeof l.message=="string")p=l.message;else if("error"in l&&typeof l.error=="string")p=l.error;else try{const f=JSON.stringify(l);f&&f!=="{}"&&f!=="[object Object]"&&(p=f)}catch(f){console.error("Failed to stringify error:",f)}console.log("LoginForm: Final error message:",p),n(p)}};return e.jsxs("div",{className:Cs(ge.loginContainer),children:[e.jsx("h1",{className:ge.title,children:"Вхід"}),e.jsxs("form",{onSubmit:h,className:ge.form,children:[e.jsx(y,{label:"Email",name:"email",type:"email",placeholder:"Введіть ваш email",value:t.email,onChange:i,required:!0}),e.jsx(y,{label:"Пароль",name:"password",type:"password",placeholder:"Введіть ваш пароль",value:t.password,onChange:i,required:!0}),a&&e.jsx("div",{className:ge.errorContainer,children:e.jsx("p",{className:ge.error,children:a})}),e.jsx($,{type:"submit",disabled:!t.email||!t.password,className:"",children:"Увійти"}),e.jsx("p",{className:ge.registerPrompt,children:e.jsx(H,{to:"/forgot-password",children:"Забули пароль"})}),e.jsxs("p",{className:ge.registerPrompt,children:["Немає аккаунта? ",e.jsx(H,{to:"/register",children:"Зареєструйтесь тут"})]})]})]})},rn=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=me(),[a]=Vs(),n=Se(),o=a.get("code"),i=a.get("email"),h=c=>{if(!o||!i){alert("Посилання недійсне або відсутні дані");return}try{he.resetPassword(i,o,c.newPassword),alert("Дані oновлено"),n("/login")}catch(l){alert(l.response?.data?.message||"Не вдалося відновити дані")}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Скидання пароля"}),e.jsxs("form",{onSubmit:t(h),className:"form",children:[e.jsx(y,{type:"password",placeholder:"Новий пароль *",...s("newPassword",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),r.newPassword&&e.jsx("p",{className:"error",children:r.newPassword.message}),e.jsx($,{type:"submit",children:"Змінити пароль"})]})]})},an="_delivery_1u3z3_1",nn="_section_1u3z3_14",on="_warning_1u3z3_27",cn="_list_1u3z3_34",ln="_freeShipping_1u3z3_41",dn="_payment_1u3z3_45",ne={delivery:an,section:nn,warning:on,list:cn,freeShipping:ln,payment:dn},un=()=>e.jsx("div",{className:"page",children:e.jsxs("div",{className:ne.delivery,children:[e.jsx("h1",{children:"ДОСТАВКА ТА ПОВЕРНЕННЯ"}),e.jsxs("section",{className:ne.section,children:[e.jsx("h2",{children:"УМОВИ ДОСТАВКИ"}),e.jsx("p",{className:ne.warning,children:"ВАЖЛИВЕ ПОВІДОМЛЕННЯ – ВІЙНА В УКРАЇНІ: Через війну можливі невеликі затримки. Після відправки ваше замовлення прибуде протягом 2-6 робочих днів."}),e.jsxs("ul",{className:ne.list,children:[e.jsx("li",{children:"Замовлення по Україні відправляються «Новою Поштою» (2-3 робочих дні)"}),e.jsx("li",{children:"Замовлення по Польщі відправляємо «Нова пошта» (3-5 робочих дні)"}),e.jsx("li",{children:"Замовлення по США та Канаді відправляються «Пошта Канади» (1-3 робочих дні)"})]}),e.jsx("p",{className:ne.freeShipping,children:"БЕЗКОШТОВНА ЕКСПРЕС-доставка замовлень на суму понад 300$"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Зверніть увагу:"})," ми не доставляємо товари в Росію та Білорусь."]})]}),e.jsxs("section",{className:ne.section,children:[e.jsx("h2",{children:"ВІДСТЕЖУЙТЕ СВОЄ ЗАМОВЛЕННЯ"}),e.jsx("p",{children:"Щойно ваше замовлення буде відправлено, ви отримаєте електронний лист із інформацією про відстеження. Усі деталі відстеження є в електронному листі."}),e.jsxs("p",{children:["Мита та податки: можуть стягуватися митні збори та/або ПДВ.",e.jsx("br",{}),e.jsx("strong",{children:"FBE"})," не несе відповідальності за митні або місцеві податки."]})]}),e.jsxs("section",{className:ne.section,children:[e.jsx("h2",{children:"ПОВЕРНЕННЯ"}),e.jsx("p",{children:"Купальники поверненню та обміну не підлягають."})]}),e.jsxs("section",{className:ne.section,children:[e.jsx("h2",{children:"ОПЛАТА"}),e.jsxs("div",{className:ne.payment,children:[e.jsx("h3",{children:"Рахунок на оплату"}),e.jsx("p",{children:"Після оформлення замовлення ми надішлемо вам рахунок на електронну пошту або у месенджер. Ви зможете оплатити замовлення зручним способом. Після оплати отримаєте підтвердження та деталі доставки."}),e.jsx("h3",{children:"Передоплата"}),e.jsxs("p",{children:["Для замовлень, де потрібна передоплата, необхідно внести ",e.jsx("strong",{children:"200₴"}),". Ця сума гарантує резервування товару."]}),e.jsx("h3",{children:"Післяплата / оплата повної суми"}),e.jsx("p",{children:"Якщо товар оплачується повністю після отримання рахунку, оплатіть зазначену суму згідно з інструкціями. Після отримання платежу ми відправимо ваше замовлення."})]})]})]})}),mn="_checkout_191db_1",hn="_summary_191db_15",pn="_item_191db_18",gn="_total_191db_24",xe={checkout:mn,summary:hn,item:pn,total:gn},Ts="cart",ds=()=>{try{const s=localStorage.getItem(Ts);return s?JSON.parse(s):[]}catch{return[]}},Ke=s=>{localStorage.setItem(Ts,JSON.stringify(s))},fe={addItem(s){const t=ds(),r=t.findIndex(a=>a.productId===s.productId&&a.color===s.color&&a.size===s.size);return r>=0?t[r].quantity=Math.min(99,t[r].quantity+s.quantity):t.push(s),Ke(t),t},async addToCart(s,t){return(await P.post("/cart/add",{userId:s,item:t})).data.item},async deleteTCartItem(s){await P.delete(`/cart-item/${s}`)},async deleteTCartItems(){await P.delete("/cart/clear")},async getCart(s){return s?(await P.get("/cart")).data.items:ds()},setLocalCart(s){return Ke(s),s},clearLocalCart(){Ke([])}},je=ce((s,t)=>({cart:[],loaded:!1,isLoading:!1,setCart:r=>s({cart:r}),addCartItem:async r=>{try{const{user:a}=U.getState();if(a?.id){await fe.addToCart(a.id,r);const n=await fe.getCart(a?.id);s({cart:n})}else{const n=Math.floor(Math.random()*1e3),o=r.productId+n,i={...r,id:+o},h=fe.addItem(i);s({cart:h})}}catch(a){console.error("Помилка при додаванні в кошик:",a)}},clearCart:async()=>{try{await fe.clearLocalCart(),s({cart:[],loaded:!1})}catch(r){console.error("Помилка при очищенні кошика:",r)}},deleteCartItems:async()=>{try{await fe.deleteTCartItems(),s({cart:[]})}catch(r){console.error("Помилка при видаленні товарів:",r)}},deleteCartItem:async r=>{const{user:a}=U.getState();try{a&&await fe.deleteTCartItem(+r),s(n=>{const o=n.cart.filter(i=>i.id!==r);return a||localStorage.setItem("cart",JSON.stringify(o)),{cart:o}})}catch(n){console.error("Помилка при delete Item:",n)}},fetchCart:async()=>{const{loaded:r,isLoading:a}=t(),{user:n,accessToken:o}=U.getState();if(!a){if(!n?.id||!o){try{const i=JSON.parse(localStorage.getItem("cart")||"[]");s({cart:i,loaded:!0})}catch(i){console.error("Помилка завантаження кошика з localStorage:",i),s({cart:[],loaded:!0})}return}if(r){console.log("Кошик вже завантажений для користувача");return}if(s({isLoading:!0}),n?.id&&o)try{const i=await fe.getCart(n.id);s({cart:i,loaded:!0,isLoading:!1})}catch(i){console.error("Помилка при завантаженні кошика:",i),s({cart:[],loaded:!0,isLoading:!1})}}}})),We={async createOrder(s,t,r,a){console.log("➡️ Відправка замовлення на бекенд",a);const n=t.reduce((o,i)=>{const h=i.priceSale&&i.priceSale<i.price?i.priceSale:i.price;return o+h*i.quantity},0);return P.post("/orders",{userId:s??null,guestName:a.fullName,guestPhone:a.phone,guestEmail:a.email,novaPostCity:a.city,novaPostBranch:a.novaPoshtaBranch,paymentMethod:r.toUpperCase(),finalPrice:Number(Math.round(n*10)/10),items:t.map(o=>{const i=o.priceSale&&o.priceSale<o.price?o.priceSale:o.price;return{productId:o.productId,quantity:o.quantity,price:o.price,finalPrice:+(i*o.quantity).toFixed(1),name:o.name,image:o.image,color:o.color,size:o.size,priceSale:o.priceSale+""}})})},getOrders:async(s=!1,t,r=1,a=10)=>{const n={page:r,limit:a};return t?.orderId&&(n.orderId=t.orderId),t?.dateFrom&&(n.dateFrom=t.dateFrom),t?.dateTo&&(n.dateTo=t.dateTo),s&&(n.showAll=!0),(await P.get("/orders/all",{params:n,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data},updateOrderStatus:async(s,t)=>(await P.patch(`/orders/${s}/status`,{status:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data,updateOrderItemTracking:async(s,t)=>(await P.patch(`/orders/tracknumber/${s}`,{trackingNumber:t})).data},xn="_form_15mwq_1",fn={form:xn},Me={async getAreas(){return(await P.get("nova-poshta/areas")).data},async getCities(s){return(await P.get(`nova-poshta/cities${s?`?areaRef=${s}`:""}`)).data},async getBranches(s){return(await P.get(`nova-poshta/warehouses?cityRef=${s}`)).data},async getTracking(s){return(await P.get(`nova-poshta/tracking?ttn=${s}`)).data[0]}},jn="_selectWrapper_167pe_1",_n="_selectInput_167pe_8",yn="_placeholder_167pe_29",bn="_arrow_167pe_33",vn="_open_167pe_41",Nn="_optionsList_167pe_45",Sn="_option_167pe_45",kn="_selected_167pe_80",wn="_disabled_167pe_86",ae={selectWrapper:jn,selectInput:_n,placeholder:yn,arrow:bn,open:vn,optionsList:Nn,option:Sn,selected:kn,disabled:wn},De=({options:s,placeholder:t="Select...",onChange:r,value:a,disabled:n=!1})=>{const[o,i]=m.useState(!1),[h,c]=m.useState(a),l=m.useRef(null);m.useEffect(()=>{const f=u=>{l.current&&!l.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const p=f=>{c(f.value),r(f.value),i(!1)};return e.jsxs("div",{className:ae.selectWrapper,ref:l,children:[e.jsxs("div",{className:`${ae.selectInput} ${n?ae.disabled:""}`,onClick:()=>!n&&i(f=>!f),children:[e.jsx("span",{className:h?"":ae.placeholder,children:s.find(f=>f.value===h)?.label||t}),e.jsx("span",{className:`${ae.arrow} ${o?ae.open:""}`})]}),e.jsx("ul",{className:`${ae.optionsList} ${o?ae.open:""}`,children:s.map(f=>e.jsx("li",{className:`${ae.option} ${f.value===h?ae.selected:""}`,onClick:()=>p(f),children:f.label},f.value))})]})},Cn=({form:s,setForm:t})=>{const[r,a]=m.useState([]),[n,o]=m.useState([]),[i,h]=m.useState([]),[c,l]=m.useState(!1),[p,f]=m.useState(!1);m.useEffect(()=>{Me.getAreas().then(d=>a(d)).catch(d=>console.error("❌ Помилка завантаження областей:",d))},[]),m.useEffect(()=>{s.areaRef&&(l(!0),Me.getCities(s.areaRef).then(d=>o(d)).catch(d=>console.error("❌ Помилка завантаження міст:",d)).finally(()=>l(!1)))},[s.areaRef]),m.useEffect(()=>{s.cityRef&&(f(!0),Me.getBranches(s.cityRef).then(d=>h(d)).catch(d=>console.error("❌ Помилка завантаження відділень:",d)).finally(()=>f(!1)))},[s.cityRef]);const u=(d,g)=>{if(d==="areaRef"&&(t(_=>({..._,areaRef:g,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0})),o([]),h([])),d==="cityRef"){const _=n.find(I=>I.Ref===g)?.Description||"";t(I=>({...I,cityRef:g,cityName:_,branchRef:void 0,branchName:void 0})),h([])}if(d==="branchRef"){const _=i.find(I=>I.Ref===g);t(I=>({...I,branchRef:g,branchName:_?`${_.Number} - ${_.ShortAddress}`:""}))}};return e.jsxs("div",{className:fn.form,children:[e.jsx("input",{type:"text",name:"fullName",placeholder:"Ім’я та прізвище",value:s.fullName,onChange:d=>t(g=>({...g,fullName:d.target.value})),required:!0}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Телефон",value:s.phone,onChange:d=>t(g=>({...g,phone:d.target.value})),required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:d=>t(g=>({...g,email:d.target.value}))}),e.jsx(De,{value:s.areaRef||"",onChange:d=>u("areaRef",d),options:r.map(d=>({value:d.Ref,label:d.Description})),placeholder:"Виберіть область"}),e.jsx(De,{value:s.cityRef||"",onChange:d=>u("cityRef",d),options:n.map(d=>({value:d.Ref,label:d.Description})),placeholder:c?"Завантаження міст...":"Виберіть місто",disabled:!s.areaRef}),e.jsx(De,{value:s.branchRef||"",onChange:d=>u("branchRef",d),options:i.map(d=>({value:d.Ref,label:`${d.Number} - ${d.ShortAddress}`})),placeholder:p?"Завантаження відділень...":"Виберіть відділення",disabled:!s.cityRef})]})},$n=()=>{const{user:s}=U(),{cart:t,setCart:r,clearCart:a}=je(),[n,o]=m.useState(!1),[i,h]=m.useState("cod"),[c,l]=m.useState({fullName:s?`${s.first_name??""} ${s.last_name??""}`.trim():"",phone:"",email:s?.email||"",areaRef:void 0,cityRef:void 0,cityName:void 0,branchRef:void 0,branchName:void 0});m.useEffect(()=>{const u=localStorage.getItem("cart");if(u)try{r(JSON.parse(u))}catch{r([])}},[r]);const p=async()=>{if(!c.fullName||!c.phone||!c.areaRef||!c.cityRef||!c.branchRef){alert("⚠ Заповніть усі обов’язкові поля");return}if(t.length===0){alert("🛒 Ваш кошик порожній");return}o(!0);try{const u={...c,city:c.cityName,novaPoshtaBranch:c.branchName};await We.createOrder(s?.id??null,t,i,u),localStorage.removeItem("cart"),a(),s&&je.getState().deleteCartItems(),alert("✅ Замовлення відправлено!")}catch(u){console.error(u),alert("❌ Сталася помилка при оформленні замовлення")}finally{o(!1)}},f=t.reduce((u,d)=>{const g=d?.priceSale&&d?.priceSale<d?.price?d.priceSale:d?.price||0,_=d?.quantity??1;return u+g*_},0);return e.jsxs("div",{className:`${xe.checkout} page`,children:[e.jsx("h1",{children:"Оформлення замовлення"}),e.jsx(Cn,{form:c,setForm:l}),e.jsxs("div",{className:xe.summary,children:[t.map(u=>{const d=u?.priceSale&&u?.priceSale<u?.price?u.priceSale:u?.price||0,g=u?.quantity??1;return e.jsxs("div",{className:xe.item,children:[e.jsxs("span",{children:[u?.name," x ",g]}),e.jsxs("span",{children:["₴",(d*g).toFixed(2)]})]},u.id)}),e.jsxs("div",{className:xe.total,children:[e.jsx("strong",{children:"Загальна сума:"})," ₴",f.toFixed(2)]})]}),e.jsxs("div",{className:xe.payment,children:[e.jsx("h2",{children:"Метод оплати"}),e.jsx(y,{label:"Оплата при отриманні",type:"radio",value:"cod",checked:i==="cod",onChange:()=>h("cod")}),e.jsx(y,{label:"Оплата за реквізитами",type:"radio",value:"card",checked:i==="card",onChange:()=>h("card")}),i==="card"&&e.jsxs("div",{className:xe.cardDetails,children:[e.jsx("h3",{children:"Реквізити для оплати"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Отримувач:"})," ФОП Батько Ірина Ігорівна"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"IBAN:"})," UA333220010000026005350071455"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ЄДРПОУ:"})," 3590006083"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"МФО:"})," 322001"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Призначення платежу:"})," Оплата замовлення ",t[0].id]})]})]}),e.jsx("div",{className:xe.links,children:e.jsx(H,{to:"/delivery-terms",className:"link",children:"📦 Умови доставки та повернення"})}),e.jsx($,{onClick:p,disabled:n,children:n?"Відправка...":"Відправити замовлення"})]})},In="_page_16uea_2",Pn="_title_16uea_11",Ln="_centerWrapper_16uea_18",En="_adminPage_16uea_30",Bn="_adminContent_16uea_40",Tn="_sidebarWrapper_16uea_49",On="_burger_16uea_60",qn="_open_16uea_97",An="_boxLine_16uea_153",Rn="_subcategories_16uea_161",Fn="_subcategoriesList_16uea_174",Un="_subcategoryLink_16uea_194",zn="_category_16uea_215",Mn="_categoryImage_16uea_240",Dn="_categoryName_16uea_293",Wn="_categoryIcon_16uea_319",W={page:In,title:Pn,centerWrapper:Ln,adminPage:En,adminContent:Bn,sidebarWrapper:Tn,burger:On,open:qn,boxLine:An,subcategories:Rn,subcategoriesList:Fn,subcategoryLink:Un,category:zn,categoryImage:Mn,categoryName:Dn,categoryIcon:Wn},Gn=()=>{const{user:s,setUser:t}=U(),{register:r,handleSubmit:a,formState:{errors:n}}=me({defaultValues:s?{first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,address:s.address,city:s.city,country:s.country,postalCode:s.postalCode,dateOfBirth:s.dateOfBirth?s.dateOfBirth.toString().split("T")[0]:void 0}:{}}),[o,i]=m.useState(null),[h,c]=m.useState(null);if(!s)return e.jsx("div",{children:"Ви не авторизовані"});const l=async p=>{try{if(s.id){const f=await he.updateUser(p,s.id);t(f),i("Профіль оновлено успішно"),c(null)}}catch(f){c(f.message||"Помилка при оновленні профілю"),i(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Профіль користувача"}),e.jsxs("div",{className:W.boxLine,children:[e.jsxs(H,{to:"/orders",children:[" ",e.jsx($,{variant:"link",children:"Мої замовлення"})," "]}),e.jsx(H,{to:"/change-password",className:"blue hover:underline",children:e.jsx($,{variant:"link",children:"Змінити пароль"})})]}),e.jsxs("form",{onSubmit:a(l),className:"form",children:[e.jsx(y,{placeholder:"Ім’я",id:"profile-firstname",autoComplete:"given-name",...r("first_name",{required:"Ім’я обов'язкове"})}),n.first_name&&e.jsx("p",{className:"error",children:n.first_name.message}),e.jsx(y,{placeholder:"Прізвище",id:"lastname",...r("last_name",{required:"Прізвище обов'язкове"})}),n.last_name&&e.jsx("p",{className:"error",children:n.last_name.message}),e.jsx(y,{type:"email",placeholder:"Email",autoComplete:"email",disabled:!0,id:"profile-email",...r("email",{required:"Email обов'язковий",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Некоректний email"}})}),n.email&&e.jsx("p",{className:"error",children:n.email.message}),e.jsx(y,{placeholder:"Телефон",autoComplete:"tel",...r("phone")}),e.jsx(y,{placeholder:"Адреса",autoComplete:"street-address",...r("address")}),e.jsx(y,{placeholder:"Місто",autoComplete:"address-level2",...r("city")}),e.jsx(y,{placeholder:"Країна",autoComplete:"country",...r("country")}),e.jsx(y,{placeholder:"Поштовий індекс",autoComplete:"postal-code",...r("postalCode")}),e.jsx(y,{type:"date",placeholder:"Дата народження",autoComplete:"bday",...r("dateOfBirth")}),o&&e.jsx("p",{className:"green",children:o}),h&&e.jsx("p",{className:"error",children:h}),e.jsx($,{type:"submit",children:"Оновити профіль"})]})]})};function Vn(){return e.jsx("div",{className:W.centerWrapper,children:e.jsx(tn,{})})}const Hn=()=>e.jsx("div",{children:"NotFoundPage"}),Jn="_aboutWrapper_93t88_2",Kn="_fbeAbout_93t88_6",Xn="_title_93t88_24",Yn="_subtitle_93t88_46",Qn="_description_93t88_73",Zn="_featuresList_93t88_90",eo="_valuesList_93t88_91",so="_deliveryList_93t88_92",Q={aboutWrapper:Jn,fbeAbout:Kn,title:Xn,subtitle:Yn,description:Qn,featuresList:Zn,valuesList:eo,deliveryList:so},to=()=>{const{t:s}=ke();return e.jsx("section",{"data-bg":"dark",className:`content-section ${Q.contentSection}`,children:e.jsx("div",{className:Q.aboutWrapper,children:e.jsxs("div",{className:Q.fbeAbout,children:[e.jsx("h1",{className:Q.title,children:s("about-h")}),e.jsx("p",{className:Q.description,children:s("about1")}),e.jsx("h2",{className:Q.subtitle,children:s("about-h1")}),e.jsx("p",{className:Q.description,children:s("about2")}),e.jsx("h2",{className:Q.subtitle,children:s("about-h2")}),e.jsxs("ul",{className:Q.featuresList,children:[e.jsx("li",{children:s("about3-1")}),e.jsx("li",{children:s("about3-2")}),e.jsx("li",{children:s("about3-3")}),e.jsx("li",{children:s("about3-4")})]}),e.jsx("h2",{className:Q.subtitle,children:s("about-h3")}),e.jsxs("ul",{className:Q.valuesList,children:[e.jsx("li",{children:s("about4-1")}),e.jsx("li",{children:s("about4-2")}),e.jsx("li",{children:s("about4-3")}),e.jsx("li",{children:s("about4-4")})]}),e.jsx("h2",{className:Q.subtitle,children:s("about-h4")}),e.jsxs("ul",{className:Q.deliveryList,children:[e.jsx("li",{children:s("about5-1")}),e.jsx("li",{children:s("about5-2")}),e.jsx("li",{children:s("about5-3")})]})]})})})},ro=()=>e.jsx("div",{className:"page",children:e.jsx(to,{})}),ao="_form_1pgbi_1",no="_row_1pgbi_26",oo="_error_1pgbi_33",co="_success_1pgbi_38",oe={form:ao,row:no,error:oo,success:co},io=()=>{const{register:s,handleSubmit:t,reset:r,formState:{errors:a,isSubmitting:n,isSubmitSuccessful:o},setError:i}=me({defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:"",address:"",city:"",country:"",postalCode:"",dateOfBirth:""}}),h=async c=>{try{await he.register(c),r()}catch(l){console.log("RegisterForm: Error during registration:",l),i("email",{type:"server",message:l.response?.data?.error.message||"Помилка при реєстрації"})}};return e.jsxs("form",{className:oe.form,onSubmit:t(h),children:[e.jsx("h2",{children:"Реєстрація користувача"}),e.jsxs("div",{className:oe.row,children:[e.jsx(y,{type:"text",placeholder:"Ім'я *",...s("first_name",{required:"Ім'я обов'язкове"})}),a.first_name&&e.jsx("p",{className:oe.error,children:a.first_name.message}),e.jsx(y,{type:"text",placeholder:"Прізвище *",...s("last_name",{required:"Прізвище обов'язкове"})}),a.last_name&&e.jsx("p",{className:oe.error,children:a.last_name.message})]}),e.jsx(y,{type:"email",placeholder:"Email *",...s("email",{required:"Email обов'язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),a.email&&e.jsx("p",{className:oe.error,children:a.email.message}),e.jsx(y,{type:"password",placeholder:"Пароль *",...s("password",{required:"Пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Пароль має містити мін. 8 символів, 1 велику і 1 малу літеру"}})}),a.password&&e.jsx("p",{className:oe.error,children:a.password.message}),e.jsx(y,{type:"tel",placeholder:"Телефон *",...s("phone",{required:"Телефон обов'язковий",pattern:{value:/^\+?[0-9\s\-()]+$/,message:"Некоректний номер телефону"}})}),e.jsx(y,{type:"text",placeholder:"Адреса",...s("address")}),e.jsxs("div",{className:oe.row,children:[e.jsx(y,{type:"text",placeholder:"Місто",...s("city")}),e.jsx(y,{type:"text",placeholder:"Країна",...s("country")})]}),e.jsx("div",{className:oe.row,children:e.jsx(y,{type:"text",placeholder:"Поштовий індекс",...s("postalCode")})}),e.jsxs("span",{children:["Дата народження  ",e.jsx("br",{}),e.jsx(y,{type:"date",placeholder:"Дата народження",...s("dateOfBirth")})]}),o&&e.jsx("p",{className:oe.success,children:"Реєстрація успішна! Перейдіть на сторінку авторизації"}),e.jsx($,{type:"submit",disabled:n,children:n?"Реєстрація...":"Зареєструватися"})]})},lo=()=>e.jsx("div",{className:"page",children:e.jsx(io,{})}),uo=()=>{const{categories:s}=Re(),{t}=ke();return e.jsxs("div",{className:Te.caruselBox,children:[e.jsx("h2",{children:t("choosecategory")}),e.jsx(ks,{effect:"coverflow",grabCursor:!0,pagination:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},modules:[$s,tt],spaceBetween:16,navigation:{enabled:!0,hideOnClick:!1},watchOverflow:!1,breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}},children:s.filter(r=>r.parentId===null).map(r=>e.jsx(ws,{className:Te.wrapper,children:e.jsx(H,{to:`/category/${r.slug}`,children:e.jsxs("div",{className:Te.categoryBox,children:[e.jsx("h3",{children:r.name}),e.jsx("div",{className:Te.imgBox,children:e.jsx("img",{src:r.imageUrl,alt:r.name})})]})})},r.id))})]})},us=()=>{const{products:s,fetchProducts:t}=Ve(),[r,a]=m.useState(!1),[n,o]=m.useState(null);return m.useEffect(()=>{(async()=>{a(!0),o(null);try{await t(),console.log("Products loaded successfully from store")}catch(h){console.error("Failed to load products:",h),o(h instanceof Error?h.message:"Unknown error")}finally{a(!1)}})()},[t]),r?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsx("div",{children:e.jsx("p",{children:"Завантаження продуктів..."})})]}):n?e.jsxs("div",{children:[e.jsx("h2",{children:"Продукти"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Помилка завантаження: ",n]}),e.jsx($,{onClick:()=>window.location.reload(),children:"Спробувати знову"})]})]}):e.jsxs("div",{className:"pages",children:[e.jsx("div",{style:{padding:"20px 0"},children:e.jsx(ks,{modules:[$s],spaceBetween:16,slidesPerView:"auto",navigation:!0,className:"swiper-box",children:s.map(i=>e.jsx(ws,{className:"slide",children:e.jsx(rs,{product:i,isMainPage:!0})},i.id))})}),e.jsx(uo,{})]})},mo="_menuItem_1vxyu_1",ho="_menuLink_1vxyu_7",ms={menuItem:mo,menuLink:ho},po=({href:s,label:t,onClick:r})=>e.jsx("li",{className:ms.menuItem,children:e.jsx("a",{href:s,className:ms.menuLink,onClick:a=>{a.preventDefault(),r?.()},children:t})}),go="_menu_cfg4h_1",xo={menu:go},Os=({items:s,onItemClick:t})=>{const r=a=>{t&&t(a)};return e.jsx("ul",{className:xo.menu,children:s.map((a,n)=>e.jsx(po,{href:a.href,label:a.label,onClick:()=>r(a.href)},n))})},fo="_sidebarBox_74jfv_1",jo="_sidebar_74jfv_1",hs={sidebarBox:fo,sidebar:jo},_o=({children:s})=>e.jsx("div",{className:hs.sidebarBox,children:e.jsx("div",{className:hs.sidebar,children:Ne.Children.map(s,t=>Ne.isValidElement(t)&&t.type===Os?Ne.cloneElement(t):null)})}),yo=()=>{const s=Se(),[t,r]=m.useState(!1),a=[{href:"dashboard",label:"Dashboard"},{href:"createproduct",label:"Create Product"},{href:"create-category",label:"Create/Update Category"},{href:"create-collection",label:"Create/Update Collection"},{href:"/orders",label:"Замовлення"}],n=()=>{r(i=>!i)},o=i=>{s(i),r(!1)};return e.jsxs("div",{className:`${W.adminPage} ${W.page}`,children:[e.jsxs("button",{className:W.burger,onClick:n,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx("div",{className:`${W.sidebarWrapper} ${t?W.open:""}`,children:e.jsx(_o,{isOpen:t,children:e.jsx(Os,{items:a,onItemClick:o})})}),e.jsx("div",{className:W.adminContent,children:e.jsx(Hs,{})})]})},bo="_cart_l07mg_9",vo="_cartItems_l07mg_21",No="_total_l07mg_27",So="_checkout_l07mg_42",ko="_empty_l07mg_57",Le={cart:bo,cartItems:vo,total:No,checkout:So,empty:ko},wo="_cartItem_4x454_12",Co="_image_4x454_26",$o="_info_4x454_34",Io="_quantity_4x454_52",Po="_remove_4x454_79",_e={cartItem:wo,image:Co,info:$o,quantity:Io,remove:Po},Lo=({item:s,price:t,updateQuantity:r,removeItem:a})=>e.jsxs("div",{className:_e.cartItem,children:[e.jsx("img",{src:s.image,alt:s.name,className:_e.image}),e.jsxs("div",{className:_e.info,children:[e.jsx("h2",{children:s.name}),e.jsxs("p",{children:["Колір: ",s.color]}),e.jsxs("p",{children:["Розмір: ",s.size]}),e.jsxs("p",{children:["Ціна: ₴",t.toFixed(2)]}),e.jsxs("div",{className:_e.quantity,children:[e.jsx($,{onClick:()=>r(s.productId,s.quantity-1),className:"black",children:"-"}),e.jsx(y,{className:_e.input,type:"number",id:"quantity",name:"quantity",min:"1",max:"99",value:s.quantity,onChange:n=>r(s.productId,Number(n.target.value))}),e.jsx($,{onClick:()=>r(s.productId,s.quantity+1),className:"black",children:"+"})]}),e.jsx($,{className:_e.remove,onClick:()=>a(s),children:"Видалити"})]})]}),Eo=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!1),n=Se(),{cart:o,fetchCart:i}=je(),{user:h}=U();m.useEffect(()=>{h&&h?.id&&i()},[h,i]),m.useEffect(()=>{if(o.length>0){const u=o.map(d=>{const g=d.priceSale&&d.priceSale<d.price?d.priceSale:d.price;return{...d,finalPrice:g*d.quantity}});t(u)}else{const u=localStorage.getItem("cart");if(u)try{const g=JSON.parse(u).map(_=>{const I=_.priceSale&&_.priceSale<_.price?_.priceSale:_.price;return{..._,finalPrice:I*_.quantity}});t(g)}catch{t([])}}a(!0)},[o]),m.useEffect(()=>{r&&localStorage.setItem("cart",JSON.stringify(s))},[s,r]);const c=(u,d,g,_,I)=>{t(w=>w.map(E=>{if(I?E.id===I:E.productId===u&&E.color===g&&E.size===_){const S=Math.max(1,Math.min(99,d)),C=E.priceSale&&E.priceSale<E.price?E.priceSale:E.price;return{...E,quantity:S,finalPrice:C*S}}return E}))},l=u=>{console.log(u),u.id?(t(d=>d.filter(g=>g.id!==u.id)),je.getState().deleteCartItem(u.id)):(t(d=>d.filter(g=>!(g.productId===u.productId&&g.color===u.color&&g.size===u.size))),localStorage.setItem("cart",JSON.stringify(s)))},p=s.reduce((u,d)=>u+(d.finalPrice??0),0);if(s.length===0)return e.jsx("div",{className:Le.empty,children:"Кошик порожній"});const f=()=>{if(s.length===0){alert("🛒 Кошик порожній");return}n("/checkout")};return e.jsxs("div",{className:Le.cart,children:[e.jsx("h1",{children:"Кошик"}),e.jsx("div",{className:Le.cartItems,children:s.map(u=>e.jsx(Lo,{item:u,price:u.finalPrice?u.finalPrice/u.quantity:0,updateQuantity:(d,g)=>c(d,g,u.color,u.size,u.id),removeItem:l},u.id??`${u.productId}-${u.color}-${u.size}`))}),e.jsxs("div",{className:Le.total,children:[e.jsxs("h2",{children:["Загальна сума: ₴",p.toFixed(2)]}),e.jsx($,{className:Le.checkout,onClick:f,children:"Оформити замовлення"})]})]})},Bo=()=>e.jsx("div",{className:W.page,children:e.jsx(Eo,{})}),To="_productsContainer_njt8n_1",Oo="_cardWrapper_njt8n_9",Ee={productsContainer:To,cardWrapper:Oo},qs=({categorySlug:s,collectionSlug:t})=>{const{products:r,fetchProducts:a}=Ve(),[n,o]=m.useState(!1),[i,h]=m.useState(null);return m.useEffect(()=>{(async()=>{o(!0),h(null);const l={limit:50,skip:0,categorySlug:s||void 0,collectionSlug:t||void 0};try{await a(l),console.log("Products loaded successfully from store")}catch(p){console.error("Failed to load products:",p),h(p instanceof Error?p.message:"Unknown error")}finally{o(!1)}})()},[a,s,t]),n?e.jsx("div",{children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Завантаження продуктів..."})]})}):i?e.jsx("div",{className:Ee.productsGrid,children:e.jsxs("div",{className:Ee.error,children:[e.jsxs("p",{children:["Помилка завантаження: ",i]}),e.jsx($,{onClick:()=>window.location.reload(),className:Ee.retryButton,children:"Спробувати знову"})]})}):e.jsx("div",{className:Ee.productsContainer,children:r.map(c=>e.jsx("div",{className:Ee.cardWrapper,children:e.jsx(rs,{product:c})},c.id))})},qo=()=>{const{categorySlug:s}=Ge(),{categories:t}=Re(),r=t.find(o=>o.slug===s),a=t.filter(o=>o.parentId===r?.id),n=o=>o?{backgroundImage:`url(${o})`}:{};return e.jsxs("div",{className:W.page,children:[e.jsx("h2",{className:W.title,children:r?.name||s?.toUpperCase()}),a.length>0&&e.jsx("div",{className:W.subcategories,children:e.jsx("div",{className:W.subcategoriesList,children:a.map(o=>e.jsx(H,{to:`/category/${o.slug}`,className:W.subcategoryLink,children:e.jsxs("div",{className:W.category,children:[e.jsx("div",{className:W.categoryImage,style:n(o.imageUrl),role:"img","aria-label":`Зображення категорії ${o.name}`,children:!o.imageUrl&&e.jsx("div",{className:W.categoryIcon,children:"📦"})}),e.jsx("div",{className:W.categoryName,children:o.name})]})},o.id))})}),e.jsx(qs,{categorySlug:s})]})},Ao=()=>{const{collectionSlug:s}=Ge();return console.log("Collection slug:",s),e.jsxs("div",{className:W.page,children:[e.jsx("h2",{children:s?.toUpperCase()}),e.jsx(qs,{collectionSlug:s})]})},Ro="_title_1lqmk_11",Fo="_section_1lqmk_19",Uo="_subtitle_1lqmk_32",zo="_list_1lqmk_41",Z={title:Ro,section:Fo,subtitle:Uo,list:zo},Mo=()=>e.jsxs("div",{className:"page",children:[e.jsx("h1",{className:Z.title,children:"Політика конфіденційності"}),e.jsx("section",{className:Z.section,children:e.jsx("p",{children:"У цій Політиці конфіденційності описано, як FBE («Сайт», «ми», «нас» або «наш») збирає, використовує та розкриває вашу особисту інформацію, коли ви відвідуєте, користуєтеся нашими послугами або робите покупки на сайті desse-swim."})}),e.jsxs("section",{className:Z.section,children:[e.jsx("h2",{className:Z.subtitle,children:"Зміни в цій Політиці конфіденційності"}),e.jsx("p",{children:"Ми можемо час від часу оновлювати цю Політику, у тому числі для відображення змін у нашій практиці або з інших операційних, юридичних чи нормативних причин."})]}),e.jsxs("section",{className:Z.section,children:[e.jsx("h2",{className:Z.subtitle,children:"Як ми збираємо та використовуємо вашу особисту інформацію"}),e.jsx("p",{children:"Для надання Послуг ми збираємо вашу особисту інформацію з різних джерел. Інформація, яку ми збираємо, залежить від того, як ви взаємодієте з нашим сайтом та послугами."})]}),e.jsxs("section",{className:Z.section,children:[e.jsx("h2",{className:Z.subtitle,children:"Інформація, яку ми збираємо"}),e.jsxs("ul",{className:Z.list,children:[e.jsx("li",{children:"Основні контактні дані (ім'я, адреса, телефон, email)"}),e.jsx("li",{children:"Інформація про замовлення та покупки"}),e.jsx("li",{children:"Дані облікового запису (логін, пароль)"}),e.jsx("li",{children:"Дані про підтримку клієнтів"})]})]}),e.jsxs("section",{className:Z.section,children:[e.jsx("h2",{className:Z.subtitle,children:"Використання cookies"}),e.jsx("p",{children:"Ми використовуємо файли cookie для роботи сайту, аналітики та персоналізації досвіду користувача."})]}),e.jsxs("section",{className:Z.section,children:[e.jsx("h2",{className:Z.subtitle,children:"Розкриття інформації"}),e.jsx("p",{children:"Ми можемо передавати інформацію третім сторонам для виконання послуг, аналітики, маркетингу та безпеки."})]})]}),Do="_product_1t8qn_3",Wo="_nameBlock_1t8qn_22",Go="_priceWrapper_1t8qn_36",Vo="_images_1t8qn_53",Ho="_mainImage_1t8qn_62",Jo="_noImage_1t8qn_69",Ko="_info_1t8qn_81",Xo="_title_1t8qn_87",Yo="_description_1t8qn_94",Qo="_price_1t8qn_36",Zo="_priceSale_1t8qn_113",ec="_priceOriginal_1t8qn_119",sc="_featuresSection_1t8qn_126",tc="_featuresList_1t8qn_140",rc="_productForm_1t8qn_152",ac="_formGroup_1t8qn_162",nc="_colorOptions_1t8qn_175",oc="_colorOption_1t8qn_175",cc="_selected_1t8qn_197",ic="_sizeOptions_1t8qn_203",lc="_sizeOption_1t8qn_203",dc="_quantityWrapper_1t8qn_232",uc="_quantityBtn_1t8qn_239",mc="_quantityInput_1t8qn_263",hc="_totalPrice_1t8qn_280",pc="_addToCartBtn_1t8qn_291",gc="_success_1t8qn_312",xc="_loading_1t8qn_320",fc="_error_1t8qn_321",jc="_noProduct_1t8qn_322",_c="_accordion_1t8qn_370",yc="_accordionBtn_1t8qn_374",bc="_accordionContent_1t8qn_388",vc="_mainImageContainer_1t8qn_427",Nc="_thumbnailContainer_1t8qn_449",Sc="_thumbnail_1t8qn_449",kc="_activeThumbnail_1t8qn_496",wc="_thumbnailImage_1t8qn_500",Cc="_buyNowBtn_1t8qn_535",k={product:Do,nameBlock:Wo,priceWrapper:Go,images:Vo,mainImage:Ho,noImage:Jo,info:Ko,title:Xo,description:Yo,price:Qo,priceSale:Zo,priceOriginal:ec,featuresSection:sc,featuresList:tc,productForm:rc,formGroup:ac,colorOptions:nc,colorOption:oc,selected:cc,sizeOptions:ic,sizeOption:lc,quantityWrapper:dc,quantityBtn:uc,quantityInput:mc,totalPrice:hc,addToCartBtn:pc,success:gc,loading:xc,error:fc,noProduct:jc,accordion:_c,accordionBtn:yc,accordionContent:bc,mainImageContainer:vc,thumbnailContainer:Nc,thumbnail:Sc,activeThumbnail:kc,thumbnailImage:wc,buyNowBtn:Cc},$c=({productId:s})=>{const[t,r]=m.useState(null),[a,n]=m.useState({variantId:null,size:null,quantity:1}),[o,i]=m.useState(!0),[h,c]=m.useState(null),[l,p]=m.useState(!1),[f,u]=m.useState(!1),[d,g]=m.useState(!1),[_,I]=m.useState(0),w=Ae(j=>j.lang),E=j=>{if(!j||j.length===0)return null;const D={uk:1,en:2}[w];return j.find(G=>G.languageId===D)||j[0]};m.useEffect(()=>{(async()=>{i(!0),c(null);try{const N=Number(s);if(isNaN(N))throw new Error("Невірний ID продукту");const D=await de.getById(N);if(r(D),D?.variants?.length){const G=[...D.variants].sort((Ds,Ws)=>Ws.stock-Ds.stock);n({variantId:G[0].id||null,size:G[0].sizes?.[0]||null,quantity:1})}}catch(N){c(N instanceof Error?N.message:"Помилка завантаження продукту")}finally{i(!1)}})()},[s]);const T=()=>t?.variants?[...t.variants].sort((j,N)=>j.stock>0&&N.stock===0?-1:j.stock===0&&N.stock>0?1:N.stock-j.stock):[],C=t?.variants?T().flatMap(N=>(N.images||[]).sort((D,G)=>(D.order??0)-(G.order??0)).map(D=>({...D,variantId:N.id,variantColor:N.color,variantSizes:N.sizes}))):[],R=j=>{const N=C[j];N&&(I(j),n(D=>({...D,variantId:N.variantId||null,size:N.variantSizes?.[0]||null})))},b=j=>{const N=t?.variants.find(G=>G.id===j);n(G=>({...G,variantId:j,size:N?.sizes?.[0]||null}));const D=C.findIndex(G=>G.variantId===j);D!==-1&&I(D)},L=j=>n(N=>({...N,size:j})),z=j=>{const N=Math.max(1,Math.min(99,Number(j.target.value)));n(D=>({...D,quantity:N}))},v=()=>n(j=>({...j,quantity:Math.min(j.quantity+1,99)})),q=()=>n(j=>({...j,quantity:Math.max(j.quantity-1,1)})),V=async()=>{if(!t)return;if(!a.variantId){c(w==="uk"?"Будь ласка, оберіть варіант":"Please select a variant");return}if(!a.size){c(w==="uk"?"Будь ласка, оберіть розмір.":"Please select a size.");return}const j=t.variants.find(N=>N.id===a.variantId&&N.sizes.includes(a.size));if(!j){c(w==="uk"?"Обраний варіант недоступний":"Selected variant is not available");return}p(!0),c(null);try{const N=E(t.translations),D=j.priceSale&&j.priceSale<j.price?j.priceSale:j.price||t.priceSale||t.price,G={productId:t.id,name:N?.name||(w==="uk"?"Без назви":"No name"),price:D,color:j.color,size:a.size,quantity:a.quantity,image:j.images?.[0]?.url};await je.getState().addCartItem(G),u(!0),setTimeout(()=>u(!1),2e3)}catch(N){c(N instanceof Error?N.message:w==="uk"?"Помилка додавання в кошик":"Error adding to cart")}finally{p(!1)}},O=async()=>{if(!t)return;if(!a.variantId){c(w==="uk"?"Будь ласка, оберіть варіант":"Please select a variant");return}if(!a.size){c(w==="uk"?"Будь ласка, оберіть розмір.":"Please select a size.");return}const j=t.variants.find(N=>N.id===a.variantId&&N.sizes.includes(a.size));if(!j){c(w==="uk"?"Обраний варіант недоступний":"Selected variant is not available");return}p(!0),c(null);try{const N=E(t.translations),D=j.priceSale&&j.priceSale<j.price?j.priceSale:j.price||t.priceSale||t.price,G={productId:t.id,name:N?.name||(w==="uk"?"Без назви":"No name"),price:D,color:j.color,size:a.size,quantity:a.quantity,image:j.images?.[0]?.url};await je.getState().addCartItem(G),window.location.href="/checkout"}catch(N){c(N instanceof Error?N.message:w==="uk"?"Помилка додавання в кошик":"Error adding to cart")}finally{p(!1)}};if(o)return e.jsx("div",{className:k.loading,children:w==="uk"?"Завантаження...":"Loading..."});if(h)return e.jsxs("div",{className:k.error,children:[w==="uk"?"Помилка":"Error",": ",h]});if(!t)return e.jsx("div",{className:k.noProduct,children:w==="uk"?"Продукт не знайдено":"Product not found"});const J=E(t.translations),pe=T(),M=t.variants.find(j=>j.id===a.variantId),A=M?.sizes||[],we=C[_],Fe=M?.priceSale&&M.priceSale<M.price?M.priceSale:M?.price||t.priceSale||t.price,Us=Fe*a.quantity;function zs(j){return Object.values(es).includes(j)}const Ms=j=>({key:j.id,displayName:j.description||j.color,color:zs(j.color)?Es[j.color]:"#cccccc",isOutOfStock:j.stock===0}),ns={uk:{variant:"Варіант:",size:"Розмір:",quantity:"Кількість:",totalPrice:"Загальна ціна:",addToCart:"Додати в кошик",buyNow:"Купити в один клік",adding:"Додавання...",added:"✓ Додано в кошик!",features:"Особливості",delivery:"Доставка та повернення",outOfStock:"Немає в наявності",deliveryInfo:["Замовлення по Україні: «Нова пошта» (2-3 робочих дні)","Замовлення по Польщі: «Нова пошта» (3-5 робочих днів)","Замовлення по США та Канаді: «Canada Post» (1-3 робочих дні)","Міжнародна доставка: Meest Express (10-12 робочих днів)"],deliveryNote:"Для додаткової інформації звертайтесь у",noImage:"Фото відсутнє"},en:{variant:"Variant:",size:"Size:",quantity:"Quantity:",totalPrice:"Total price:",addToCart:"Add to cart",buyNow:"Buy now",adding:"Adding...",added:"✓ Added to cart!",features:"Features",delivery:"Delivery and returns",outOfStock:"Out of stock",deliveryInfo:["Orders in Ukraine: «Nova Poshta» (2-3 business days)","Orders in Poland: «Nova Poshta» (3-5 business days)","Orders in USA and Canada: «Canada Post» (1-3 business days)","International delivery: Meest Express (10-12 business days)"],deliveryNote:"For additional information contact us on",noImage:"Photo not available"}},K=ns[w]||ns.uk;return e.jsxs("div",{className:k.product,children:[e.jsxs("div",{className:k.images,children:[e.jsx("div",{className:k.mainImageContainer,children:we?e.jsx("img",{src:we.url,alt:we.altText||J?.name||"Product image",className:k.mainImage}):e.jsx("div",{className:k.noImage,children:K.noImage})}),C.length>0&&e.jsx("div",{className:k.thumbnailContainer,children:C.map((j,N)=>e.jsx("div",{className:`${k.thumbnail} ${N===_?k.activeThumbnail:""}`,onClick:()=>R(N),children:e.jsx("img",{src:j.url,alt:j.altText||`Image ${N+1}`,className:k.thumbnailImage})},`${j.variantId}-${j.url}-${N}`))})]}),e.jsxs("div",{className:k.info,children:[e.jsx("h1",{className:k.title,children:J?.name||(w==="uk"?"Без назви":"No name")}),J?.description&&e.jsx("p",{className:k.description,children:J.description}),e.jsx("div",{className:k.nameBlock,children:e.jsx("div",{className:k.priceWrapper,children:M?.description})}),e.jsx("div",{className:k.priceWrapper,children:e.jsx("span",{className:+t.price>+Fe.toFixed(2)?k.priceOriginal:k.price,children:M&&M.price?"₴ "+M.price.toFixed(2):"₴ "+t.price})}),+t.price>+Fe.toFixed(2)&&e.jsx("div",{className:k.priceWrapper,children:e.jsxs("span",{className:k.priceSale,children:["₴",Fe.toFixed(2)]})}),e.jsxs("div",{className:k.productForm,children:[pe.length>0&&e.jsxs("div",{className:k.formGroup,children:[e.jsx("h4",{children:K.variant}),e.jsx("div",{className:k.colorOptions,children:pe.map(j=>{const N=Ms(j);return e.jsxs("div",{className:k.colorOptionWrapper,children:[e.jsx($,{className:`${k.colorOption} ${a.variantId===j.id?k.selected:""} ${N.isOutOfStock?k.outOfStock:""}`,onClick:()=>{j.id&&!N.isOutOfStock&&b(j.id)},disabled:N.isOutOfStock,style:{backgroundColor:N.color.toLowerCase(),width:"40px",height:"40px",minWidth:"40px",padding:"0",border:a.variantId===j.id?"3px solid #000":"1px solid #ccc",opacity:N.isOutOfStock?.5:1,cursor:N.isOutOfStock?"not-allowed":"pointer"}}),N.isOutOfStock&&e.jsx("span",{className:k.outOfStockLabel,children:K.outOfStock}),e.jsxs("span",{className:k.stockCount,children:["Stock: ",j.stock]})]},N.key)})})]}),A.length>0&&e.jsxs("div",{className:k.formGroup,children:[e.jsx("h4",{children:K.size}),e.jsx("div",{className:k.sizeOptions,children:A.map(j=>e.jsx($,{className:`${k.sizeOption} ${a.size===j?k.selected:""}`,onClick:()=>L(j),children:He[j]||j},j))})]}),t.features&&t.features.length>0&&e.jsxs("div",{className:k.featuresSection,children:[e.jsx("h3",{children:K.features}),e.jsx("ul",{className:k.featuresList,children:t.features.sort((j,N)=>j.order-N.order).map(j=>e.jsxs("li",{children:[e.jsx("strong",{children:(w==="uk"?j.text:j.textEn||"").split(" ")[0]})," ",(w==="uk"?j.text:j.textEn||"").split(" ").slice(1).join(" ")]},j.order+(w==="uk"?j.text:j.textEn||"")))})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("h4",{children:K.quantity}),e.jsxs("div",{className:k.quantityWrapper,children:[e.jsx($,{type:"button",className:k.quantityBtn,onClick:q,disabled:a.quantity<=1,children:"−"}),e.jsx(y,{type:"number",min:"1",max:"99",value:a.quantity,onChange:z,className:k.quantityInput}),e.jsx($,{type:"button",className:k.quantityBtn,onClick:v,disabled:a.quantity>=99,children:"+"})]})]}),e.jsx("div",{className:k.totalPrice,children:e.jsxs("strong",{children:[K.totalPrice," ₴",Us.toFixed(2)]})}),e.jsx($,{className:`${k.addToCartBtn} ${f?k.success:""}`,onClick:V,disabled:l||M?.stock===0,children:M?.stock===0?K.outOfStock:l?K.adding:f?K.added:K.addToCart}),e.jsx($,{onClick:O,className:k.buyNowBtn,children:"Купити в один клік"})]}),e.jsxs("div",{className:k.accordion,children:[e.jsxs("button",{className:k.accordionBtn,onClick:()=>g(!d),children:[K.delivery," ",d?"▲":"▼"]}),d&&e.jsxs("div",{className:k.accordionContent,children:[e.jsx("ul",{children:K.deliveryInfo.map((j,N)=>e.jsx("li",{children:j},N))}),e.jsxs("p",{children:[K.deliveryNote," ",e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:"Instagram"})]})]})]})]})]})};function Ic(){const s=Ge(),[t,r]=m.useState(null),[a,n]=m.useState(null);if(m.useEffect(()=>{r(s.id||null)},[s.id]),m.useEffect(()=>{if(!t)return;const c=setInterval(()=>{const l=document.querySelector('link[rel="canonical"]');l&&l.setAttribute("href",`https://fbe.pp.ua/product/${t}/`)},200);return setTimeout(()=>clearInterval(c),2e3),()=>clearInterval(c)},[t]),m.useEffect(()=>{t&&fetch(`https://fbe.onrender.com/products/${t}/`).then(h=>h.json()).then(h=>n(h)).catch(console.error)},[t]),m.useEffect(()=>{if(!a)return;const c=setInterval(()=>{document.title=`${a.translations[0].name} - FULL BODY ERA - FBE`},200);return setTimeout(()=>clearInterval(c),2e3),()=>clearInterval(c)},[a]),!t)return e.jsx("div",{children:"Продукт не знайдено"});if(!a)return e.jsx("div",{children:"Завантаження продукту..."});const o=()=>{const h=a.variants?.[0]?.images||[],c=h.find(l=>l.order==1);return console.log("orderedImage",c),c?c.url:h[0]?.url||"https://res.cloudinary.com/divhalkcr/image/upload/v1757010788/3_r61yy0.jpg"},i={"@context":"https://schema.org/","@type":"Product",name:a.translations[0].name,image:o(),description:a.translations[0].description||"",sku:`${a.id}`,offers:{"@type":"Offer",url:`https://fbe.pp.ua/product/${a.id}`,priceCurrency:"UAH",price:a.price?Number(a.price):0,availability:"https://schema.org/InStock"}};return console.log("getMainImage () - ",o()),e.jsxs(e.Fragment,{children:[e.jsxs(Js,{children:[e.jsx("meta",{name:"description",content:a.translations[0].description?.slice(0,150)}),e.jsx("link",{rel:"canonical",href:`https://fbe.pp.ua/product/${t}/`}),e.jsx("meta",{property:"og:type",content:"product"}),e.jsx("meta",{property:"og:title",content:`${a.translations[0].name} - FULL BODY ERA`}),e.jsx("meta",{property:"og:description",content:a.translations[0].description?.slice(0,150)}),e.jsx("meta",{property:"og:image",content:o()}),e.jsx("meta",{property:"og:url",content:`https://fbe.pp.ua/product/${t}`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:`${a.translations[0].name} - FULL BODY ERA`}),e.jsx("meta",{name:"twitter:description",content:a.translations[0].description?.slice(0,150)}),e.jsx("meta",{name:"twitter:image",content:o()}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(i)})]}),e.jsx("div",{className:W.page,children:e.jsx($c,{productId:t})})]})}const Pc="_form_ri903_1",Lc="_title_ri903_13",Ec="_field_ri903_20",Bc="_error_ri903_41",ie={form:Pc,title:Lc,field:Ec,error:Bc},Tc={async getAll(){try{const{data:s}=await P.get("users?limit=10&skip=0");return Je.getState().setUsers(s.users),s.users}catch(s){throw new Error("Не вдалося отримати список користувачів: "+s.message)}},async getById(s){try{const{data:t}=await P.get(`users/${s}`);return t}catch(t){throw new Error("Не вдалося отримати користувача: "+t.message)}},async updateUser(s,t){try{const{data:r}=await P.patch(`users/${s}`,t);return Je.getState().updateUserInStore(r),r}catch(r){throw new Error("Не вдалося оновити користувача: "+r.message)}},async sendMessageFromContact(s){try{await P.post("telegram/message",s)}catch(t){throw new Error("Не вдалося відправити повідомлення: "+t.message)}},async deleteUser(s){try{await P.delete(`users/${s}`),Je.getState().removeUser(s)}catch(t){throw new Error("Не вдалося видалити користувача: "+t.message)}}},Oc=()=>{const{register:s,handleSubmit:t,reset:r,formState:{errors:a,isSubmitting:n}}=me(),{t:o}=ke(),i=async h=>{try{await Tc.sendMessageFromContact(h),alert("Повідомлення успішно відправлено!"),r()}catch(c){console.error("❌ Помилка відправки",c),alert("Сталася помилка. Спробуйте пізніше.")}};return e.jsxs("form",{className:ie.form,onSubmit:t(i),children:[e.jsx("h2",{className:ie.title,children:o("contact-to-me")}),e.jsxs("div",{className:ie.field,children:[e.jsx(y,{type:"text",label:o("name"),...s("name",{required:"Ім’я обов’язкове"})}),a.name&&e.jsx("span",{className:ie.error,children:a.name.message})]}),e.jsxs("div",{className:ie.field,children:[e.jsx(y,{type:"email",label:"Email",...s("email",{required:"Email обов’язковий",pattern:{value:/\S+@\S+\.\S+/,message:"Некоректний email"}})}),a.email&&e.jsx("span",{className:ie.error,children:a.email.message})]}),e.jsxs("div",{className:ie.field,children:[e.jsx("label",{children:o("message")}),e.jsx("textarea",{rows:4,...s("message",{required:"Повідомлення обов’язкове"})}),a.message&&e.jsx("span",{className:ie.error,children:a.message.message})]}),e.jsx($,{type:"submit",disabled:n,children:o(n?"sending":"send")})]})},qc=()=>e.jsx("div",{className:"page",children:e.jsx(Oc,{})}),Ac=()=>{const{register:s,handleSubmit:t,formState:{errors:r}}=me(),[a,n]=m.useState(null),[o,i]=m.useState(null);console.log("error",a);const h=async c=>{if(c.newPassword!==c.confirmPassword){n("Новий пароль і підтвердження не збігаються");return}try{await he.changePassword(c.currentPassword,c.newPassword),i("Пароль успішно змінено"),n(null)}catch(l){n(l.message||"Помилка при зміні пароля"),i(null)}};return e.jsxs("div",{className:"page",children:[e.jsx("h2",{children:"Зміна пароля"}),e.jsxs("form",{onSubmit:t(h),className:"form",children:[e.jsx(y,{type:"password",placeholder:"Поточний пароль",...s("currentPassword",{required:"Поточний пароль обов'язковий"})}),r.currentPassword&&e.jsx("p",{className:"error",children:r.currentPassword.message}),e.jsx(y,{type:"password",placeholder:"Новий пароль",...s("newPassword",{required:"Новий пароль обов'язковий",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z]).{8,}$/,message:"Мін. 8 символів, 1 велика і 1 мала літера"}})}),r.newPassword&&e.jsx("p",{className:"error",children:r.newPassword.message}),e.jsx(y,{type:"password",placeholder:"Підтвердження нового пароля",...s("confirmPassword",{required:"Підтвердження пароля обов'язкове"})}),r.confirmPassword&&e.jsx("p",{className:"text-error-600",children:r.confirmPassword.message}),a&&e.jsx("p",{className:"error",children:a}),o&&e.jsx("p",{className:"green",children:o}),e.jsx($,{type:"submit",children:"Змінити пароль"})]})]})},Rc=ce((s,t)=>({orders:[],loading:!1,error:null,setOrders:r=>s({orders:r}),fetchOrders:async(r=!1,a,n=1,o=10)=>{s({loading:!0,error:null});try{const i=await We.getOrders(r,a,n,o);s({orders:i,loading:!1})}catch(i){s({error:i.message||"Помилка завантаження замовлень",loading:!1})}},updateOrderStatus:async(r,a)=>{s({loading:!0,error:null});try{const n=await We.updateOrderStatus(r,a),o=t().orders.map(i=>i.id===r?{...i,status:n.status}:i);s({orders:o,loading:!1})}catch(n){s({error:n.message||"Помилка оновлення статусу замовлення",loading:!1})}}}));var as=(s=>(s.ADMIN="ADMIN",s.USER="USER",s.CUSTOMER="CUSTOMER",s))(as||{}),ve=(s=>(s.PENDING="PENDING",s.PROCESSING="PROCESSING",s.COMPLETED="COMPLETED",s.CANCELED="CANCELED",s))(ve||{});const Fc=({trackingNumber:s,full:t=!1})=>{const[r,a]=m.useState(null),[n,o]=m.useState(!1),[i,h]=m.useState(null);return m.useEffect(()=>{if(!s)return;(async()=>{try{o(!0),h(null);const l=await Me.getTracking(s);a(l)}catch(l){h(l.message||"Не вдалося завантажити інформацію")}finally{o(!1)}})()},[s]),s?n?e.jsx("p",{children:"Завантаження інформації..."}):i?e.jsxs("p",{className:"error",children:["Помилка: ",i]}):r?e.jsxs("div",{className:"tracking-info",children:[e.jsx("h4",{children:"Інформація про відправлення"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Номер ТТН:"})," ",r.Number]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Статус:"})," ",r.Status]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Дата створення:"})," ",r.DateCreated]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Місто отримувача:"})," ",r.CityRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Відділення отримувача:"})," ",r.WarehouseRecipient]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Оголошена вартість:"})," ",r.DocumentCost," ₴"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Вага:"})," ",r.FactualWeight," кг"]}),r.ScheduledDeliveryDate&&e.jsxs("li",{children:[e.jsx("strong",{children:"Планова дата доставки:"})," ",r.ScheduledDeliveryDate]})]}),t&&e.jsxs("div",{className:"tracking-details",children:[e.jsx("h5",{children:"Детальна інформація:"}),e.jsx("table",{children:e.jsx("tbody",{children:Object.entries(r).map(([c,l])=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:c})}),e.jsx("td",{children:String(l)})]},c))})})]})]}):e.jsx("p",{children:"Інформація відсутня"}):e.jsx("p",{children:"Номер посилки відсутній"})},ps={[ve.PENDING]:"Очікує обробки",[ve.PROCESSING]:"В обробці",[ve.COMPLETED]:"Виконано",[ve.CANCELED]:"Скасовано"},Uc=({order:s,isAdmin:t,updatingOrderId:r,onStatusChange:a})=>{const n=Object.values(ve).map(c=>({value:c,label:ps[c]})),[o,i]=m.useState(s.trackingNumber||""),h=()=>{o&&We.updateOrderItemTracking(s.id,o)};return e.jsxs("li",{className:"order-item",children:[e.jsxs("div",{className:"order-header-section",children:[e.jsxs("h3",{children:["Замовлення #",s.id," —"," ",new Date(s.createdAt).toLocaleDateString("uk-UA")]}),e.jsxs("div",{className:"order-status-section",children:[t?e.jsx(De,{options:n,value:s.status,onChange:c=>a(s.id,c),disabled:r===s.id}):e.jsx("span",{className:`status-badge status-${s.status.toLowerCase()}`,children:ps[s.status]}),r===s.id&&e.jsx("span",{className:"updating-status",children:"Оновлюється..."})]})]}),e.jsxs("p",{className:"order-details",children:[s.guestName&&e.jsxs(e.Fragment,{children:["Ім'я: ",s.guestName]}),s.guestPhone&&e.jsxs(e.Fragment,{children:[", Телефон: ",s.guestPhone]}),s.guestEmail&&e.jsxs(e.Fragment,{children:[", Email: ",s.guestEmail]})]}),s.novaPostCity&&s.novaPostBranch&&e.jsxs("p",{children:["Доставка: Нова Пошта, ",s.novaPostCity,", Відділення №",s.novaPostBranch]}),e.jsxs("p",{children:["Оплата:"," ",s.paymentMethod==="COD"?"Накладений платіж":s.paymentMethod]}),e.jsxs("div",{className:"order-tracking-section",children:[t?e.jsxs("div",{className:"tracking-field",children:[e.jsx("input",{type:"text",placeholder:"Номер посилки",value:o,onChange:c=>i(c.target.value)}),e.jsx("button",{type:"button",onClick:h,children:"Зберегти"})]}):s.trackingNumber&&e.jsxs("p",{children:["Номер посилки: ",s.trackingNumber]}),s.trackingNumber&&e.jsxs("div",{className:"tracking-popover-wrapper",children:[e.jsxs("div",{className:"tracking-trigger",children:["Номер посилки: ",s.trackingNumber]}),e.jsx("div",{className:"tracking-popover",children:e.jsx(Fc,{trackingNumber:s.trackingNumber})})]})]}),e.jsx("ul",{className:"order-items",children:s.items.map(c=>e.jsxs("li",{className:"order-item-row",children:[e.jsx("img",{src:c.image||"",alt:c.name,className:"item-image"}),e.jsxs("div",{children:[e.jsx("span",{children:c.name}),c.color&&e.jsxs("span",{children:[", Колір: ",c.color]}),c.size&&e.jsxs("span",{children:[", Розмір: ",c.size]}),e.jsxs("span",{children:[", Кількість: ",c.quantity]}),e.jsxs("span",{children:[", Ціна:"," ",c.priceSale?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"price-old",children:[c.price,"₴"]})," ",e.jsxs("span",{className:"price-sale",children:[c.priceSale,"₴"]})]}):e.jsxs(e.Fragment,{children:[c.finalPrice,"₴"]})]})]})]},c.id))}),e.jsxs("p",{children:["Загальна сума:"," ",s.items.reduce((c,l)=>c+l.finalPrice*l.quantity,0),"₴"]})]})},zc=(s,t)=>{const[r,a]=m.useState(s);return m.useEffect(()=>{const n=setTimeout(()=>a(s),t);return()=>clearTimeout(n)},[s,t]),r},Mc=()=>{const{user:s}=U(),{orders:t,loading:r,fetchOrders:a,updateOrderStatus:n,error:o}=Rc(),[i,h]=m.useState(""),[c,l]=m.useState(""),[p,f]=m.useState(""),[u,d]=m.useState(1),g=10,[_,I]=m.useState(null),w=m.useRef(null),E=m.useRef(null),T=m.useRef(null),S=m.useRef(null),C=m.useRef(null),[R,b]=m.useState(null),[L,z]=m.useState(0),v=s?.role===as.ADMIN,q=zc(i,1e3),V=()=>{const A=document.activeElement;A===w.current?b("orderId"):A===E.current?b("dateFrom"):A===T.current?b("dateTo"):A===S.current?b("filterButton"):A===C.current?b("clearButton"):b(null)},O=m.useCallback(()=>{R&&setTimeout(()=>{switch(R){case"orderId":w.current?.focus(),w.current?.setSelectionRange(L,L);break;case"dateFrom":E.current?.focus();break;case"dateTo":T.current?.focus();break;case"filterButton":S.current?.focus();break;case"clearButton":C.current?.focus();break}b(null)},50)},[R,L]),J=m.useCallback(()=>{if(!s)return;V();const A={orderId:q?+q:void 0,dateFrom:c||void 0,dateTo:p||void 0};a(v,A,u,g)},[s,q,c,p,u,g,a,v]);m.useEffect(()=>J(),[J]),m.useEffect(()=>{r||O()},[r,O]);const pe=async(A,we)=>{try{I(A),await n(A,we)}finally{I(null)}},M=()=>{b("clearButton"),h(""),l(""),f(""),d(1)};return e.jsxs("div",{className:"orders-container",children:[e.jsx("h1",{children:v?"Всі замовлення":"Мої замовлення"}),o&&e.jsx("div",{className:"error-message",children:o}),e.jsxs("div",{className:"filters  boxLine",children:[e.jsx(y,{ref:w,type:"number",label:"Номер замовлення",placeholder:"Номер замовлення",value:i,onChange:A=>{z(A.target.selectionStart||0),h(A.target.value)},onFocus:()=>b("orderId")}),e.jsx(y,{ref:E,type:"date",label:"Дата від",value:c,onChange:A=>l(A.target.value),onFocus:()=>b("dateFrom")}),e.jsx(y,{ref:T,type:"date",label:"Дата до",value:p,onChange:A=>f(A.target.value),onFocus:()=>b("dateTo")}),e.jsxs("div",{className:"boxLine",children:[e.jsx($,{ref:S,onClick:J,variant:"link",children:"Фільтрувати"}),e.jsx($,{ref:C,onClick:M,variant:"secondary",children:"Очистити"})]})]}),q!==i&&e.jsxs("div",{className:"search-indicator",children:["Пошук замовлення #",i,"..."]}),e.jsx("ul",{className:"orders-list",children:t.length?t.map(A=>e.jsx(Uc,{order:A,isAdmin:v,updatingOrderId:_,onStatusChange:pe},A.id)):e.jsx("li",{children:"Немає замовлень"})}),e.jsxs("div",{className:"pagination",children:[e.jsx($,{onClick:()=>d(A=>Math.max(A-1,1)),disabled:u===1,variant:"link",children:"Попередня"}),e.jsxs("span",{children:["Сторінка ",u]}),e.jsx($,{onClick:()=>d(A=>A+1),disabled:t.length<g,variant:"link",children:"Наступна"})]}),r&&!_&&e.jsx("div",{className:"loading",children:"Завантаження..."})]})},Dc=()=>e.jsx("div",{className:"page",children:e.jsx(Mc,{})}),Wc=()=>e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Політика повернення та обміну"}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Країни"}),e.jsx("p",{children:"Ми здійснюємо обслуговування та продаж товарів лише на території України."})]}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Повернення товарів"}),e.jsxs("p",{children:["Повернення можливе ",e.jsx("strong",{children:"лише у випадку, якщо товар має виробничий дефект  або був пошкоджений під час доставки. "})]}),e.jsxs("p",{children:["Для оформлення повернення, будь ласка, зв'яжіться з нашою службою підтримки протягом"," ",e.jsx("strong",{children:"14 днів"})," з моменту отримання замовлення."]})]}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Обміни"}),e.jsx("p",{children:"Ми приймаємо обміни товарів на інший розмір чи модель у випадку наявності відповідного товару на складі."}),e.jsx("p",{children:"Витрати на пересилання при обміні оплачує покупець, за винятком випадків браку чи дефекту."})]}),e.jsxs("section",{className:"form",children:[e.jsx("h2",{children:"Як оформити повернення чи обмін"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Зверніться до нашої підтримки  ",e.jsx(H,{to:"/contact",className:"blue",children:" у розділі Контакти"})]}),e.jsx("li",{children:"Надайте фото товару та опис проблеми."}),e.jsx("li",{children:"Очікуйте підтвердження та інструкції від менеджера."})]})]})]}),Gc=[{path:"/login",element:e.jsx(Vn,{})},{path:"/register",element:e.jsx(lo,{})},{path:"/forgot-password",element:e.jsx(Ya,{})},{path:"/reset-password",element:e.jsx(rn,{})},{path:"/change-password",element:e.jsx(Ac,{})},{path:"/about",element:e.jsx(ro,{})},{path:"/contact",element:e.jsx(qc,{})},{path:"/privacy",element:e.jsx(Mo,{})},{path:"/product/:id",element:e.jsx(Ic,{})},{path:"/category/:categorySlug",element:e.jsx(qo,{})},{path:"/group/:collectionSlug",element:e.jsx(Ao,{})},{path:"/cart",element:e.jsx(Bo,{})},{path:"/checkout",element:e.jsx($n,{})},{path:"/delivery-terms",element:e.jsx(un,{})},{path:"/return-policy",element:e.jsx(Wc,{})}],Vc=[{path:"/",element:e.jsx(us,{})},{path:"/home",element:e.jsx(us,{})}],Hc=[{path:"/profile",element:e.jsx(Gn,{})},{path:"/orders",element:e.jsx(Dc,{})},{path:"/admin",element:e.jsx(yo,{}),children:[{index:!0,element:e.jsx(is,{})},{path:"createproduct",element:e.jsx(Rr,{})},{path:"edit-product/:id",element:e.jsx(Xa,{})},{path:"create-category",element:e.jsx(nr,{})},{path:"create-collection",element:e.jsx(or,{})},{path:"dashboard",element:e.jsx(is,{})}]}],gs={path:"*",element:e.jsx(Hn,{})},Jc="_footer_3cdk6_2",Kc="_container_3cdk6_11",Xc="_menu_3cdk6_18",Yc="_social_3cdk6_48",Qc="_copy_3cdk6_61",Zc="_mail_3cdk6_67",ye={footer:Jc,container:Kc,menu:Xc,social:Yc,copy:Qc,mail:Zc},ei=[{title:"About",url:"/about"},{title:"Contact",url:"/contact"},{title:"Privacy",url:"/privacy"},{title:"ReturnPolicy",url:"/return-policy"}],As=()=>e.jsx("footer",{className:ye.footer,children:e.jsxs("div",{className:ye.container,children:[e.jsx("div",{className:ye.menu,children:e.jsx("ul",{children:ei.map(s=>e.jsx("li",{children:e.jsx(H,{to:s.url,children:s.title})},s.title))})}),e.jsx("div",{className:ye.social,children:e.jsx("a",{href:"https://www.instagram.com/fbe.ua/",target:"_blank",rel:"noreferrer",children:e.jsx(Ks,{})})}),e.jsxs("div",{className:ye.copy,children:["© ",new Date().getFullYear()," ",e.jsx("a",{href:"mailto:office.fly.app@gmail.com",className:ye.mail,children:"FlyApp"})," ","Всі права захищені."]})]})}),si="_headerMenu_10icq_3",ti="_menuList_10icq_25",ri="_menuListOpen_10icq_51",ai="_menuItem_10icq_67",ni="_menuLink_10icq_92",oi="_submenu_10icq_117",ci="_submenuItem_10icq_145",ii="_arrow_10icq_168",li="_open_10icq_177",di="_burger_10icq_187",ui="_block_10icq_224",X={headerMenu:si,menuList:ti,menuListOpen:ri,menuItem:ai,menuLink:ni,submenu:oi,submenuItem:ci,arrow:ii,open:li,burger:di,block:ui},mi="_subsubmenu_q82db_1",hi="_open_q82db_15",pi="_submenuItem_q82db_19",gi="_categoryContainer_q82db_25",xi="_categoryLink_q82db_39",fi="_spacer_q82db_54",le={subsubmenu:mi,open:hi,submenuItem:pi,categoryContainer:gi,categoryLink:xi,spacer:fi},ji=({categories:s})=>{const[t,r]=m.useState(new Set),a=typeof window<"u"&&window.innerWidth<768,n=c=>{r(l=>{const p=new Set(l);return p.has(c)?p.delete(c):p.add(c),p})},o=c=>{a||r(l=>new Set(l).add(c))},i=c=>{a||r(l=>{const p=new Set(l);return p.delete(c),p})},h=(c=null)=>{const l=s.filter(p=>c===null?!p.parentId:p.parentId===c);return l.length?e.jsx("ul",{className:`${c===null?le.submenu:le.subsubmenu} ${c!==null&&t.has(c)?le.open:""}`,children:l.map(p=>{const f=s.some(d=>d.parentId===p.id),u=t.has(p.id);return e.jsxs("li",{className:le.submenuItem,onMouseEnter:f?()=>o(p.id):void 0,onMouseLeave:f?()=>i(p.id):void 0,children:[e.jsxs("div",{className:le.categoryContainer,onClick:a&&f?()=>n(p.id):void 0,children:[e.jsx("a",{href:`/category/${p.slug}`,className:le.categoryLink,children:p.name}),f?e.jsx("span",{className:le.iconContainer,children:u?e.jsx(bs,{size:16}):e.jsx(vs,{size:16})}):e.jsx("span",{className:le.spacer})]}),f&&u&&h(p.id)]},p.id)})}):null};return e.jsx(e.Fragment,{children:h()})},_i=({collections:s})=>e.jsx(e.Fragment,{children:s.map(t=>e.jsx("li",{className:X.submenuItem,children:e.jsx("a",{href:`/group/${t.slug||t.id}`,className:X.submenuLink,children:t.name})},t.id))});function Rs(s){const[t,r]=m.useState(()=>typeof window<"u"?window.matchMedia(s).matches:!1);return m.useEffect(()=>{const a=window.matchMedia(s),n=o=>r(o.matches);return a.addEventListener("change",n),()=>a.removeEventListener("change",n)},[s]),t}const yi="_switcher_2c75z_1",bi="_uk_2c75z_21",vi="_en_2c75z_24",Ni="_hidden_2c75z_27",Be={switcher:yi,"lang-btn":"_lang-btn_2c75z_6",uk:bi,en:vi,hidden:Ni},Si=()=>{const s=Ae(i=>i.lang),t=Ae(i=>i.setLang),[r,a]=m.useState(!1),n=s==="uk"?"en":"uk",o=()=>{t(n),a(!1)};return e.jsxs("div",{className:Be.switcher,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[e.jsx("button",{className:`${Be["lang-btn"]} ${Be[s]}`,children:s.toUpperCase()}),e.jsx("button",{className:`${Be["lang-btn"]} ${Be[n]}`,onClick:o,style:{opacity:r?1:0,pointerEvents:r?"auto":"none",transform:r?"translateX(0)":"translateX(-10px)"},children:n.toUpperCase()})]})},ki=({textColor:s})=>{const[t,r]=m.useState(null),[a,n]=m.useState(!1),[o,i]=m.useState(null),{categories:h,fetchCategories:c}=Re(),{collections:l,fetchCollections:p}=Ze(),{user:f}=U(),{t:u}=ke(),d=Ae(C=>C.lang);m.useEffect(()=>{c(),p()},[c,p]);const g=m.useMemo(()=>[{label:u("home"),link:"/"},{label:u("shop"),submenu:!0},{label:u("about"),link:"/about"},{label:u("contact"),link:"/contact"},...f?.role===as.ADMIN?[{label:"Адмінка",link:"/admin"}]:[]],[f,d,u]),_=()=>{n(!a),i(null)},I=C=>{i(o===C?null:C)},w={color:s,transition:"color 0.3s ease",backgroundColor:"transparent"},E={borderColor:`transparent ${s} ${s} transparent`,transition:"border-color 0.3s ease"},T={backgroundColor:s,transition:"background-color 0.3s ease"},S=Rs("(max-width: 950px)");return e.jsxs("nav",{className:X.headerMenu,children:[e.jsx(Si,{}),S&&e.jsxs($,{className:`${X.burger} ${a?X.open:""}`,onClick:_,"aria-label":"Toggle menu",style:w,children:[e.jsx("span",{style:T}),e.jsx("span",{style:T}),e.jsx("span",{style:T})]}),e.jsx("ul",{className:`${X.menuList} ${a?X.menuListOpen:""}`,children:g.map((C,R)=>e.jsx("li",{className:X.menuItem,onMouseEnter:()=>!a&&r(R),onMouseLeave:()=>!a&&r(null),children:C.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>I(R),"aria-expanded":o===R,style:w,children:[C.label,e.jsx("span",{className:`${X.arrow} ${o===R?X.open:""}`,style:E})]}),(t===R||o===R)&&e.jsxs("ul",{className:X.submenu,children:[e.jsxs("div",{className:X.block,children:[e.jsx("li",{className:"submenuTitle",children:u("categories")}),e.jsx(ji,{categories:h})]}),e.jsxs("div",{className:X.block,children:[e.jsx("li",{className:"submenuTitle",children:u("collections")}),e.jsx(_i,{collections:l})]})]})]}):e.jsx("a",{href:C.link,className:X.menuLink,style:w,children:C.label})},R))})]})},wi="_header_1vrs6_3",Ci="_logo_1vrs6_38",$i="_main_1vrs6_65",Ii="_sub_1vrs6_77",Pi="_authBlock_1vrs6_107",Li="_authBlockUser_1vrs6_137",Ei="_userName_1vrs6_147",Bi="_shoppingCart_1vrs6_274",Ti="_profileMenu_1vrs6_285",Oi="_dropdown_1vrs6_290",qi="_logoutBtn_1vrs6_305",te={header:wi,logo:Ci,main:$i,sub:Ii,authBlock:Pi,authBlockUser:Li,userName:Ei,shoppingCart:Bi,profileMenu:Ti,dropdown:Oi,logoutBtn:qi},Fs=()=>{const{logout:s,accessToken:t,user:r}=U(),{theme:a}=Is(),[n,o]=m.useState("#333333"),i=m.useRef(null),[h,c]=m.useState(!1),{cart:l,fetchCart:p}=je(),f=Rs("(max-width: 950px)");return m.useEffect(()=>{(!h||r&&!l.length)&&(p(),c(!0))},[r?.id]),m.useEffect(()=>{t||c(!1)},[t]),m.useEffect(()=>{const u=()=>{const w=document.querySelectorAll("[data-bg]"),E=i.current?.getBoundingClientRect();if(!E)return;let T=a==="dark";w.forEach(S=>{const C=S.getBoundingClientRect();if(C.top<E.bottom&&C.bottom>E.top){const R=S.getAttribute("data-bg");R==="dark"?T=!0:R==="light"&&(T=!1)}}),o(T?"#ffffff":"#333333")},d=new IntersectionObserver(w=>{w.forEach(E=>{E.isIntersecting&&u()})},{rootMargin:"0px 0px -80% 0px"});document.querySelectorAll("section, .hero, .section, main > div, [data-section]").forEach(w=>d.observe(w)),u();let _;const I=()=>{clearTimeout(_),_=window.setTimeout(u,100)};return window.addEventListener("scroll",I),()=>{d.disconnect(),clearTimeout(_),window.removeEventListener("scroll",I)}},[a]),e.jsxs("div",{ref:i,className:te.header,style:{color:n,transition:"color 0.3s ease"},children:[e.jsx(H,{to:"/home",children:e.jsxs("div",{className:te.logo,children:[e.jsx("span",{className:te.main,children:"fbe"}),e.jsx("span",{className:te.sub,children:"full body era"})]})}),e.jsx(ki,{textColor:n}),e.jsxs("div",{className:`${te.authBlock} ${r?te.authBlockUser:""}`,children:[t?e.jsxs("div",{className:te.profileMenu,children:[e.jsx("span",{className:te.userName,style:{color:n,transition:"color 0.3s ease"},children:e.jsxs(H,{to:"/profile",className:"grey boxLine",children:[!f&&e.jsx(os,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.3rem",transition:"color 0.3s ease"}}),(r?.last_name?.[0]??"").toUpperCase(),(r?.first_name?.[0]??"").toUpperCase()]})}),e.jsx("div",{className:te.dropdown,children:e.jsx("button",{className:te.logoutBtn,onClick:s,style:{color:n,border:"none",cursor:"pointer"},children:"Logout"})})]}):e.jsx(H,{to:"/login",children:e.jsx(os,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease"}})}),e.jsxs(H,{to:"/cart",className:te.shoppingCart,children:[e.jsx(Xs,{style:{color:n==="#ffffff"?"#ffffff":"#000000",fontSize:"1.5rem",transition:"color 0.3s ease",marginLeft:"10px"}}),e.jsx("span",{children:l&&l.length>0?l.length:""})]})]})]})},Ai="_dark_1eti1_1",Ri="_darkContent_1eti1_11",Fi="_title_1eti1_20",Ui="_description_1eti1_25",zi="_headerTop_1eti1_46",Mi="_layout_1eti1_68",Di="_content_1eti1_106",Wi="_contentSection_1eti1_115",ee={dark:Ai,darkContent:Ri,title:Fi,description:Ui,headerTop:zi,layout:Mi,content:Di,contentSection:Wi};function Gi({children:s}){const{t}=ke();return e.jsxs("div",{className:ee.layout,children:[e.jsx(Fs,{}),e.jsxs("main",{className:ee.content,children:[e.jsx("section",{"data-bg":"dark",className:`hero-section ${ee.headerSection}`,children:e.jsx("div",{className:ee.dark,children:e.jsxs("div",{className:ee.darkContent,children:[e.jsx("h1",{className:ee.title,children:"FULL BODY ERA"}),e.jsx("p",{className:ee.description,children:t("whoplay")})]})})}),e.jsx("section",{"data-bg":"light",className:`content-section ${ee.contentSection}`,children:s})]}),e.jsx(As,{})]})}function xs({children:s}){const{t}=ke();return e.jsxs("div",{className:ee.layout,children:[e.jsxs("section",{"data-bg":"light",className:`content-section ${ee.contentSection} `,children:[e.jsxs("ul",{className:ee.headerTop,children:[e.jsx("li",{children:t("fast-delivery")}),e.jsx("li",{children:t("free-delivery")}),e.jsx("li",{children:t("change-return")})]}),e.jsx(Fs,{})]}),e.jsx("section",{"data-bg":"light",className:`content-section ${ee.contentSection}`,children:e.jsx("main",{className:ee.content,children:s})}),e.jsx(As,{})]})}function Vi(){const{theme:s}=Is(),{accessToken:t}=U();return e.jsx("div",{className:`${s}`,children:e.jsxs(Ys,{children:[Vc.map(({path:r,element:a})=>e.jsx(Ce,{path:r,element:e.jsx(Gi,{children:a})},r)),Gc.map(({path:r,element:a})=>e.jsx(Ce,{path:r,element:e.jsx(xs,{children:a})},r)),Hc.map(({path:r,element:a,children:n})=>e.jsx(Ce,{path:r,element:t?e.jsx(xs,{children:a}):e.jsx(Qs,{to:"/login",replace:!0}),children:n&&n.map(o=>e.jsx(Ce,{index:o.index,path:o.path,element:o.element},o.path||"index"))},r)),e.jsx(Ce,{path:gs.path,element:gs.element})]})})}Zs.createRoot(document.getElementById("root")).render(e.jsx(Ne.StrictMode,{children:e.jsx(et,{basename:"/",children:e.jsx(Vi,{})})}));
